<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CMA Marketing Agency - Digital Services in Egypt</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap');

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        scroll-behavior: smooth;
        font-family: "Poppins", serif;
    }

    body {
        background: linear-gradient(270deg, #000000, #1c1c1c, #2a2a2a, #1c1c1c, #000000);
        background-size: 1000% 1000%;
        animation: gradientShift 15s ease infinite;
        color: white;
        overflow-x: hidden;
    }

    @keyframes gradientShift {
        0% {background-position: 0% 50%;}
        50% {background-position: 100% 50%;}
        100% {background-position: 0% 50%;}
    }

    .container {
        width: 100%;
        max-width: 1200px;
        margin-right: auto;
        margin-left: auto;
        padding-right: 15px;
        padding-left: 15px;
    }

    header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 2rem auto;
        max-width: 1200px;
        height: auto;
        padding: 0 1rem;
        flex-wrap: wrap;
    }

    .cmalogoh { 
        width: 100px;
        height: 100px;
    }

    .navigation ul {
        display: flex;
        list-style-type: none;
        gap: 2rem;
        flex-wrap: wrap;
    }

    .navigation a {
        text-decoration: none;
        color: #ffffff;
        font-size: 1rem;
        transition: all 0.3s ease;
    }

    .navigation a:hover {
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc, #ffd700, #d4af37);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    hr {
        opacity: 10%;
        margin: 0.5rem 0;
    }

    .plan {
        width: 100%;
        max-width: 700px;
        height: auto;
        opacity: 0;
        transform: translateY(30px) scale(0.95);
        animation: planFadeIn 1s ease-out forwards;
        animation-delay: 1s;
    }

    @keyframes planFadeIn {
        to {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }

    .hero {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 5rem auto;
        max-width: 1200px;
        padding: 1rem;
        gap: 2rem;
    }

    .herosup {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
    }

    .plan1 {
        font-size: 2.5rem;
        color: #ffffff;
        opacity: 0;
        transform: translateX(-30px);
        animation: textSlideIn 1s ease-out forwards;
        animation-delay: 0.5s;
    }

    .Don {
        font-size: 1.5rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc, #ffd700, #d4af37);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        opacity: 0;
        transform: translateX(-30px);
        animation: textSlideIn 1s ease-out forwards;
        animation-delay: 0.8s;
    }

    @keyframes textSlideIn {
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    .Contactus {
        display: inline-block;
        padding: 13px 24px;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc, #ffd700, #d4af37);
        color: rgb(0, 0, 0);
        border-radius: 25px;
        text-decoration: none;
        text-shadow: 0px 4px 4px rgba(0, 0, 0, 0);
        transition: all 0.4s ease-in-out;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        position: relative;
        overflow: hidden;
        font-weight: bold;
        text-align: center;
    }

    .Contactus:hover {
        color: #fff;
        transform: scale(1.1);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        background: linear-gradient(90deg, #ffcc00, #ffd700, #ffb300, #ffd700, #ffcc00);
    }

    .Contactus:hover::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.5);
        border-radius: 25px;
        transform: scale(1.5);
        opacity: 0;
        animation: glowEffect 0.4s forwards;
    }

    @keyframes glowEffect {
        0% {
            opacity: 0;
            transform: scale(1.5);
        }
        100% {
            opacity: 1;
            transform: scale(1);
        }
    }

    .about {
        padding: 4rem 2rem;
        max-width: 1200px;
        margin: 0 auto 6rem auto;
    }

    .about-container {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 4rem;
        flex-wrap: wrap;
    }

    .about-text {
        flex: 1;
        min-width: 300px;
        animation: slideInLeft 1s ease forwards;
        font-family: "Poppins", sans-serif;
    }

    .about-text h2 {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc, #ffd700, #d4af37);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .about-text p {
        font-size: 1rem;
        line-height: 1.7;
        color: #dddddd;
        margin-bottom: 1rem;
    }

    .about-text p:hover {
        color: #ffffff;
    }

    .about-image {
        flex: 1;
        min-width: 300px;
        display: flex;
        justify-content: center;
        animation: slideInRight 1s ease forwards;
    }

    .about-image img {
        width: 100%;
        max-width: 400px;
        height: auto;
    }

    @keyframes slideInLeft {
        0% { transform: translateX(-50px); opacity: 0; }
        100% { transform: translateX(0); opacity: 1; }
    }

    @keyframes slideInRight {
        0% { transform: translateX(50px); opacity: 0; }
        100% { transform: translateX(0); opacity: 1; }
    }

    .whatsapp-fixed {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #25d366;
        border-radius: 50%;
        padding: 14px;
        z-index: 9999;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .whatsapp-fixed:hover {
        transform: scale(1.15);
        box-shadow: 0 0 30px #25d366;
    }

    .whatsapp-fixed img {
        width: 30px;
        height: 30px;
        display: block;
    }

    .Ourwork {
        padding: 4rem 2rem;
        max-width: 1200px;
        margin: 0 auto 6rem auto;
    }

    .Our--work {
        display: flex;
        flex-direction: column;
        justify-content: space-around;
        align-items: left;
        margin: 5rem auto;
        max-width: 1200px;
    }

    .our-work-title {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc, #ffd700, #d4af37);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .projecttitl {
        text-align: center;
        margin-bottom: 3rem;
    }

    .projecttitl h1 {
        font-size: 3rem;
        color: #ffffff;
        text-transform: uppercase;
        position: relative;
        display: inline-block;
    }

    .projecttitl h1::after {
        content: "";
        position: absolute;
        width: 60%;
        height: 4px;
        background-color: #ffffff;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        border-radius: 5px;
    }

    .projects {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 2rem;
        max-width: 1200px;
        margin: 0 auto 4rem;
        padding: 0;
        list-style: none;
    }

    .project-card {
        background: #1c1c1e;
        border-radius: 15px;
        overflow: hidden;
        text-align: center;
        padding: 1.5rem 1rem;
        color: #fff;
        text-decoration: none;
        box-shadow: 0 4px 20px rgba(255, 255, 255, 0.15);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        height: 100%;
    }

    .project-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 10px 25px rgba(255, 255, 255, 0.3);
    }

    .image-wrapper {
        width: 100%;
        height: 200px;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        border-radius: 10px;
        margin-bottom: 1rem;
        background-color: #29292b;
    }

    .image-wrapper img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        transition: transform 0.4s ease;
    }

    .image-wrapper:hover img {
        transform: scale(1.08);
    }

    .project-card p {
        font-size: 1.2rem;
        font-weight: 600;
        margin-top: 0.5rem;
        color: #ffffff;
    }

    .contact-form {
        padding: 4rem 2rem;
        max-width: 600px;
        margin: 0 auto;
        color: #fff;
    }

    .form-container h2 {
        text-align: center;
        font-size: 2.5rem;
        margin-bottom: 2rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    form {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
    }

    input, textarea {
        padding: 1rem;
        border-radius: 8px;
        border: none;
        font-size: 1rem;
        background-color: #2a2a2a;
        color: #fff;
        width: 100%;
    }

    textarea {
        resize: vertical;
        min-height: 120px;
    }

    button {
        padding: 1rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        border: none;
        border-radius: 8px;
        color: #000;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.3s ease;
    }

    button:hover {
        background: linear-gradient(90deg, #ffcc00, #ffd700, #ffb300);
    }

    .footer-contact {
        background: #121212;
        padding: 3rem 2rem;
        text-align: center;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .footer-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1000px;
        margin: 0 auto;
        flex-wrap: wrap;
        gap: 2rem;
    }

    .footer-left p {
        margin: 0.5rem 0;
        font-size: 1.1rem;
        color: #dddddd;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .footer-left i {
        color: #ffd700;
    }

    .footer-right a {
        color: #ffffff;
        font-size: 1.8rem;
        margin: 0 10px;
        transition: transform 0.3s ease, color 0.3s ease;
    }

    .footer-right a:hover {
        color: #ffd700;
        transform: scale(1.2);
    }

    .lang-btn {
        background-color: transparent;
        border: 2px solid #ffd700;
        color: white;
        padding: 0.4rem 1rem;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        transition: background 0.3s ease;
    }

    .lang-btn:hover {
        background-color: #ffd700;
        color: black;
    }

    /* أنماط إشعار الشكر */
    .thank-you-popup {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 1000;
        justify-content: center;
        align-items: center;
    }
    
    .thank-you-content {
        background-color: white;
        padding: 40px;
        border-radius: 15px;
        text-align: center;
        max-width: 500px;
        width: 90%;
        box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
        animation: popup-appear 0.5s ease-out;
        position: relative;
        color: #333;
    }
    
    @keyframes popup-appear {
        0% { opacity: 0; transform: scale(0.8); }
        100% { opacity: 1; transform: scale(1); }
    }
    
    .thank-you-icon {
        font-size: 80px;
        color: #4CAF50;
        margin-bottom: 20px;
        animation: bounce 2s infinite;
    }
    
    @keyframes bounce {
        0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
        40% { transform: translateY(-20px); }
        60% { transform: translateY(-10px); }
    }
    
    .thank-you-title {
        font-size: 28px;
        font-weight: bold;
        margin-bottom: 15px;
        color: #333;
    }
    
    .thank-you-message {
        font-size: 18px;
        color: #666;
        margin-bottom: 25px;
        line-height: 1.5;
    }
    
    .thank-you-close {
        display: inline-block;
        background: #0077B6;
        color: white;
        padding: 12px 30px;
        border-radius: 30px;
        text-decoration: none;
        font-weight: bold;
        transition: all 0.3s ease;
        border: none;
        cursor: pointer;
        font-size: 16px;
    }
    
    .thank-you-close:hover {
        background: #005a8c;
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    /* أنماط صفحة الخدمة */
    .service-page {
        display: none;
        padding: 4rem 2rem;
        max-width: 1200px;
        margin: 0 auto;
    }

    .service-page.active {
        display: block;
    }

    .service-header {
        text-align: center;
        margin-bottom: 3rem;
    }

    .service-header h1 {
        font-size: 3rem;
        color: #ffffff;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc, #ffd700, #d4af37);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 1rem;
    }

    .service-header p {
        font-size: 1.2rem;
        color: #dddddd;
        max-width: 600px;
        margin: 0 auto;
    }

    .service-gallery {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 2rem;
        margin-top: 2rem;
    }

    .service-item {
        background: #1c1c1e;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 4px 20px rgba(255, 255, 255, 0.15);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        cursor: pointer;
    }

    .service-item:hover {
        transform: translateY(-8px);
        box-shadow: 0 10px 25px rgba(255, 255, 255, 0.3);
    }

    .service-item-media {
        width: 100%;
        height: 250px;
        overflow: hidden;
        background-color: #29292b;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
    }

    .service-item-media img,
    .service-item-media video {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.4s ease;
    }

    .service-item:hover .service-item-media img,
    .service-item:hover .service-item-media video {
        transform: scale(1.05);
    }

    .service-item-content {
        padding: 1.5rem;
    }

    .service-item-title {
        font-size: 1.3rem;
        font-weight: 600;
        color: #ffffff;
        margin-bottom: 0.5rem;
    }

    .service-item-description {
        font-size: 0.9rem;
        color: #dddddd;
        line-height: 1.5;
    }

    .back-btn {
        display: inline-block;
        margin-bottom: 2rem;
        padding: 0.8rem 2rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        color: #000;
        text-decoration: none;
        border-radius: 25px;
        font-weight: bold;
        transition: all 0.3s ease;
    }

    .back-btn:hover {
        background: linear-gradient(90deg, #ffcc00, #ffd700, #ffb300);
        transform: translateY(-2px);
    }

    /* أنماط صفحة تفاصيل المشروع */
    .project-details-page {
        display: none;
        padding: 4rem 2rem;
        max-width: 1200px;
        margin: 0 auto;
    }

    .project-details-page.active {
        display: block;
    }

    .project-details-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 3rem;
        align-items: start;
    }

    .project-gallery {
        position: relative;
    }

    .gallery-main {
        width: 100%;
        height: 400px;
        background: #29292b;
        border-radius: 15px;
        overflow: hidden;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .gallery-main img,
    .gallery-main video {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .gallery-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(0, 0, 0, 0.7);
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 18px;
        transition: all 0.3s ease;
    }

    .gallery-nav:hover {
        background: rgba(255, 215, 0, 0.8);
        color: black;
    }

    .gallery-nav.prev {
        left: 10px;
    }

    .gallery-nav.next {
        right: 10px;
    }

    .gallery-thumbnails {
        display: flex;
        gap: 10px;
        margin-top: 15px;
        overflow-x: auto;
        padding: 10px 0;
    }

    .thumbnail {
        width: 80px;
        height: 60px;
        border-radius: 8px;
        overflow: hidden;
        cursor: pointer;
        border: 2px solid transparent;
        transition: border-color 0.3s ease;
        flex-shrink: 0;
    }

    .thumbnail.active {
        border-color: #ffd700;
    }

    .thumbnail img,
    .thumbnail video {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .project-info {
        background: #1c1c1e;
        padding: 2rem;
        border-radius: 15px;
        height: fit-content;
    }

    .project-info h1 {
        font-size: 2.5rem;
        color: #ffffff;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 1rem;
    }

    .project-info .service-tag {
        display: inline-block;
        background: linear-gradient(90deg, #d4af37, #ffd700);
        color: #000;
        padding: 0.5rem 1rem;
        border-radius: 25px;
        font-size: 0.9rem;
        font-weight: bold;
        margin-bottom: 1.5rem;
    }

    .project-info p {
        color: #dddddd;
        line-height: 1.7;
        margin-bottom: 2rem;
        font-size: 1.1rem;
    }

    .contact-options {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .contact-btn {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1rem 1.5rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        color: #000;
        text-decoration: none;
        border-radius: 10px;
        font-weight: bold;
        transition: all 0.3s ease;
    }

    .contact-btn:hover {
        background: linear-gradient(90deg, #ffcc00, #ffd700, #ffb300);
        transform: translateY(-2px);
    }

    .contact-btn i {
        font-size: 1.2rem;
    }

    /* أنماط الداش بورد */
    .dashboard-container {
        display: none;
        min-height: 100vh;
        background: linear-gradient(270deg, #000000, #1c1c1c, #2a2a2a, #1c1c1c, #000000);
        background-size: 1000% 1000%;
        animation: gradientShift 15s ease infinite;
    }

    .dashboard-container.active {
        display: block;
    }

    .dashboard-header {
        background: #1c1c1e;
        padding: 1rem 2rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .dashboard-header h1 {
        color: #ffffff;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .dashboard-nav {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
    }

    .dashboard-nav button {
        background: transparent;
        border: 2px solid #ffd700;
        color: #ffd700;
        padding: 0.5rem 1rem;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .dashboard-nav button:hover,
    .dashboard-nav button.active {
        background: #ffd700;
        color: #000;
    }

    .dashboard-content {
        padding: 2rem;
    }

    .dashboard-section {
        display: none;
    }

    .dashboard-section.active {
        display: block;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .stat-card {
        background: #1c1c1e;
        padding: 1.5rem;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 15px rgba(255, 255, 255, 0.1);
    }

    .stat-card h3 {
        font-size: 2rem;
        color: #ffd700;
        margin-bottom: 0.5rem;
    }

    .stat-card p {
        color: #dddddd;
    }

    .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-bottom: 2rem;
    }

    .form-section {
        background: #1c1c1e;
        padding: 2rem;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(255, 255, 255, 0.1);
    }

    .form-section h3 {
        color: #ffd700;
        margin-bottom: 1rem;
    }

    .admin-form {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .admin-form input,
    .admin-form textarea,
    .admin-form select {
        padding: 0.8rem;
        border-radius: 5px;
        border: 1px solid #444;
        background-color: #2a2a2a;
        color: #fff;
    }

    .admin-form button {
        padding: 0.8rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        border: none;
        border-radius: 5px;
        color: #000;
        font-weight: bold;
        cursor: pointer;
    }

    .services-list,
    .works-list,
    .messages-list {
        background: #1c1c1e;
        padding: 2rem;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(255, 255, 255, 0.1);
        margin-top: 2rem;
    }

    .list-item {
        background: #2a2a2a;
        padding: 1rem;
        border-radius: 5px;
        margin-bottom: 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .list-item-actions {
        display: flex;
        gap: 0.5rem;
    }

    .list-item-actions button {
        padding: 0.3rem 0.8rem;
        border: none;
        border-radius: 3px;
        cursor: pointer;
        font-size: 0.8rem;
    }

    .edit-btn {
        background: #ffd700;
        color: #000;
    }

    .delete-btn {
        background: #ff4444;
        color: #fff;
    }

    .login-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        background: linear-gradient(270deg, #000000, #1c1c1c, #2a2a2a, #1c1c1c, #000000);
        background-size: 1000% 1000%;
        animation: gradientShift 15s ease infinite;
    }

    .login-form {
        background: #1c1c1e;
        padding: 3rem;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        width: 100%;
        max-width: 400px;
    }

    .login-form h2 {
        text-align: center;
        color: #ffd700;
        margin-bottom: 2rem;
        font-size: 2rem;
    }

    .login-form input {
        width: 100%;
        padding: 1rem;
        margin-bottom: 1rem;
        border: 1px solid #444;
        border-radius: 5px;
        background: #2a2a2a;
        color: #fff;
    }

    .login-form button {
        width: 100%;
        padding: 1rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        border: none;
        border-radius: 5px;
        color: #000;
        font-weight: bold;
        cursor: pointer;
        font-size: 1rem;
    }

    .file-input {
        margin-bottom: 1rem;
    }

    .file-input input[type="file"] {
        width: 100%;
        padding: 0.5rem;
        border: 1px solid #444;
        border-radius: 5px;
        background: #2a2a2a;
        color: #fff;
    }

    .multi-file-input {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .file-preview {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 10px;
    }

    .file-preview-item {
        position: relative;
        width: 80px;
        height: 60px;
        border-radius: 5px;
        overflow: hidden;
        background: #444;
    }

    .file-preview-item img,
    .file-preview-item video {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .file-preview-remove {
        position: absolute;
        top: -5px;
        right: -5px;
        background: #ff4444;
        color: white;
        border: none;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        font-size: 12px;
        cursor: pointer;
    }

    .chart-container {
        background: #1c1c1e;
        padding: 2rem;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(255, 255, 255, 0.1);
        margin-bottom: 2rem;
    }

    .chart-container h3 {
        color: #ffd700;
        margin-bottom: 1rem;
        text-align: center;
    }

    .chart-wrapper {
        height: 400px;
        position: relative;
    }

    /* إشعار الاستشارة التسويقية */
    .consultation-popup {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 10000;
        justify-content: center;
        align-items: center;
    }

    .consultation-content {
        background: linear-gradient(135deg, #1c1c1e, #2a2a2a);
        padding: 3rem;
        border-radius: 20px;
        text-align: center;
        max-width: 500px;
        width: 90%;
        box-shadow: 0 10px 40px rgba(255, 215, 0, 0.3);
        animation: consultation-appear 0.6s ease-out;
        position: relative;
        border: 2px solid #ffd700;
    }

    @keyframes consultation-appear {
        0% { opacity: 0; transform: scale(0.7) rotate(-5deg); }
        100% { opacity: 1; transform: scale(1) rotate(0deg); }
    }

    .consultation-icon {
        font-size: 100px;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 20px;
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }

    .consultation-title {
        font-size: 32px;
        font-weight: bold;
        margin-bottom: 15px;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .consultation-message {
        font-size: 18px;
        color: #dddddd;
        margin-bottom: 25px;
        line-height: 1.6;
    }

    .consultation-buttons {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
    }

    .consultation-btn {
        padding: 12px 25px;
        border-radius: 30px;
        text-decoration: none;
        font-weight: bold;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 10px;
        font-size: 16px;
    }

    .consultation-btn.primary {
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        color: #000;
    }

    .consultation-btn.primary:hover {
        background: linear-gradient(90deg, #ffcc00, #ffd700, #ffb300);
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(255, 215, 0, 0.4);
    }

    .consultation-btn.secondary {
        background: transparent;
        color: #ffd700;
        border: 2px solid #ffd700;
    }

    .consultation-btn.secondary:hover {
        background: #ffd700;
        color: #000;
    }

    /* وسائط استعلام للشاشات المختلفة */
    @media (max-width: 767px) {
        .container {
            max-width: 100%;
            padding: 0 15px;
        }
        
        header {
            flex-direction: column;
            gap: 1rem;
            margin: 1rem auto;
            padding: 0 0.5rem;
        }
        
        .navigation ul {
            gap: 1rem;
            justify-content: center;
        }
        
        .hero {
            flex-direction: column;
            text-align: center;
            margin: 2rem auto;
            padding: 1rem;
        }
        
        .herosup {
            align-items: center;
        }
        
        .plan1 {
            font-size: 2rem;
        }
        
        .Don {
            font-size: 1.2rem;
        }
        
        .plan {
            max-width: 100%;
            margin-top: 2rem;
        }
        
        .about {
            padding: 2rem 1rem;
        }
        
        .about-container {
            flex-direction: column;
            gap: 2rem;
        }
        
        .about-text, .about-image {
            min-width: 100%;
        }
        
        .our-work-title {
            font-size: 2rem;
            text-align: center;
        }
        
        .Our--work {
            align-items: center;
            padding: 1rem;
            margin: 2rem auto;
        }
        
        .projecttitl h1 {
            font-size: 2.2rem;
        }
        
        .projects {
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
        
        .project-card {
            max-width: 100%;
        }
        
        .contact-form {
            padding: 2rem 1rem;
        }
        
        input, textarea {
            padding: 0.8rem;
        }
        
        .footer-content {
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .footer-left p {
            justify-content: center;
        }

        .dashboard-header {
            flex-direction: column;
            gap: 1rem;
        }

        .dashboard-nav {
            flex-wrap: wrap;
            justify-content: center;
        }

        .form-grid {
            grid-template-columns: 1fr;
        }

        .stats-grid {
            grid-template-columns: 1fr;
        }

        .project-details-container {
            grid-template-columns: 1fr;
            gap: 2rem;
        }

        .gallery-main {
            height: 300px;
        }

        .consultation-content {
            padding: 2rem;
            margin: 1rem;
        }

        .consultation-buttons {
            flex-direction: column;
        }
    }
  </style>
</head>
<body>
  <!-- الموقع الرئيسي -->
  <div id="mainSite">
    <header>
      <img class="cmalogoh" src="SVG/asdgfArtboard 1.svg" alt="cma logo" />
      <nav class="navigation">
        <ul>
          <li><a href="#about" data-en="About" data-ar="من نحن">About</a></li>
          <li><a href="#Our-work" data-en="Our work" data-ar="أعمالنا">Our work</a></li>
          <li><a href="#contactMe" data-en="Contact" data-ar="تواصل معنا">Contact</a></li>
        </ul>
      </nav>
      <button id="langToggle" class="lang-btn">AR</button>
    </header>

    <hr />

    <section class="hero">
      <div class="herosup">
        <h1 class="plan1" data-en="The plane will take off" data-ar="الرحلة ستبدأ الآن">The plane will take off</h1>
        <h1 class="Don" data-en="Don't miss the opportunity and make your business take off" data-ar="لا تفوت الفرصة وخلّي عملك يقلع">Don't miss the opportunity and make your business take off</h1>
        <div class="heroptns">
          <a class="Contactus" href="https://wa.me/201004435408" target="_blank" data-en="Contact us" data-ar="تواصل معنا">Contact us</a>
        </div>
      </div>
      <img class="plan" src="sss/cmaaa.svg" alt="logocma2" />
    </section>

    <section class="about" id="about">
      <div class="about-container">
        <div class="about-image">
          <img src="sss/people-taking-part-business-event (1).svg" alt="About CMA" width="600" height="400">
        </div>
        <div class="about-text">
          <h2 data-en="About CMA" data-ar="من نحن">About CMA</h2>
          <p data-en="At CMA, we think differently. We believe in bold ideas that turn into real results for brands and content creators."
             data-ar="في CMA نفكر بشكل مختلف. نؤمن بالأفكار الجريئة التي تتحول إلى نتائج حقيقية للعلامات التجارية وصناع المحتوى.">
             At CMA, we think differently. We believe in bold ideas that turn into real results for brands and content creators.
          </p>
          <p data-en="We're a full-service marketing agency focused on building strong digital presence and delivering the professional image every brand deserves."
             data-ar="نحن وكالة تسويق متكاملة تركز على بناء حضور رقمي قوي وتقديم الصورة الاحترافية التي تستحقها كل علامة تجارية.">
             We're a full-service marketing agency focused on building strong digital presence and delivering the professional image every brand deserves.
          </p>
          <p data-en="Each project gets a dedicated team to ensure creativity, strategy, and impact—all in one."
             data-ar="كل مشروع يحصل على فريق مخصص لضمان الإبداع والاستراتيجية والتأثير في آن واحد.">
             Each project gets a dedicated team to ensure creativity, strategy, and impact—all in one.
          </p>
          <p data-en="We manage every account with full focus and professionalism as if it's our only one."
             data-ar="ندير كل حساب بتركيز واحترافية وكأنه الوحيد لدينا.">
             We manage every account with full focus and professionalism as if it's our only one.
          </p>
        </div>
      </div>
    </section>

    <section class="Ourwork" id="Our-work">
      <div class="Our--work">
        <div class="projecttitl">
          <h1 class="our-work-title" data-en="Our work" data-ar="أعمالنا">Our work</h1>
        </div>

        <ul class="projects" id="servicesGrid">
          <!-- سيتم إضافة الخدمات هنا -->
        </ul>
      </div>
    </section>

    <section class="contact-form" id="contactMe">
      <div class="form-container">
        <h2 data-en="Contact Us" data-ar="تواصل معنا">Contact Us</h2>
        <form id="contactForm" action="https://formsubmit.co/cmamarketing36@gmail.com" method="POST">
          <input type="text" name="_honey" style="display:none">
          <input type="hidden" name="_captcha" value="false">
          <input type="hidden" name="_subject" value="New form submission from CMA Website">
          
          <input type="text" name="name" placeholder="Your Name" required data-en="Your Name" data-ar="اسمك" />
          <input type="tel" name="phone" placeholder="Phone Number" required data-en="Phone Number" data-ar="رقم الهاتف" />
          <input type="email" name="email" placeholder="Email Address" required data-en="Email Address" data-ar="البريد الإلكتروني" />
          <textarea name="message" placeholder="Your Message" required data-en="Your Message" data-ar="رسالتك"></textarea>
          <button type="submit" data-en="Send Message" data-ar="إرسال">Send Message</button>
        </form>
      </div>
    </section>

    <section class="footer-contact">
      <div class="footer-content">
        <div class="footer-left">
          <p><i class="fas fa-envelope"></i> cmamarketing36@gmail.com</p>
          <p><i class="fas fa-phone-alt"></i> +20 109 479 5739</p>
          <p><i class="fas fa-phone-alt"></i> +20 100 443 5408</p>
        </div>

        <div class="footer-right">
          <a href="https://www.facebook.com/cmamarketing36" target="_blank" aria-label="Facebook">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="https://www.instagram.com/cma_egypt/" target="_blank" aria-label="Instagram">
            <i class="fab fa-instagram"></i>
          </a>
        </div>
      </div>
    </section>

    <a href="https://wa.me/201004435408"
       class="whatsapp-fixed"
       target="_blank"
       title="Chat with us on WhatsApp">
       <img src="https://img.icons8.com/ios-filled/50/ffffff/whatsapp--v1.png" alt="WhatsApp" />
    </a>
  </div>

  <!-- صفحات الخدمات -->
  <div id="photographyPage" class="service-page">
    <a href="#" class="back-btn" onclick="backToHome()">
      <i class="fas fa-arrow-left"></i> العودة للرئيسية
    </a>
    <div class="service-header">
      <h1 data-en="Photography Services" data-ar="خدمات التصوير">Photography Services</h1>
      <p data-en="Professional photography services for all your needs" data-ar="خدمات تصوير احترافية لجميع احتياجاتك">Professional photography services for all your needs</p>
    </div>
    <div class="service-gallery" id="photographyGallery">
      <!-- سيتم إضافة الأعمال هنا -->
    </div>
  </div>

  <div id="videoEditingPage" class="service-page">
    <a href="#" class="back-btn" onclick="backToHome()">
      <i class="fas fa-arrow-left"></i> العودة للرئيسية
    </a>
    <div class="service-header">
      <h1 data-en="Video Editing Services" data-ar="خدمات مونتاج الفيديو">Video Editing Services</h1>
      <p data-en="Professional video editing and motion graphics" data-ar="مونتاج فيديو احترافي وجرافيك متحرك">Professional video editing and motion graphics</p>
    </div>
    <div class="service-gallery" id="videoEditingGallery">
      <!-- سيتم إضافة الأعمال هنا -->
    </div>
  </div>

  <div id="graphicDesignPage" class="service-page">
    <a href="#" class="back-btn" onclick="backToHome()">
      <i class="fas fa-arrow-left"></i> العودة للرئيسية
    </a>
    <div class="service-header">
      <h1 data-en="Graphic Design Services" data-ar="خدمات تصميم الجرافيك">Graphic Design Services</h1>
      <p data-en="Creative graphic design solutions for your business" data-ar="حلول تصميم جرافيك إبداعية لعملك">Creative graphic design solutions for your business</p>
    </div>
    <div class="service-gallery" id="graphicDesignGallery">
      <!-- سيتم إضافة الأعمال هنا -->
    </div>
  </div>

  <!-- صفحة تفاصيل المشروع -->
  <div id="projectDetailsPage" class="project-details-page">
    <a href="#" class="back-btn" onclick="backToService()">
      <i class="fas fa-arrow-left"></i> العودة للخدمة
    </a>
    <div class="project-details-container">
      <div class="project-gallery">
        <div class="gallery-main" id="galleryMain">
          <!-- سيتم إضافة الوسائط هنا -->
        </div>
        <button class="gallery-nav prev" onclick="prevMedia()">
          <i class="fas fa-chevron-left"></i>
        </button>
        <button class="gallery-nav next" onclick="nextMedia()">
          <i class="fas fa-chevron-right"></i>
        </button>
        <div class="gallery-thumbnails" id="galleryThumbnails">
          <!-- سيتم إضافة المصغرات هنا -->
        </div>
      </div>
      <div class="project-info" id="projectInfo">
        <!-- سيتم إضافة معلومات المشروع هنا -->
      </div>
    </div>
  </div>

  <!-- نافذة تسجيل الدخول -->
  <div id="loginContainer" class="login-container" style="display: none;">
    <div class="login-form">
      <h2>XCMA - تسجيل الدخول</h2>
      <input type="text" id="username" placeholder="اسم المستخدم" required>
      <input type="password" id="password" placeholder="كلمة المرور" required>
      <button onclick="login()">دخول</button>
      <p style="text-align: center; margin-top: 1rem;">
        <a href="#" onclick="backToHome()" style="color: #ffd700; text-decoration: none;">العودة للموقع</a>
      </p>
    </div>
  </div>

  <!-- الداش بورد -->
  <div id="dashboardContainer" class="dashboard-container">
    <div class="dashboard-header">
      <h1>XCMA - لوحة التحكم</h1>
      <div class="dashboard-nav">
        <button onclick="showDashboardSection('overview')" class="active">نظرة عامة</button>
        <button onclick="showDashboardSection('services')">إدارة الخدمات</button>
        <button onclick="showDashboardSection('works')">إدارة الأعمال</button>
        <button onclick="showDashboardSection('messages')">الرسائل</button>
        <button onclick="showDashboardSection('settings')">الإعدادات</button>
        <button onclick="logout()">تسجيل الخروج</button>
      </div>
    </div>

    <div class="dashboard-content">
      <!-- نظرة عامة -->
      <div id="overviewSection" class="dashboard-section active">
        <div class="stats-grid">
          <div class="stat-card">
            <h3 id="totalServices">0</h3>
            <p>إجمالي الخدمات</p>
          </div>
          <div class="stat-card">
            <h3 id="totalWorks">0</h3>
            <p>إجمالي الأعمال</p>
          </div>
          <div class="stat-card">
            <h3 id="totalMessages">0</h3>
            <p>الرسائل الجديدة</p>
          </div>
          <div class="stat-card">
            <h3 id="totalViews">0</h3>
            <p>المشاهدات</p>
          </div>
        </div>

        <div class="chart-container">
          <h3>إحصائيات الأعمال</h3>
          <div class="chart-wrapper">
            <canvas id="worksChart" style="height: 400px;"></canvas>
          </div>
        </div>
      </div>

      <!-- إدارة الخدمات -->
      <div id="servicesSection" class="dashboard-section">
        <div class="form-section">
          <h3>إضافة خدمة جديدة</h3>
          <form class="admin-form" id="addServiceForm">
            <input type="text" id="serviceName" placeholder="اسم الخدمة" required>
            <input type="text" id="serviceNameEn" placeholder="اسم الخدمة بالإنجليزية" required>
            <textarea id="serviceDescription" placeholder="وصف الخدمة" required></textarea>
            <textarea id="serviceDescriptionEn" placeholder="وصف الخدمة بالإنجليزية" required></textarea>
            <div class="file-input">
              <label>صورة الخدمة:</label>
              <input type="file" id="serviceImage" accept="image/*" required>
            </div>
            <button type="submit">إضافة الخدمة</button>
          </form>
        </div>

        <div class="services-list">
          <h3>الخدمات الحالية</h3>
          <div id="servicesList">
            <!-- سيتم إضافة الخدمات هنا -->
          </div>
        </div>
      </div>

      <!-- إدارة الأعمال -->
      <div id="worksSection" class="dashboard-section">
        <div class="form-section">
          <h3>إضافة عمل جديد</h3>
          <form class="admin-form" id="addWorkForm">
            <select id="workService" required>
              <option value="">اختر الخدمة</option>
            </select>
            <input type="text" id="workTitle" placeholder="عنوان العمل" required>
            <input type="text" id="workTitleEn" placeholder="عنوان العمل بالإنجليزية" required>
            <textarea id="workDescription" placeholder="وصف العمل" required></textarea>
            <textarea id="workDescriptionEn" placeholder="وصف العمل بالإنجليزية" required></textarea>
            
            <div class="multi-file-input">
              <label>إضافة صور/فيديوهات:</label>
              <input type="file" id="workFiles" accept="image/*,video/*" multiple>
              <div class="file-preview" id="filePreview"></div>
            </div>
            
            <label>أو إضافة روابط فيديو:</label>
            <textarea id="videoLinks" placeholder="أدخل روابط الفيديو (رابط واحد في كل سطر)"></textarea>
            
            <button type="submit">إضافة العمل</button>
          </form>
        </div>

        <div class="works-list">
          <h3>الأعمال الحالية</h3>
          <div id="worksList">
            <!-- سيتم إضافة الأعمال هنا -->
          </div>
        </div>
      </div>

      <!-- الرسائل -->
      <div id="messagesSection" class="dashboard-section">
        <div class="messages-list">
          <h3>رسائل العملاء</h3>
          <div id="messagesList">
            <!-- سيتم إضافة الرسائل هنا -->
          </div>
        </div>
      </div>

      <!-- الإعدادات -->
      <div id="settingsSection" class="dashboard-section">
        <div class="form-section">
          <h3>تغيير كلمة المرور</h3>
          <form class="admin-form" id="changePasswordForm">
            <input type="password" id="currentPassword" placeholder="كلمة المرور الحالية" required>
            <input type="password" id="newPassword" placeholder="كلمة المرور الجديدة" required>
            <input type="password" id="confirmPassword" placeholder="تأكيد كلمة المرور الجديدة" required>
            <button type="submit">تغيير كلمة المرور</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- إشعار الشكر -->
  <div class="thank-you-popup" id="thankYouPopup">
    <div class="thank-you-content">
      <i class="fas fa-check-circle thank-you-icon"></i>
      <h2 class="thank-you-title" data-en="Thank You!" data-ar="شكراً لك!">Thank You!</h2>
      <p class="thank-you-message" data-en="Your message has been sent successfully. We'll contact you soon." data-ar="تم إرسال رسالتك بنجاح. سنتواصل معك قريباً.">Your message has been sent successfully. We'll contact you soon.</p>
      <button class="thank-you-close" id="closeThankYou" data-en="Close" data-ar="إغلاق">Close</button>
    </div>
  </div>

  <!-- إشعار الاستشارة التسويقية -->
  <div class="consultation-popup" id="consultationPopup">
    <div class="consultation-content">
      <i class="fas fa-rocket consultation-icon"></i>
      <h2 class="consultation-title" data-en="Free Marketing Consultation!" data-ar="استشارة تسويقية مجانية!">استشارة تسويقية مجانية!</h2>
      <p class="consultation-message" data-en="Ready to boost your business? Get a free marketing consultation from our experts now!" data-ar="مستعد لتطوير عملك؟ احصل على استشارة تسويقية مجانية من خبرائنا الآن!">مستعد لتطوير عملك؟ احصل على استشارة تسويقية مجانية من خبرائنا الآن!</p>
      <div class="consultation-buttons">
        <a href="https://wa.me/201004435408?text=أريد استشارة تسويقية مجانية" class="consultation-btn primary" target="_blank">
          <i class="fab fa-whatsapp"></i>
          <span data-en="Get Free Consultation" data-ar="احصل على الاستشارة">احصل على الاستشارة</span>
        </a>
        <button class="consultation-btn secondary" onclick="closeConsultation()">
          <i class="fas fa-times"></i>
          <span data-en="Maybe Later" data-ar="ربما لاحقاً">ربما لاحقاً</span>
        </button>
      </div>
    </div>
  </div>

  <script>
    // متغيرات عامة
    let currentLanguage = 'en';
    let isLoggedIn = false;
    let currentUser = null;
    let worksChart = null;
    let currentProject = null;
    let currentService = null;
    let currentMediaIndex = 0;
    let projectMedia = [];

    // بيانات افتراضية للنظام
    const defaultData = {
      services: [
        {
          id: 'photography',
          name: 'التصوير',
          nameEn: 'Photography',
          description: 'خدمات تصوير احترافية لجميع احتياجاتك',
          descriptionEn: 'Professional photography services for all your needs',
          image: 'sss/Content Management IM.svg'
        },
        {
          id: 'video-editing',
          name: 'مونتاج الفيديو',
          nameEn: 'Video Editing',
          description: 'مونتاج فيديو احترافي وجرافيك متحرك',
          descriptionEn: 'Professional video editing and motion graphics',
          image: 'sss/social-media-concept-with-smartphone.svg'
        },
        {
          id: 'graphic-design',
          name: 'تصميم الجرافيك',
          nameEn: 'Graphic Design',
          description: 'حلول تصميم جرافيك إبداعية لعملك',
          descriptionEn: 'Creative graphic design solutions for your business',
          image: 'sss/تعديل فيديو.svg'
        }
      ],
      works: [
        {
          id: 1,
          service: 'photography',
          title: 'تصوير منتجات',
          titleEn: 'Product Photography',
          description: 'تصوير احترافي للمنتجات التجارية مع إضاءة مثالية وزوايا إبداعية تبرز جمال المنتج وتجذب العملاء',
          descriptionEn: 'Professional commercial product photography with perfect lighting and creative angles that highlight product beauty and attract customers',
          media: [
            { type: 'image', url: 'sss/تصوير.svg' }
          ],
          videoLinks: []
        },
        {
          id: 2,
          service: 'video-editing',
          title: 'مونتاج إعلان تجاري',
          titleEn: 'Commercial Video Edit',
          description: 'مونتاج إعلان تجاري احترافي مع مؤثرات بصرية وصوتية متقدمة لضمان وصول رسالة العلامة التجارية بقوة',
          descriptionEn: 'Professional commercial video editing with advanced visual and audio effects to ensure powerful brand message delivery',
          media: [
            { type: 'image', url: 'sss/social-media-concept-with-smartphone.svg' }
          ],
          videoLinks: []
        }
      ],
      messages: [],
      users: [{
        username: 'admin',
        password: 'cma2024'
      }],
      settings: {
        consultationTimer: 30000, // 30 ثانية للاختبار
        consultationShown: false
      }
    };

    // تهيئة النظام
    function initializeSystem() {
      if (!localStorage.getItem('cmaData')) {
        localStorage.setItem('cmaData', JSON.stringify(defaultData));
      }
      
      loadServices();
      updateStats();
      startConsultationTimer();
    }

    // بدء مؤقت الاستشارة التسويقية
    function startConsultationTimer() {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      if (!data.settings.consultationShown) {
        setTimeout(() => {
          document.getElementById('consultationPopup').style.display = 'flex';
        }, data.settings.consultationTimer);
      }
    }

    // إغلاق إشعار الاستشارة
    function closeConsultation() {
      document.getElementById('consultationPopup').style.display = 'none';
      const data = JSON.parse(localStorage.getItem('cmaData'));
      data.settings.consultationShown = true;
      localStorage.setItem('cmaData', JSON.stringify(data));
    }

    // تبديل اللغة
    document.getElementById('langToggle').addEventListener('click', function () {
      const isArabic = this.innerText === 'AR';
      const elements = document.querySelectorAll('[data-en]');
  
      elements.forEach(el => {
        el.textContent = isArabic ? el.getAttribute('data-ar') : el.getAttribute('data-en');
        if (el.placeholder) {
          el.placeholder = isArabic ? el.getAttribute('data-ar') : el.getAttribute('data-en');
        }
      });
  
      this.innerText = isArabic ? 'EN' : 'AR';
      document.documentElement.setAttribute("lang", isArabic ? "ar" : "en");
      document.body.style.direction = isArabic ? "rtl" : "ltr";
      currentLanguage = isArabic ? 'ar' : 'en';
    });

    // معالجة إرسال النموذج
    document.getElementById('contactForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const form = this;
      const formData = new FormData(form);
      const submitButton = form.querySelector('button[type="submit"]');
      const originalButtonText = submitButton.textContent;
      
      // حفظ الرسالة محلياً
      const message = {
        id: Date.now(),
        name: formData.get('name'),
        phone: formData.get('phone'),
        email: formData.get('email'),
        message: formData.get('message'),
        date: new Date().toISOString(),
        read: false
      };
      
      const data = JSON.parse(localStorage.getItem('cmaData'));
      data.messages.push(message);
      localStorage.setItem('cmaData', JSON.stringify(data));
      
      const loadingText = currentLanguage === 'ar' ? 'جارِ الإرسال...' : 'Sending...';
      submitButton.textContent = loadingText;
      submitButton.disabled = true;
      
      fetch(form.action, {
        method: 'POST',
        body: formData,
        headers: {
          'Accept': 'application/json'
        }
      })
      .then(response => {
        document.getElementById('thankYouPopup').style.display = 'flex';
        form.reset();
        updateStats();
      })
      .catch(error => {
        document.getElementById('thankYouPopup').style.display = 'flex';
        form.reset();
        updateStats();
      })
      .finally(() => {
        submitButton.textContent = originalButtonText;
        submitButton.disabled = false;
      });
    });

    // إغلاق إشعار الشكر
    document.getElementById('closeThankYou').addEventListener('click', function() {
      document.getElementById('thankYouPopup').style.display = 'none';
    });

    document.getElementById('thankYouPopup').addEventListener('click', function(e) {
      if (e.target === this) {
        this.style.display = 'none';
      }
    });

    // عرض صفحة الخدمة
    function showService(serviceId) {
      const pages = document.querySelectorAll('.service-page');
      pages.forEach(page => page.classList.remove('active'));
      
      document.getElementById('mainSite').style.display = 'none';
      
      let pageId;
      switch(serviceId) {
        case 'photography':
          pageId = 'photographyPage';
          break;
        case 'video-editing':
          pageId = 'videoEditingPage';
          break;
        case 'graphic-design':
          pageId = 'graphicDesignPage';
          break;
        default:
          // للخدمات المضافة حديثاً
          pageId = 'photographyPage'; // استخدم صفحة عامة
      }
      
      document.getElementById(pageId).classList.add('active');
      currentService = serviceId;
      loadServiceWorks(serviceId);
    }

    // تحميل أعمال الخدمة
    function loadServiceWorks(serviceId) {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const works = data.works.filter(work => work.service === serviceId);
      
      let galleryId;
      switch(serviceId) {
        case 'photography':
          galleryId = 'photographyGallery';
          break;
        case 'video-editing':
          galleryId = 'videoEditingGallery';
          break;
        case 'graphic-design':
          galleryId = 'graphicDesignGallery';
          break;
        default:
          galleryId = 'photographyGallery';
      }
      
      const gallery = document.getElementById(galleryId);
      if (!gallery) return;
      
      gallery.innerHTML = '';
      
      works.forEach(work => {
        const workElement = document.createElement('div');
        workElement.className = 'service-item';
        workElement.onclick = () => showProjectDetails(work.id);
        
        // استخدام أول وسائط متاحة للعرض
        let mediaElement = '';
        if (work.media && work.media.length > 0) {
          const firstMedia = work.media[0];
          if (firstMedia.type === 'video') {
            mediaElement = `<video controls playsinline webkit-playsinline>
              <source src="${firstMedia.url}" type="video/mp4">
             </video>`;
          } else {
            mediaElement = `<img src="${firstMedia.url}" alt="${work.title}">`;
          }
        } else if (work.videoLinks && work.videoLinks.length > 0) {
          // إذا كان هناك روابط فيديو
          mediaElement = `<iframe src="${convertToEmbedUrl(work.videoLinks[0])}" frameborder="0" allowfullscreen></iframe>`;
        } else {
          // صورة افتراضية
          mediaElement = `<img src="sss/Content Management IM.svg" alt="${work.title}">`;
        }
        
        workElement.innerHTML = `
          <div class="service-item-media">
            ${mediaElement}
          </div>
          <div class="service-item-content">
            <h3 class="service-item-title">${currentLanguage === 'ar' ? work.title : work.titleEn}</h3>
            <p class="service-item-description">${(currentLanguage === 'ar' ? work.description : work.descriptionEn).substring(0, 100)}...</p>
          </div>
        `;
        
        gallery.appendChild(workElement);
      });
      
      if (works.length === 0) {
        gallery.innerHTML = `
          <div style="text-align: center; color: #666; padding: 2rem; grid-column: 1 / -1;">
            <p>لا توجد أعمال متاحة في هذه الخدمة حالياً</p>
          </div>
        `;
      }
    }

    // عرض تفاصيل المشروع
    function showProjectDetails(workId) {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const work = data.works.find(w => w.id === workId);
      
      if (!work) return;
      
      currentProject = work;
      projectMedia = [];
      
      // تجميع جميع الوسائط
      if (work.media) {
        projectMedia = [...work.media];
      }
      
      if (work.videoLinks) {
        work.videoLinks.forEach(link => {
          projectMedia.push({
            type: 'video',
            url: link,
            isLink: true
          });
        });
      }
      
      // إخفاء صفحة الخدمة وعرض صفحة التفاصيل
      const servicePages = document.querySelectorAll('.service-page');
      servicePages.forEach(page => page.classList.remove('active'));
      
      document.getElementById('projectDetailsPage').classList.add('active');
      
      // تحديث معلومات المشروع
      const service = data.services.find(s => s.id === work.service);
      const projectInfo = document.getElementById('projectInfo');
      projectInfo.innerHTML = `
        <h1>${currentLanguage === 'ar' ? work.title : work.titleEn}</h1>
        <div class="service-tag">${service ? (currentLanguage === 'ar' ? service.name : service.nameEn) : 'خدمة'}</div>
        <p>${currentLanguage === 'ar' ? work.description : work.descriptionEn}</p>
        <div class="contact-options">
          <a href="https://wa.me/201004435408?text=مرحباً، أريد الاستفسار عن مشروع: ${work.title}" class="contact-btn" target="_blank">
            <i class="fab fa-whatsapp"></i>
            <span>تواصل عبر واتساب</span>
          </a>
          <a href="tel:+201094795739" class="contact-btn">
            <i class="fas fa-phone"></i>
            <span>اتصل بنا</span>
          </a>
          <a href="mailto:cmamarketing36@gmail.com?subject=استفسار عن مشروع: ${work.title}" class="contact-btn">
            <i class="fas fa-envelope"></i>
            <span>أرسل بريد إلكتروني</span>
          </a>
        </div>
      `;
      
      // تحديث المعرض
      currentMediaIndex = 0;
      updateGallery();
    }

    // تحديث المعرض
    function updateGallery() {
      if (projectMedia.length === 0) return;
      
      const galleryMain = document.getElementById('galleryMain');
      const galleryThumbnails = document.getElementById('galleryThumbnails');
      
      // تحديث الوسائط الرئيسية
      const currentMedia = projectMedia[currentMediaIndex];
      let mediaHtml = '';
      
      if (currentMedia.isLink) {
        mediaHtml = `<iframe src="${convertToEmbedUrl(currentMedia.url)}" frameborder="0" allowfullscreen style="width: 100%; height: 100%;"></iframe>`;
      } else if (currentMedia.type === 'video') {
        mediaHtml = `<video controls playsinline webkit-playsinline><source src="${currentMedia.url}" type="video/mp4"></video>`;
      } else {
        mediaHtml = `<img src="${currentMedia.url}" alt="Project media">`;
      }
      
      galleryMain.innerHTML = mediaHtml;
      
      // تحديث المصغرات
      galleryThumbnails.innerHTML = '';
      projectMedia.forEach((media, index) => {
        const thumbnail = document.createElement('div');
        thumbnail.className = `thumbnail ${index === currentMediaIndex ? 'active' : ''}`;
        thumbnail.onclick = () => {
          currentMediaIndex = index;
          updateGallery();
        };
        
        let thumbHtml = '';
        if (media.isLink) {
          thumbHtml = `<div style="background: #444; color: white; display: flex; align-items: center; justify-content: center; font-size: 12px;">فيديو</div>`;
        } else if (media.type === 'video') {
          thumbHtml = `<video><source src="${media.url}" type="video/mp4"></video>`;
        } else {
          thumbHtml = `<img src="${media.url}" alt="Thumbnail">`;
        }
        
        thumbnail.innerHTML = thumbHtml;
        galleryThumbnails.appendChild(thumbnail);
      });
      
      // إظهار/إخفاء أزرار التنقل
      const prevBtn = document.querySelector('.gallery-nav.prev');
      const nextBtn = document.querySelector('.gallery-nav.next');
      
      if (projectMedia.length <= 1) {
        prevBtn.style.display = 'none';
        nextBtn.style.display = 'none';
      } else {
        prevBtn.style.display = 'block';
        nextBtn.style.display = 'block';
      }
    }

    // التنقل في المعرض
    function prevMedia() {
      if (currentMediaIndex > 0) {
        currentMediaIndex--;
        updateGallery();
      }
    }

    function nextMedia() {
      if (currentMediaIndex < projectMedia.length - 1) {
        currentMediaIndex++;
        updateGallery();
      }
    }

    // تحويل رابط الفيديو للتضمين
    function convertToEmbedUrl(url) {
      // YouTube
      if (url.includes('youtube.com/watch')) {
        const videoId = url.split('v=')[1]?.split('&')[0];
        return `https://www.youtube.com/embed/${videoId}`;
      }
      if (url.includes('youtu.be/')) {
        const videoId = url.split('youtu.be/')[1]?.split('?')[0];
        return `https://www.youtube.com/embed/${videoId}`;
      }
      
      // Instagram
      if (url.includes('instagram.com')) {
        return url + 'embed/';
      }
      
      // TikTok
      if (url.includes('tiktok.com')) {
        return url.replace('/video/', '/embed/');
      }
      
      return url;
    }

    // العودة للخدمة
    function backToService() {
      document.getElementById('projectDetailsPage').classList.remove('active');
      showService(currentService);
    }

    // العودة للصفحة الرئيسية
    function backToHome() {
      document.getElementById('mainSite').style.display = 'block';
      document.getElementById('loginContainer').style.display = 'none';
      document.getElementById('dashboardContainer').classList.remove('active');
      
      const pages = document.querySelectorAll('.service-page');
      pages.forEach(page => page.classList.remove('active'));
      
      document.getElementById('projectDetailsPage').classList.remove('active');
    }

    // الوصول للداش بورد (للمطورين فقط)
    function accessDashboard() {
      if (window.location.hash === '#XCMA' || localStorage.getItem('developerAccess')) {
        document.getElementById('mainSite').style.display = 'none';
        document.getElementById('loginContainer').style.display = 'flex';
      }
    }

    // فحص الرابط السري
    if (window.location.hash === '#XCMA') {
      localStorage.setItem('developerAccess', 'true');
      accessDashboard();
    }

    // تسجيل الدخول
    function login() {
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const user = data.users.find(u => u.username === username && u.password === password);
      
      if (user) {
        isLoggedIn = true;
        currentUser = user;
        document.getElementById('loginContainer').style.display = 'none';
        document.getElementById('dashboardContainer').classList.add('active');
        loadDashboard();
      } else {
        alert('اسم المستخدم أو كلمة المرور غير صحيحة');
      }
    }

    // تسجيل الخروج
    function logout() {
      isLoggedIn = false;
      currentUser = null;
      localStorage.removeItem('developerAccess');
      backToHome();
    }

    // تحميل الداش بورد
    function loadDashboard() {
      updateStats();
      loadServices();
      loadWorks();
      loadMessages();
      createChart();
    }

    // عرض قسم الداش بورد
    function showDashboardSection(section) {
      const sections = document.querySelectorAll('.dashboard-section');
      sections.forEach(s => s.classList.remove('active'));
      
      const buttons = document.querySelectorAll('.dashboard-nav button');
      buttons.forEach(btn => btn.classList.remove('active'));
      
      document.getElementById(section + 'Section').classList.add('active');
      event.target.classList.add('active');
    }

    // تحديث الإحصائيات
    function updateStats() {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      
      document.getElementById('totalServices').textContent = data.services.length;
      document.getElementById('totalWorks').textContent = data.works.length;
      document.getElementById('totalMessages').textContent = data.messages.filter(m => !m.read).length;
      document.getElementById('totalViews').textContent = Math.floor(Math.random() * 1000) + 500;
    }

    // تحميل الخدمات
    function loadServices() {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const servicesList = document.getElementById('servicesList');
      const servicesGrid = document.getElementById('servicesGrid');
      const workService = document.getElementById('workService');
      
      // تحديث قائمة الخدمات في الداش بورد
      if (servicesList) {
        servicesList.innerHTML = '';
        data.services.forEach(service => {
          const serviceElement = document.createElement('div');
          serviceElement.className = 'list-item';
          serviceElement.innerHTML = `
            <div>
              <strong>${service.name}</strong>
              <p style="color: #666; font-size: 0.9rem;">${service.description}</p>
            </div>
            <div class="list-item-actions">
              <button class="edit-btn" onclick="editService('${service.id}')">تعديل</button>
              <button class="delete-btn" onclick="deleteService('${service.id}')">حذف</button>
            </div>
          `;
          servicesList.appendChild(serviceElement);
        });
      }
      
      // تحديث شبكة الخدمات في الصفحة الرئيسية
      if (servicesGrid) {
        servicesGrid.innerHTML = '';
        data.services.forEach(service => {
          const serviceElement = document.createElement('li');
          serviceElement.innerHTML = `
            <a href="#" class="project-card" onclick="showService('${service.id}')">
              <div class="image-wrapper">
                <img src="${service.image}" alt="${service.name}" />
              </div>
              <p data-en="${service.nameEn}" data-ar="${service.name}">${currentLanguage === 'ar' ? service.name : service.nameEn}</p>
            </a>
          `;
          servicesGrid.appendChild(serviceElement);
        });
      }
      
      // تحديث قائمة اختيار الخدمة في إضافة الأعمال
      if (workService) {
        workService.innerHTML = '<option value="">اختر الخدمة</option>';
        data.services.forEach(service => {
          const option = document.createElement('option');
          option.value = service.id;
          option.textContent = service.name;
          workService.appendChild(option);
        });
      }
    }

    // تحميل الأعمال
    function loadWorks() {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const worksList = document.getElementById('worksList');
      
      if (worksList) {
        worksList.innerHTML = '';
        data.works.forEach(work => {
          const service = data.services.find(s => s.id === work.service);
          const workElement = document.createElement('div');
          workElement.className = 'list-item';
          workElement.innerHTML = `
            <div>
              <strong>${work.title}</strong>
              <p style="color: #666; font-size: 0.9rem;">الخدمة: ${service ? service.name : 'غير محدد'}</p>
              <p style="color: #666; font-size: 0.9rem;">${work.description.substring(0, 100)}...</p>
            </div>
            <div class="list-item-actions">
              <button class="edit-btn" onclick="editWork(${work.id})">تعديل</button>
              <button class="delete-btn" onclick="deleteWork(${work.id})">حذف</button>
            </div>
          `;
          worksList.appendChild(workElement);
        });
      }
    }

    // تحميل الرسائل
    function loadMessages() {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const messagesList = document.getElementById('messagesList');
      
      if (messagesList) {
        messagesList.innerHTML = '';
        data.messages.forEach(message => {
          const messageElement = document.createElement('div');
          messageElement.className = 'list-item';
          messageElement.style.backgroundColor = message.read ? '#2a2a2a' : '#3a3a3a';
          messageElement.innerHTML = `
            <div>
              <strong>${message.name}</strong>
              <p style="color: #666; font-size: 0.9rem;">الهاتف: ${message.phone} | البريد: ${message.email}</p>
              <p style="color: #ddd; margin-top: 0.5rem;">${message.message}</p>
              <p style="color: #666; font-size: 0.8rem; margin-top: 0.5rem;">${new Date(message.date).toLocaleString('ar-EG')}</p>
            </div>
            <div class="list-item-actions">
              <button class="${message.read ? 'edit-btn' : 'delete-btn'}" onclick="toggleMessageRead(${message.id})">
                ${message.read ? 'مقروءة' : 'وضع كمقروءة'}
              </button>
              <button class="delete-btn" onclick="deleteMessage(${message.id})">حذف</button>
            </div>
          `;
          messagesList.appendChild(messageElement);
        });
      }
    }

    // إنشاء الرسم البياني
    function createChart() {
      const ctx = document.getElementById('worksChart');
      if (ctx && !worksChart) {
        const data = JSON.parse(localStorage.getItem('cmaData'));
        const servicesData = data.services.map(service => ({
          service: service.name,
          count: data.works.filter(work => work.service === service.id).length
        }));
        
        worksChart = new Chart(ctx, {
          type: 'doughnut',
          data: {
            labels: servicesData.map(s => s.service),
            datasets: [{
              data: servicesData.map(s => s.count),
              backgroundColor: [
                '#ffd700',
                '#d4af37',
                '#fff8dc',
                '#ffcc00',
                '#ffb300'
              ],
              borderWidth: 2,
              borderColor: '#1c1c1e'
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                labels: {
                  color: '#ffffff',
                  font: {
                    family: 'Poppins',
                    size: 14
                  }
                }
              }
            }
          }
        });
      }
    }

    // معالجة رفع ملفات متعددة
    document.getElementById('workFiles').addEventListener('change', function(e) {
      const files = Array.from(e.target.files);
      const preview = document.getElementById('filePreview');
      
      files.forEach((file, index) => {
        const reader = new FileReader();
        reader.onload = function(e) {
          const previewItem = document.createElement('div');
          previewItem.className = 'file-preview-item';
          
          let mediaElement = '';
          if (file.type.startsWith('video/')) {
            mediaElement = `<video><source src="${e.target.result}" type="${file.type}"></video>`;
          } else {
            mediaElement = `<img src="${e.target.result}" alt="Preview">`;
          }
          
          previewItem.innerHTML = `
            ${mediaElement}
            <button class="file-preview-remove" onclick="removeFilePreview(this, ${index})" type="button">×</button>
          `;
          
          preview.appendChild(previewItem);
        };
        reader.readAsDataURL(file);
      });
    });

    function removeFilePreview(button, index) {
      button.parentElement.remove();
    }

    // معالجة نماذج الداش بورد
    document.getElementById('addServiceForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const formData = new FormData(this);
      const serviceImage = document.getElementById('serviceImage').files[0];
      
      if (serviceImage) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const service = {
            id: Date.now().toString(),
            name: formData.get('serviceName'),
            nameEn: formData.get('serviceNameEn'),
            description: formData.get('serviceDescription'),
            descriptionEn: formData.get('serviceDescriptionEn'),
            image: e.target.result
          };
          
          const data = JSON.parse(localStorage.getItem('cmaData'));
          data.services.push(service);
          localStorage.setItem('cmaData', JSON.stringify(data));
          
          loadServices();
          updateStats();
          document.getElementById('addServiceForm').reset();
          alert('تم إضافة الخدمة بنجاح');
        };
        reader.readAsDataURL(serviceImage);
      }
    });

    document.getElementById('addWorkForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const formData = new FormData(this);
      const workFiles = document.getElementById('workFiles').files;
      const videoLinks = document.getElementById('videoLinks').value.split('\n').filter(link => link.trim());
      
      // معالجة الملفات
      const media = [];
      let filesProcessed = 0;
      
      const processFiles = () => {
        if (workFiles.length === 0 && videoLinks.length === 0) {
          alert('يجب إضافة ملف واحد على الأقل أو رابط فيديو');
          return;
        }
        
        const work = {
          id: Date.now(),
          service: formData.get('workService'),
          title: formData.get('workTitle'),
          titleEn: formData.get('workTitleEn'),
          description: formData.get('workDescription'),
          descriptionEn: formData.get('workDescriptionEn'),
          media: media,
          videoLinks: videoLinks
        };
        
        const data = JSON.parse(localStorage.getItem('cmaData'));
        data.works.push(work);
        localStorage.setItem('cmaData', JSON.stringify(data));
        
        loadWorks();
        updateStats();
        if (worksChart) {
          worksChart.destroy();
          worksChart = null;
          createChart();
        }
        document.getElementById('addWorkForm').reset();
        document.getElementById('filePreview').innerHTML = '';
        alert('تم إضافة العمل بنجاح');
      };
      
      if (workFiles.length > 0) {
        Array.from(workFiles).forEach((file, index) => {
          const reader = new FileReader();
          reader.onload = function(e) {
            media.push({
              type: file.type.startsWith('video/') ? 'video' : 'image',
              url: e.target.result
            });
            
            filesProcessed++;
            if (filesProcessed === workFiles.length) {
              processFiles();
            }
          };
          reader.readAsDataURL(file);
        });
      } else {
        processFiles();
      }
    });

    document.getElementById('changePasswordForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const currentPassword = document.getElementById('currentPassword').value;
      const newPassword = document.getElementById('newPassword').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      
      if (currentPassword !== currentUser.password) {
        alert('كلمة المرور الحالية غير صحيحة');
        return;
      }
      
      if (newPassword !== confirmPassword) {
        alert('كلمة المرور الجديدة غير متطابقة');
        return;
      }
      
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const userIndex = data.users.findIndex(u => u.username === currentUser.username);
      data.users[userIndex].password = newPassword;
      localStorage.setItem('cmaData', JSON.stringify(data));
      
      currentUser.password = newPassword;
      document.getElementById('changePasswordForm').reset();
      alert('تم تغيير كلمة المرور بنجاح');
    });

    // وظائف الحذف والتعديل
    function deleteService(serviceId) {
      if (confirm('هل أنت متأكد من حذف هذه الخدمة؟')) {
        const data = JSON.parse(localStorage.getItem('cmaData'));
        data.services = data.services.filter(s => s.id !== serviceId);
        data.works = data.works.filter(w => w.service !== serviceId);
        localStorage.setItem('cmaData', JSON.stringify(data));
        
        loadServices();
        loadWorks();
        updateStats();
      }
    }

    function deleteWork(workId) {
      if (confirm('هل أنت متأكد من حذف هذا العمل؟')) {
        const data = JSON.parse(localStorage.getItem('cmaData'));
        data.works = data.works.filter(w => w.id !== workId);
        localStorage.setItem('cmaData', JSON.stringify(data));
        
        loadWorks();
        updateStats();
        if (worksChart) {
          worksChart.destroy();
          worksChart = null;
          createChart();
        }
      }
    }

    function deleteMessage(messageId) {
      if (confirm('هل أنت متأكد من حذف هذه الرسالة؟')) {
        const data = JSON.parse(localStorage.getItem('cmaData'));
        data.messages = data.messages.filter(m => m.id !== messageId);
        localStorage.setItem('cmaData', JSON.stringify(data));
        
        loadMessages();
        updateStats();
      }
    }

    function toggleMessageRead(messageId) {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const message = data.messages.find(m => m.id === messageId);
      if (message) {
        message.read = !message.read;
        localStorage.setItem('cmaData', JSON.stringify(data));
        loadMessages();
        updateStats();
      }
    }

    // تهيئة النظام عند تحميل الصفحة
    document.addEventListener('DOMContentLoaded', function() {
      initializeSystem();
      
      if (window.location.search.includes('submitted=true')) {
        document.getElementById('thankYouPopup').style.display = 'flex';
        const url = new URL(window.location);
        url.searchParams.delete('submitted');
        window.history.replaceState({}, document.title, url.toString());
      }
    });
  </script>
</body>
</html>