<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CMA Marketing Agency - Digital Services in Egypt</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap');

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        scroll-behavior: smooth;
        font-family: "Poppins", serif;
    }

    body {
        background: linear-gradient(270deg, #000000, #1c1c1c, #2a2a2a, #1c1c1c, #000000);
        background-size: 1000% 1000%;
        animation: gradientShift 15s ease infinite;
        color: white;
        overflow-x: hidden;
    }

    @keyframes gradientShift {
        0% {background-position: 0% 50%;}
        50% {background-position: 100% 50%;}
        100% {background-position: 0% 50%;}
    }

    .container {
        width: 100%;
        max-width: 1200px;
        margin-right: auto;
        margin-left: auto;
        padding-right: 15px;
        padding-left: 15px;
    }

    header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 2rem auto;
        max-width: 1200px;
        height: auto;
        padding: 0 1rem;
        flex-wrap: wrap;
    }

    .cmalogoh { 
        width: 100px;
        height: 100px;
    }

    .navigation ul {
        display: flex;
        list-style-type: none;
        gap: 2rem;
        flex-wrap: wrap;
    }

    .navigation a {
        text-decoration: none;
        color: #ffffff;
        font-size: 1rem;
        transition: all 0.3s ease;
    }

    .navigation a:hover {
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc, #ffd700, #d4af37);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    hr {
        opacity: 10%;
        margin: 0.5rem 0;
    }

    .plan {
        width: 100%;
        max-width: 700px;
        height: auto;
        opacity: 0;
        transform: translateY(30px) scale(0.95);
        animation: planFadeIn 1s ease-out forwards;
        animation-delay: 1s;
    }

    @keyframes planFadeIn {
        to {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }

    .hero {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 5rem auto;
        max-width: 1200px;
        padding: 1rem;
        gap: 2rem;
    }

    .herosup {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
    }

    .plan1 {
        font-size: 2.5rem;
        color: #ffffff;
        opacity: 0;
        transform: translateX(-30px);
        animation: textSlideIn 1s ease-out forwards;
        animation-delay: 0.5s;
    }

    .Don {
        font-size: 1.5rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc, #ffd700, #d4af37);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        opacity: 0;
        transform: translateX(-30px);
        animation: textSlideIn 1s ease-out forwards;
        animation-delay: 0.8s;
    }

    @keyframes textSlideIn {
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    .Contactus {
        display: inline-block;
        padding: 13px 24px;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc, #ffd700, #d4af37);
        color: rgb(0, 0, 0);
        border-radius: 25px;
        text-decoration: none;
        text-shadow: 0px 4px 4px rgba(0, 0, 0, 0);
        transition: all 0.4s ease-in-out;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        position: relative;
        overflow: hidden;
        font-weight: bold;
        text-align: center;
    }

    .Contactus:hover {
        color: #fff;
        transform: scale(1.1);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        background: linear-gradient(90deg, #ffcc00, #ffd700, #ffb300, #ffd700, #ffcc00);
    }

    .Contactus:hover::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.5);
        border-radius: 25px;
        transform: scale(1.5);
        opacity: 0;
        animation: glowEffect 0.4s forwards;
    }

    @keyframes glowEffect {
        0% {
            opacity: 0;
            transform: scale(1.5);
        }
        100% {
            opacity: 1;
            transform: scale(1);
        }
    }

    .about {
        padding: 4rem 2rem;
        max-width: 1200px;
        margin: 0 auto 6rem auto;
    }

    .about-container {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 4rem;
        flex-wrap: wrap;
    }

    .about-text {
        flex: 1;
        min-width: 300px;
        animation: slideInLeft 1s ease forwards;
        font-family: "Poppins", sans-serif;
    }

    .about-text h2 {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc, #ffd700, #d4af37);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .about-text p {
        font-size: 1rem;
        line-height: 1.7;
        color: #dddddd;
        margin-bottom: 1rem;
    }

    .about-text p:hover {
        color: #ffffff;
    }

    .about-image {
        flex: 1;
        min-width: 300px;
        display: flex;
        justify-content: center;
        animation: slideInRight 1s ease forwards;
    }

    .about-image img {
        width: 100%;
        max-width: 400px;
        height: auto;
    }

    @keyframes slideInLeft {
        0% { transform: translateX(-50px); opacity: 0; }
        100% { transform: translateX(0); opacity: 1; }
    }

    @keyframes slideInRight {
        0% { transform: translateX(50px); opacity: 0; }
        100% { transform: translateX(0); opacity: 1; }
    }

    .whatsapp-fixed {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #25d366;
        border-radius: 50%;
        padding: 14px;
        z-index: 9999;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .whatsapp-fixed:hover {
        transform: scale(1.15);
        box-shadow: 0 0 30px #25d366;
    }

    .whatsapp-fixed img {
        width: 30px;
        height: 30px;
        display: block;
    }

    .Ourwork {
        padding: 4rem 2rem;
        max-width: 1200px;
        margin: 0 auto 6rem auto;
    }

    .Our--work {
        display: flex;
        flex-direction: column;
        justify-content: space-around;
        align-items: left;
        margin: 5rem auto;
        max-width: 1200px;
    }

    .our-work-title {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc, #ffd700, #d4af37);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .projecttitl {
        text-align: center;
        margin-bottom: 3rem;
    }

    .projecttitl h1 {
        font-size: 3rem;
        color: #ffffff;
        text-transform: uppercase;
        position: relative;
        display: inline-block;
    }

    .projecttitl h1::after {
        content: "";
        position: absolute;
        width: 60%;
        height: 4px;
        background-color: #ffffff;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        border-radius: 5px;
    }

    .projects {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 2rem;
        max-width: 1200px;
        margin: 0 auto 4rem;
        padding: 0;
        list-style: none;
    }

    .project-card {
        background: #1c1c1e;
        border-radius: 15px;
        overflow: hidden;
        text-align: center;
        padding: 1.5rem 1rem;
        color: #fff;
        text-decoration: none;
        box-shadow: 0 4px 20px rgba(255, 255, 255, 0.15);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        height: 100%;
    }

    .project-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 10px 25px rgba(255, 255, 255, 0.3);
    }

    .image-wrapper {
        width: 100%;
        height: 200px;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        border-radius: 10px;
        margin-bottom: 1rem;
        background-color: #29292b;
    }

    .image-wrapper img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        transition: transform 0.4s ease;
    }

    .image-wrapper:hover img {
        transform: scale(1.08);
    }

    .project-card p {
        font-size: 1.2rem;
        font-weight: 600;
        margin-top: 0.5rem;
        color: #ffffff;
    }

    .contact-form {
        padding: 4rem 2rem;
        max-width: 600px;
        margin: 0 auto;
        color: #fff;
    }

    .form-container h2 {
        text-align: center;
        font-size: 2.5rem;
        margin-bottom: 2rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    form {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
    }

    input, textarea {
        padding: 1rem;
        border-radius: 8px;
        border: none;
        font-size: 1rem;
        background-color: #2a2a2a;
        color: #fff;
        width: 100%;
    }

    textarea {
        resize: vertical;
        min-height: 120px;
    }

    button {
        padding: 1rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        border: none;
        border-radius: 8px;
        color: #000;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.3s ease;
    }

    button:hover {
        background: linear-gradient(90deg, #ffcc00, #ffd700, #ffb300);
    }

    .footer-contact {
        background: #121212;
        padding: 3rem 2rem;
        text-align: center;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .footer-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1000px;
        margin: 0 auto;
        flex-wrap: wrap;
        gap: 2rem;
    }

    .footer-left p {
        margin: 0.5rem 0;
        font-size: 1.1rem;
        color: #dddddd;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .footer-left i {
        color: #ffd700;
    }

    .footer-right a {
        color: #ffffff;
        font-size: 1.8rem;
        margin: 0 10px;
        transition: transform 0.3s ease, color 0.3s ease;
    }

    .footer-right a:hover {
        color: #ffd700;
        transform: scale(1.2);
    }

    .lang-btn {
        background-color: transparent;
        border: 2px solid #ffd700;
        color: white;
        padding: 0.4rem 1rem;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        transition: background 0.3s ease;
    }

    .lang-btn:hover {
        background-color: #ffd700;
        color: black;
    }

    /* أنماط popup الإشعارات */
    .popup {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 1000;
        justify-content: center;
        align-items: center;
    }
    
    .popup-content {
        background-color: white;
        padding: 40px;
        border-radius: 15px;
        text-align: center;
        max-width: 500px;
        width: 90%;
        box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
        animation: popup-appear 0.5s ease-out;
        position: relative;
    }
    
    @keyframes popup-appear {
        0% { opacity: 0; transform: scale(0.8); }
        100% { opacity: 1; transform: scale(1); }
    }
    
    .popup-icon {
        font-size: 80px;
        margin-bottom: 20px;
        animation: bounce 2s infinite;
    }
    
    @keyframes bounce {
        0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
        40% { transform: translateY(-20px); }
        60% { transform: translateY(-10px); }
    }
    
    .popup-title {
        font-size: 28px;
        font-weight: bold;
        margin-bottom: 15px;
        color: #333;
    }
    
    .popup-message {
        font-size: 18px;
        color: #666;
        margin-bottom: 25px;
        line-height: 1.5;
    }
    
    .popup-btn {
        display: inline-block;
        background: #0077B6;
        color: white;
        padding: 12px 30px;
        border-radius: 30px;
        text-decoration: none;
        font-weight: bold;
        transition: all 0.3s ease;
        border: none;
        cursor: pointer;
        font-size: 16px;
        margin: 0 5px;
    }
    
    .popup-btn:hover {
        background: #005a8c;
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .popup-btn.secondary {
        background: #6c757d;
    }

    .popup-btn.secondary:hover {
        background: #545b62;
    }

    /* إشعار الاستشارة */
    .consultation-popup .popup-icon {
        color: #ffd700;
    }

    .consultation-popup .popup-title {
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .consultation-form {
        text-align: left;
        margin-top: 20px;
    }

    .consultation-form input,
    .consultation-form textarea {
        width: 100%;
        padding: 10px;
        margin-bottom: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 14px;
        color: #333;
        background: #fff;
    }

    .consultation-form textarea {
        height: 80px;
        resize: vertical;
    }

    /* إشعار الشكر */
    .thank-you-popup .popup-icon {
        color: #4CAF50;
    }

    /* أنماط صفحة الخدمة */
    .service-page {
        display: none;
        padding: 4rem 2rem;
        max-width: 1200px;
        margin: 0 auto;
        min-height: 100vh;
    }

    .service-page.active {
        display: block;
    }

    .service-header {
        text-align: center;
        margin-bottom: 3rem;
    }

    .service-header h1 {
        font-size: 3rem;
        color: #ffffff;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc, #ffd700, #d4af37);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 1rem;
    }

    .service-header p {
        font-size: 1.2rem;
        color: #dddddd;
        max-width: 600px;
        margin: 0 auto;
    }

    .service-gallery {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 2rem;
        margin-top: 2rem;
    }

    .service-item {
        background: #1c1c1e;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 4px 20px rgba(255, 255, 255, 0.15);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        cursor: pointer;
    }

    .service-item:hover {
        transform: translateY(-8px);
        box-shadow: 0 10px 25px rgba(255, 255, 255, 0.3);
    }

    .service-item-media {
        width: 100%;
        height: 250px;
        overflow: hidden;
        background-color: #29292b;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
    }

    .service-item-media img,
    .service-item-media video {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.4s ease;
    }

    .service-item:hover .service-item-media img,
    .service-item:hover .service-item-media video {
        transform: scale(1.05);
    }

    .service-item-content {
        padding: 1.5rem;
    }

    .service-item-title {
        font-size: 1.3rem;
        font-weight: 600;
        color: #ffffff;
        margin-bottom: 0.5rem;
    }

    .service-item-description {
        font-size: 0.9rem;
        color: #dddddd;
        line-height: 1.5;
    }

    .back-btn {
        display: inline-block;
        margin-bottom: 2rem;
        padding: 0.8rem 2rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        color: #000;
        text-decoration: none;
        border-radius: 25px;
        font-weight: bold;
        transition: all 0.3s ease;
    }

    .back-btn:hover {
        background: linear-gradient(90deg, #ffcc00, #ffd700, #ffb300);
        transform: translateY(-2px);
    }

    /* تفاصيل المشروع */
    .project-details {
        display: none;
        padding: 4rem 2rem;
        max-width: 1000px;
        margin: 0 auto;
        min-height: 100vh;
    }

    .project-details.active {
        display: block;
    }

    .project-gallery {
        position: relative;
        margin-bottom: 2rem;
    }

    .gallery-container {
        width: 100%;
        height: 400px;
        background: #29292b;
        border-radius: 15px;
        overflow: hidden;
        position: relative;
    }

    .gallery-item {
        width: 100%;
        height: 100%;
        display: none;
        align-items: center;
        justify-content: center;
    }

    .gallery-item.active {
        display: flex;
    }

    .gallery-item img,
    .gallery-item video {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
    }

    .gallery-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(0,0,0,0.5);
        color: white;
        border: none;
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: background 0.3s ease;
        font-size: 20px;
    }

    .gallery-nav:hover {
        background: rgba(0,0,0,0.8);
    }

    .gallery-prev {
        left: 10px;
    }

    .gallery-next {
        right: 10px;
    }

    .gallery-indicators {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-top: 15px;
    }

    .gallery-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #666;
        cursor: pointer;
        transition: background 0.3s ease;
    }

    .gallery-dot.active {
        background: #ffd700;
    }

    .project-info {
        background: #1c1c1e;
        padding: 2rem;
        border-radius: 15px;
        margin-bottom: 2rem;
    }

    .project-info h2 {
        font-size: 2rem;
        color: #ffd700;
        margin-bottom: 1rem;
    }

    .project-info p {
        color: #dddddd;
        line-height: 1.6;
        margin-bottom: 1rem;
    }

    .project-actions {
        display: flex;
        gap: 1rem;
        margin-top: 2rem;
    }

    .action-btn {
        padding: 0.8rem 2rem;
        border-radius: 25px;
        text-decoration: none;
        font-weight: bold;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
    }

    .action-btn.primary {
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        color: #000;
    }

    .action-btn.primary:hover {
        background: linear-gradient(90deg, #ffcc00, #ffd700, #ffb300);
        transform: translateY(-2px);
    }

    .action-btn.secondary {
        background: #25d366;
        color: white;
    }

    .action-btn.secondary:hover {
        background: #1fa851;
        transform: translateY(-2px);
    }

    /* أنماط الداش بورد */
    .dashboard-container {
        display: none;
        min-height: 100vh;
        background: linear-gradient(270deg, #000000, #1c1c1c, #2a2a2a, #1c1c1c, #000000);
        background-size: 1000% 1000%;
        animation: gradientShift 15s ease infinite;
    }

    .dashboard-container.active {
        display: block;
    }

    .dashboard-header {
        background: #1c1c1e;
        padding: 1rem 2rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
    }

    .dashboard-header h1 {
        color: #ffffff;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .dashboard-nav {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
    }

    .dashboard-nav button {
        background: transparent;
        border: 2px solid #ffd700;
        color: #ffd700;
        padding: 0.5rem 1rem;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s ease;
        white-space: nowrap;
    }

    .dashboard-nav button:hover,
    .dashboard-nav button.active {
        background: #ffd700;
        color: #000;
    }

    .dashboard-content {
        padding: 2rem;
    }

    .dashboard-section {
        display: none;
    }

    .dashboard-section.active {
        display: block;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .stat-card {
        background: #1c1c1e;
        padding: 1.5rem;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 15px rgba(255, 255, 255, 0.1);
    }

    .stat-card h3 {
        font-size: 2rem;
        color: #ffd700;
        margin-bottom: 0.5rem;
    }

    .stat-card p {
        color: #dddddd;
    }

    .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-bottom: 2rem;
    }

    .form-section {
        background: #1c1c1e;
        padding: 2rem;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(255, 255, 255, 0.1);
    }

    .form-section h3 {
        color: #ffd700;
        margin-bottom: 1rem;
    }

    .admin-form {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .admin-form input,
    .admin-form textarea,
    .admin-form select {
        padding: 0.8rem;
        border-radius: 5px;
        border: 1px solid #444;
        background-color: #2a2a2a;
        color: #fff;
    }

    .admin-form button {
        padding: 0.8rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        border: none;
        border-radius: 5px;
        color: #000;
        font-weight: bold;
        cursor: pointer;
    }

    .list-container {
        background: #1c1c1e;
        padding: 2rem;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(255, 255, 255, 0.1);
        margin-top: 2rem;
    }

    .list-item {
        background: #2a2a2a;
        padding: 1rem;
        border-radius: 5px;
        margin-bottom: 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
    }

    .list-item-actions {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
    }

    .list-item-actions button {
        padding: 0.3rem 0.8rem;
        border: none;
        border-radius: 3px;
        cursor: pointer;
        font-size: 0.8rem;
    }

    .edit-btn {
        background: #ffd700;
        color: #000;
    }

    .delete-btn {
        background: #ff4444;
        color: #fff;
    }

    .view-btn {
        background: #0077B6;
        color: #fff;
    }

    .login-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        background: linear-gradient(270deg, #000000, #1c1c1c, #2a2a2a, #1c1c1c, #000000);
        background-size: 1000% 1000%;
        animation: gradientShift 15s ease infinite;
    }

    .login-form {
        background: #1c1c1e;
        padding: 3rem;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        width: 100%;
        max-width: 400px;
    }

    .login-form h2 {
        text-align: center;
        color: #ffd700;
        margin-bottom: 2rem;
        font-size: 2rem;
    }

    .login-form input {
        width: 100%;
        padding: 1rem;
        margin-bottom: 1rem;
        border: 1px solid #444;
        border-radius: 5px;
        background: #2a2a2a;
        color: #fff;
    }

    .login-form button {
        width: 100%;
        padding: 1rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        border: none;
        border-radius: 5px;
        color: #000;
        font-weight: bold;
        cursor: pointer;
        font-size: 1rem;
    }

    .file-input {
        margin-bottom: 1rem;
    }

    .file-input input[type="file"] {
        width: 100%;
        padding: 0.5rem;
        border: 1px solid #444;
        border-radius: 5px;
        background: #2a2a2a;
        color: #fff;
    }

    .chart-container {
        background: #1c1c1e;
        padding: 2rem;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(255, 255, 255, 0.1);
        margin-bottom: 2rem;
    }

    .chart-container h3 {
        color: #ffd700;
        margin-bottom: 1rem;
        text-align: center;
    }

    .chart-wrapper {
        height: 400px;
        position: relative;
    }

    /* وسائط استعلام للشاشات المختلفة */
    @media (max-width: 767px) {
        .container {
            max-width: 100%;
            padding: 0 15px;
        }
        
        header {
            flex-direction: column;
            gap: 1rem;
            margin: 1rem auto;
            padding: 0 0.5rem;
        }
        
        .navigation ul {
            gap: 1rem;
            justify-content: center;
        }
        
        .hero {
            flex-direction: column;
            text-align: center;
            margin: 2rem auto;
            padding: 1rem;
        }
        
        .herosup {
            align-items: center;
        }
        
        .plan1 {
            font-size: 2rem;
        }
        
        .Don {
            font-size: 1.2rem;
        }
        
        .plan {
            max-width: 100%;
            margin-top: 2rem;
        }
        
        .about {
            padding: 2rem 1rem;
        }
        
        .about-container {
            flex-direction: column;
            gap: 2rem;
        }
        
        .about-text, .about-image {
            min-width: 100%;
        }
        
        .our-work-title {
            font-size: 2rem;
            text-align: center;
        }
        
        .Our--work {
            align-items: center;
            padding: 1rem;
            margin: 2rem auto;
        }
        
        .projecttitl h1 {
            font-size: 2.2rem;
        }
        
        .projects {
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
        
        .project-card {
            max-width: 100%;
        }
        
        .contact-form {
            padding: 2rem 1rem;
        }
        
        input, textarea {
            padding: 0.8rem;
        }
        
        .footer-content {
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .footer-left p {
            justify-content: center;
        }

        .dashboard-header {
            flex-direction: column;
            gap: 1rem;
        }

        .dashboard-nav {
            flex-wrap: wrap;
            justify-content: center;
        }

        .form-grid {
            grid-template-columns: 1fr;
        }

        .stats-grid {
            grid-template-columns: 1fr;
        }

        .project-actions {
            flex-direction: column;
        }

        .service-gallery {
            grid-template-columns: 1fr;
        }

        .gallery-container {
            height: 300px;
        }
    }

    .hidden-dashboard-link {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 50px;
        height: 50px;
        opacity: 0;
        cursor: pointer;
        z-index: 1;
    }
  </style>
</head>
<body>
  <!-- الموقع الرئيسي -->
  <div id="mainSite">
    <header>
      <img class="cmalogoh" src="SVG/asdgfArtboard 1.svg" alt="cma logo" />
      <nav class="navigation">
        <ul>
          <li><a href="#about" data-en="About" data-ar="من نحن">About</a></li>
          <li><a href="#Our-work" data-en="Our work" data-ar="أعمالنا">Our work</a></li>
          <li><a href="#contactMe" data-en="Contact" data-ar="تواصل معنا">Contact</a></li>
        </ul>
      </nav>
      <button id="langToggle" class="lang-btn">AR</button>
    </header>

    <hr />

    <section class="hero">
      <div class="herosup">
        <h1 class="plan1" data-en="The plane will take off" data-ar="الرحلة ستبدأ الآن">The plane will take off</h1>
        <h1 class="Don" data-en="Don't miss the opportunity and make your business take off" data-ar="لا تفوت الفرصة وخلّي عملك يقلع">Don't miss the opportunity and make your business take off</h1>
        <div class="heroptns">
          <a class="Contactus" href="https://wa.me/201004435408" target="_blank" data-en="Contact us" data-ar="تواصل معنا">Contact us</a>
        </div>
      </div>
      <img class="plan" src="sss/cmaaa.svg" alt="logocma2" />
    </section>

    <section class="about" id="about">
      <div class="about-container">
        <div class="about-image">
          <img src="sss/people-taking-part-business-event (1).svg" alt="About CMA" width="600" height="400">
        </div>
        <div class="about-text">
          <h2 data-en="About CMA" data-ar="من نحن">About CMA</h2>
          <p data-en="At CMA, we think differently. We believe in bold ideas that turn into real results for brands and content creators."
             data-ar="في CMA نفكر بشكل مختلف. نؤمن بالأفكار الجريئة التي تتحول إلى نتائج حقيقية للعلامات التجارية وصناع المحتوى.">
             At CMA, we think differently. We believe in bold ideas that turn into real results for brands and content creators.
          </p>
          <p data-en="We're a full-service marketing agency focused on building strong digital presence and delivering the professional image every brand deserves."
             data-ar="نحن وكالة تسويق متكاملة تركز على بناء حضور رقمي قوي وتقديم الصورة الاحترافية التي تستحقها كل علامة تجارية.">
             We're a full-service marketing agency focused on building strong digital presence and delivering the professional image every brand deserves.
          </p>
          <p data-en="Each project gets a dedicated team to ensure creativity, strategy, and impact—all in one."
             data-ar="كل مشروع يحصل على فريق مخصص لضمان الإبداع والاستراتيجية والتأثير في آن واحد.">
             Each project gets a dedicated team to ensure creativity, strategy, and impact—all in one.
          </p>
          <p data-en="We manage every account with full focus and professionalism as if it's our only one."
             data-ar="ندير كل حساب بتركيز واحترافية وكأنه الوحيد لدينا.">
             We manage every account with full focus and professionalism as if it's our only one.
          </p>
        </div>
      </div>
    </section>

    <section class="Ourwork" id="Our-work">
      <div class="Our--work">
        <div class="projecttitl">
          <h1 class="our-work-title" data-en="Our work" data-ar="أعمالنا">Our work</h1>
        </div>

        <ul class="projects" id="servicesGrid">
          <!-- سيتم إضافة الخدمات هنا من خلال JavaScript -->
        </ul>
      </div>
    </section>

    <section class="contact-form" id="contactMe">
      <div class="form-container">
        <h2 data-en="Contact Us" data-ar="تواصل معنا">Contact Us</h2>
        <form id="contactForm" action="https://formsubmit.co/cmamarketing36@gmail.com" method="POST">
          <input type="text" name="_honey" style="display:none">
          <input type="hidden" name="_captcha" value="false">
          <input type="hidden" name="_subject" value="New form submission from CMA Website">
          
          <input type="text" name="name" placeholder="Your Name" required data-en="Your Name" data-ar="اسمك" />
          <input type="tel" name="phone" placeholder="Phone Number" required data-en="Phone Number" data-ar="رقم الهاتف" />
          <input type="email" name="email" placeholder="Email Address" required data-en="Email Address" data-ar="البريد الإلكتروني" />
          <textarea name="message" placeholder="Your Message" required data-en="Your Message" data-ar="رسالتك"></textarea>
          <button type="submit" data-en="Send Message" data-ar="إرسال">Send Message</button>
        </form>
      </div>
    </section>

    <section class="footer-contact">
      <div class="footer-content">
        <div class="footer-left">
          <p><i class="fas fa-envelope"></i> cmamarketing36@gmail.com</p>
          <p><i class="fas fa-phone-alt"></i> +20 109 479 5739</p>
          <p><i class="fas fa-phone-alt"></i> +20 100 443 5408</p>
        </div>

        <div class="footer-right">
          <a href="https://www.facebook.com/cmamarketing36" target="_blank" aria-label="Facebook">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="https://www.instagram.com/cma_egypt/" target="_blank" aria-label="Instagram">
            <i class="fab fa-instagram"></i>
          </a>
        </div>
      </div>
      <div class="hidden-dashboard-link" onclick="showLogin()"></div>
    </section>

    <a href="https://wa.me/201004435408"
       class="whatsapp-fixed"
       target="_blank"
       title="Chat with us on WhatsApp">
       <img src="https://img.icons8.com/ios-filled/50/ffffff/whatsapp--v1.png" alt="WhatsApp" />
    </a>
  </div>

  <!-- صفحات الخدمات -->
  <div id="photographyPage" class="service-page">
    <a href="#" class="back-btn" onclick="backToHome()">
      <i class="fas fa-arrow-left"></i> <span data-en="Back to Home" data-ar="العودة للرئيسية">العودة للرئيسية</span>
    </a>
    <div class="service-header">
      <h1 data-en="Photography Services" data-ar="خدمات التصوير">خدمات التصوير</h1>
      <p data-en="Professional photography services for all your needs" data-ar="خدمات تصوير احترافية لجميع احتياجاتك">خدمات تصوير احترافية لجميع احتياجاتك</p>
    </div>
    <div class="service-gallery" id="photographyGallery">
      <!-- سيتم إضافة الأعمال هنا من خلال JavaScript -->
    </div>
  </div>

  <div id="videoEditingPage" class="service-page">
    <a href="#" class="back-btn" onclick="backToHome()">
      <i class="fas fa-arrow-left"></i> <span data-en="Back to Home" data-ar="العودة للرئيسية">العودة للرئيسية</span>
    </a>
    <div class="service-header">
      <h1 data-en="Video Editing Services" data-ar="خدمات مونتاج الفيديو">خدمات مونتاج الفيديو</h1>
      <p data-en="Professional video editing and motion graphics" data-ar="مونتاج فيديو احترافي وجرافيك متحرك">مونتاج فيديو احترافي وجرافيك متحرك</p>
    </div>
    <div class="service-gallery" id="videoEditingGallery">
      <!-- سيتم إضافة الأعمال هنا من خلال JavaScript -->
    </div>
  </div>

  <div id="graphicDesignPage" class="service-page">
    <a href="#" class="back-btn" onclick="backToHome()">
      <i class="fas fa-arrow-left"></i> <span data-en="Back to Home" data-ar="العودة للرئيسية">العودة للرئيسية</span>
    </a>
    <div class="service-header">
      <h1 data-en="Graphic Design Services" data-ar="خدمات تصميم الجرافيك">خدمات تصميم الجرافيك</h1>
      <p data-en="Creative graphic design solutions for your business" data-ar="حلول تصميم جرافيك إبداعية لعملك">حلول تصميم جرافيك إبداعية لعملك</p>
    </div>
    <div class="service-gallery" id="graphicDesignGallery">
      <!-- سيتم إضافة الأعمال هنا من خلال JavaScript -->
    </div>
  </div>

  <!-- تفاصيل المشروع -->
  <div id="projectDetails" class="project-details">
    <a href="#" class="back-btn" onclick="backToService()">
      <i class="fas fa-arrow-left"></i> <span data-en="Back to Service" data-ar="العودة للخدمة">العودة للخدمة</span>
    </a>
    
    <div class="project-gallery">
      <div class="gallery-container" id="galleryContainer">
        <!-- سيتم إضافة الصور هنا -->
      </div>
      <button class="gallery-nav gallery-prev" onclick="previousImage()">
        <i class="fas fa-chevron-left"></i>
      </button>
      <button class="gallery-nav gallery-next" onclick="nextImage()">
        <i class="fas fa-chevron-right"></i>
      </button>
      <div class="gallery-indicators" id="galleryIndicators">
        <!-- سيتم إضافة المؤشرات هنا -->
      </div>
    </div>

    <div class="project-info" id="projectInfo">
      <!-- سيتم إضافة تفاصيل المشروع هنا -->
    </div>

    <div class="project-actions">
      <a href="tel:+201094795739" class="action-btn primary">
        <i class="fas fa-phone"></i> <span data-en="Call Now" data-ar="اتصل الآن">اتصل الآن</span>
      </a>
      <a href="https://wa.me/201004435408" class="action-btn secondary" target="_blank">
        <i class="fab fa-whatsapp"></i> <span data-en="WhatsApp" data-ar="واتساب">واتساب</span>
      </a>
    </div>
  </div>

  <!-- نافذة تسجيل الدخول -->
  <div id="loginContainer" class="login-container" style="display: none;">
    <div class="login-form">
      <h2>تسجيل الدخول</h2>
      <input type="text" id="username" placeholder="اسم المستخدم" required>
      <input type="password" id="password" placeholder="كلمة المرور" required>
      <button onclick="login()">دخول</button>
      <p style="text-align: center; margin-top: 1rem;">
        <a href="#" onclick="backToHome()" style="color: #ffd700; text-decoration: none;">العودة للموقع</a>
      </p>
    </div>
  </div>

  <!-- الداش بورد -->
  <div id="dashboardContainer" class="dashboard-container">
    <div class="dashboard-header">
      <h1>لوحة التحكم - CMA</h1>
      <div class="dashboard-nav">
        <button onclick="showDashboardSection('overview')" class="active">نظرة عامة</button>
        <button onclick="showDashboardSection('services')">إدارة الخدمات</button>
        <button onclick="showDashboardSection('works')">إدارة الأعمال</button>
        <button onclick="showDashboardSection('messages')">الرسائل</button>
        <button onclick="showDashboardSection('consultations')">طلبات الاستشارة</button>
        <button onclick="showDashboardSection('analytics')">تحليلات الزوار</button>
        <button onclick="showDashboardSection('settings')">الإعدادات</button>
        <button onclick="logout()">تسجيل الخروج</button>
      </div>
    </div>

    <div class="dashboard-content">
      <!-- نظرة عامة -->
      <div id="overviewSection" class="dashboard-section active">
        <div class="stats-grid">
          <div class="stat-card">
            <h3 id="totalServices">0</h3>
            <p>إجمالي الخدمات</p>
          </div>
          <div class="stat-card">
            <h3 id="totalWorks">0</h3>
            <p>إجمالي الأعمال</p>
          </div>
          <div class="stat-card">
            <h3 id="totalMessages">0</h3>
            <p>الرسائل الجديدة</p>
          </div>
          <div class="stat-card">
            <h3 id="totalConsultations">0</h3>
            <p>طلبات الاستشارة</p>
          </div>
          <div class="stat-card">
            <h3 id="totalVisitors">0</h3>
            <p>إجمالي الزوار</p>
          </div>
          <div class="stat-card">
            <h3 id="todayVisitors">0</h3>
            <p>زوار اليوم</p>
          </div>
        </div>

        <div class="chart-container">
          <h3>إحصائيات الأعمال</h3>
          <div class="chart-wrapper">
            <canvas id="worksChart" style="height: 400px;"></canvas>
          </div>
        </div>
      </div>

      <!-- إدارة الخدمات -->
      <div id="servicesSection" class="dashboard-section">
        <div class="form-section">
          <h3>إضافة خدمة جديدة</h3>
          <form class="admin-form" id="addServiceForm">
            <input type="text" id="serviceName" placeholder="اسم الخدمة بالعربية" required>
            <input type="text" id="serviceNameEn" placeholder="اسم الخدمة بالإنجليزية" required>
            <textarea id="serviceDescription" placeholder="وصف الخدمة بالعربية" required></textarea>
            <textarea id="serviceDescriptionEn" placeholder="وصف الخدمة بالإنجليزية" required></textarea>
            <div class="file-input">
              <label>صورة الخدمة:</label>
              <input type="file" id="serviceImage" accept="image/*" required>
            </div>
            <button type="submit">إضافة الخدمة</button>
          </form>
        </div>

        <div class="list-container">
          <h3>الخدمات الحالية</h3>
          <div id="servicesList">
            <!-- سيتم إضافة الخدمات هنا -->
          </div>
        </div>
      </div>

      <!-- إدارة الأعمال -->
      <div id="worksSection" class="dashboard-section">
        <div class="form-section">
          <h3>إضافة عمل جديد</h3>
          <form class="admin-form" id="addWorkForm">
            <select id="workService" required>
              <option value="">اختر الخدمة</option>
            </select>
            <input type="text" id="workTitle" placeholder="عنوان العمل بالعربية" required>
            <input type="text" id="workTitleEn" placeholder="عنوان العمل بالإنجليزية" required>
            <textarea id="workDescription" placeholder="وصف العمل بالعربية" required></textarea>
            <textarea id="workDescriptionEn" placeholder="وصف العمل بالإنجليزية" required></textarea>
            <input type="text" id="workClient" placeholder="اسم العميل (اختياري)">
            <select id="workType" required>
              <option value="">نوع المحتوى</option>
              <option value="images">صور متعددة</option>
              <option value="video">فيديو محلي</option>
              <option value="video-link">رابط فيديو (يوتيوب/إنستجرام)</option>
            </select>
            <div class="file-input" id="imagesInput" style="display: none;">
              <label>اختر صور متعددة:</label>
              <input type="file" id="workImages" accept="image/*" multiple>
            </div>
            <div class="file-input" id="videoInput" style="display: none;">
              <label>اختر فيديو:</label>
              <input type="file" id="workVideo" accept="video/*">
            </div>
            <div id="videoLinkInput" style="display: none;">
              <input type="url" id="workVideoLink" placeholder="رابط الفيديو (YouTube, Instagram, TikTok)">
            </div>
            <button type="submit">إضافة العمل</button>
          </form>
        </div>

        <div class="list-container">
          <h3>الأعمال الحالية</h3>
          <div id="worksList">
            <!-- سيتم إضافة الأعمال هنا -->
          </div>
        </div>
      </div>

      <!-- الرسائل -->
      <div id="messagesSection" class="dashboard-section">
        <div class="list-container">
          <h3>رسائل العملاء</h3>
          <div id="messagesList">
            <!-- سيتم إضافة الرسائل هنا -->
          </div>
        </div>
      </div>

      <!-- طلبات الاستشارة -->
      <div id="consultationsSection" class="dashboard-section">
        <div class="list-container">
          <h3>طلبات الاستشارة التسويقية</h3>
          <div id="consultationsList">
            <!-- سيتم إضافة طلبات الاستشارة هنا -->
          </div>
        </div>
      </div>

      <!-- تحليلات الزوار -->
      <div id="analyticsSection" class="dashboard-section">
        <div class="stats-grid">
          <div class="stat-card">
            <h3 id="analyticsVisitors">0</h3>
            <p>إجمالي الزوار</p>
          </div>
          <div class="stat-card">
            <h3 id="analyticsPageViews">0</h3>
            <p>مشاهدات الصفحات</p>
          </div>
          <div class="stat-card">
            <h3 id="analyticsAvgTime">0s</h3>
            <p>متوسط وقت الجلسة</p>
          </div>
          <div class="stat-card">
            <h3 id="analyticsBounceRate">0%</h3>
            <p>معدل الارتداد</p>
          </div>
        </div>

        <div class="chart-container">
          <h3>زوار آخر 7 أيام</h3>
          <div class="chart-wrapper">
            <canvas id="visitorsChart" style="height: 400px;"></canvas>
          </div>
        </div>

        <div class="list-container">
          <h3>تفاصيل الزوار</h3>
          <div id="visitorsDetails">
            <!-- سيتم إضافة تفاصيل الزوار هنا -->
          </div>
        </div>
      </div>

      <!-- الإعدادات -->
      <div id="settingsSection" class="dashboard-section">
        <div class="form-section">
          <h3>تغيير كلمة المرور</h3>
          <form class="admin-form" id="changePasswordForm">
            <input type="password" id="currentPassword" placeholder="كلمة المرور الحالية" required>
            <input type="password" id="newPassword" placeholder="كلمة المرور الجديدة" required>
            <input type="password" id="confirmPassword" placeholder="تأكيد كلمة المرور الجديدة" required>
            <button type="submit">تغيير كلمة المرور</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- إشعار الشكر -->
  <div class="popup thank-you-popup" id="thankYouPopup">
    <div class="popup-content">
      <i class="fas fa-check-circle popup-icon"></i>
      <h2 class="popup-title" data-en="Thank You!" data-ar="شكراً لك!">شكراً لك!</h2>
      <p class="popup-message" data-en="Your message has been sent successfully. We'll contact you soon." data-ar="تم إرسال رسالتك بنجاح. سنتواصل معك قريباً.">تم إرسال رسالتك بنجاح. سنتواصل معك قريباً.</p>
      <button class="popup-btn" id="closeThankYou" data-en="Close" data-ar="إغلاق">إغلاق</button>
    </div>
  </div>

  <!-- إشعار الاستشارة -->
  <div class="popup consultation-popup" id="consultationPopup">
    <div class="popup-content">
      <i class="fas fa-star popup-icon"></i>
      <h2 class="popup-title" data-en="Get Free Marketing Consultation!" data-ar="احصل على استشارة تسويقية مجانية!">احصل على استشارة تسويقية مجانية!</h2>
      <p class="popup-message" data-en="Don't miss the opportunity to boost your business with our expert marketing advice." data-ar="لا تفوت الفرصة لتطوير عملك مع نصائحنا التسويقية المتخصصة.">لا تفوت الفرصة لتطوير عملك مع نصائحنا التسويقية المتخصصة.</p>
      
      <form class="consultation-form" id="consultationForm">
        <input type="text" name="name" placeholder="الاسم" data-en="Name" data-ar="الاسم" required>
        <input type="tel" name="phone" placeholder="رقم الهاتف" data-en="Phone" data-ar="رقم الهاتف" required>
        <input type="email" name="email" placeholder="البريد الإلكتروني" data-en="Email" data-ar="البريد الإلكتروني" required>
        <textarea name="business" placeholder="نوع العمل أو المشروع" data-en="Business Type" data-ar="نوع العمل أو المشروع" required></textarea>
        
        <div style="display: flex; gap: 10px; margin-top: 15px;">
          <button type="submit" class="popup-btn" data-en="Get Consultation" data-ar="احصل على الاستشارة">احصل على الاستشارة</button>
          <button type="button" class="popup-btn secondary" onclick="closeConsultationPopup()" data-en="Maybe Later" data-ar="ربما لاحقاً">ربما لاحقاً</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // متغيرات عامة
    let currentLanguage = 'en';
    let isLoggedIn = false;
    let currentUser = null;
    let worksChart = null;
    let visitorsChart = null;
    let currentProject = null;
    let currentGalleryIndex = 0;
    let currentService = null;
    let consultationPopupShown = false;

    // بيانات افتراضية للنظام
    const defaultData = {
      services: [
        {
          id: 'photography',
          name: 'التصوير',
          nameEn: 'Photography',
          description: 'خدمات تصوير احترافية لجميع احتياجاتك',
          descriptionEn: 'Professional photography services for all your needs',
          image: 'sss/Content Management IM.svg'
        },
        {
          id: 'video-editing',
          name: 'مونتاج الفيديو',
          nameEn: 'Video Editing',
          description: 'مونتاج فيديو احترافي وجرافيك متحرك',
          descriptionEn: 'Professional video editing and motion graphics',
          image: 'sss/social-media-concept-with-smartphone.svg'
        },
        {
          id: 'graphic-design',
          name: 'تصميم الجرافيك',
          nameEn: 'Graphic Design',
          description: 'حلول تصميم جرافيك إبداعية لعملك',
          descriptionEn: 'Creative graphic design solutions for your business',
          image: 'sss/تعديل فيديو.svg'
        }
      ],
      works: [
        {
          id: 1,
          service: 'photography',
          title: 'تصوير منتجات تجارية',
          titleEn: 'Commercial Product Photography',
          description: 'جلسة تصوير احترافية لمنتجات تجارية متنوعة مع إضاءة مثالية وخلفيات مميزة',
          descriptionEn: 'Professional commercial product photography session with perfect lighting and distinctive backgrounds',
          client: 'شركة النور للمنتجات',
          type: 'images',
          media: [
            'sss/تصوير.svg',
            'sss/Content Management IM.svg'
          ]
        },
        {
          id: 2,
          service: 'photography',
          title: 'تصوير حفل زفاف',
          titleEn: 'Wedding Photography',
          description: 'تصوير لحظات خاصة وذكريات لا تنسى في يوم الزفاف',
          descriptionEn: 'Capturing special moments and unforgettable memories on the wedding day',
          client: 'أحمد ومريم',
          type: 'images',
          media: [
            'sss/people-taking-part-business-event (1).svg'
          ]
        },
        {
          id: 3,
          service: 'video-editing',
          title: 'مونتاج إعلان تجاري',
          titleEn: 'Commercial Video Edit',
          description: 'مونتاج إعلان تجاري احترافي لشركة تقنية ناشئة',
          descriptionEn: 'Professional commercial video editing for a tech startup',
          client: 'تك سوليوشنز',
          type: 'video-link',
          media: ['https://www.youtube.com/embed/dQw4w9WgXcQ']
        },
        {
          id: 4,
          service: 'video-editing',
          title: 'مونتاج محتوى سوشيال ميديا',
          titleEn: 'Social Media Content Edit',
          description: 'مجموعة من مقاطع الفيديو القصيرة للسوشيال ميديا',
          descriptionEn: 'Collection of short videos for social media platforms',
          client: 'كافيه المدينة',
          type: 'video-link',
          media: ['https://www.youtube.com/embed/dQw4w9WgXcQ']
        },
        {
          id: 5,
          service: 'graphic-design',
          title: 'تصميم هوية بصرية',
          titleEn: 'Brand Identity Design',
          description: 'تصميم هوية بصرية متكاملة تشمل الشعار والألوان والخطوط',
          descriptionEn: 'Complete brand identity design including logo, colors, and fonts',
          client: 'مطعم الأصالة',
          type: 'images',
          media: [
            'sss/تعديل فيديو.svg',
            'sss/social-media-concept-with-smartphone.svg'
          ]
        },
        {
          id: 6,
          service: 'graphic-design',
          title: 'تصميم مطبوعات إعلانية',
          titleEn: 'Advertising Print Design',
          description: 'مجموعة من التصميمات المطبوعة للحملات الإعلانية',
          descriptionEn: 'Collection of print designs for advertising campaigns',
          client: 'مركز التدريب المهني',
          type: 'images',
          media: [
            'sss/Content Management IM.svg'
          ]
        }
      ],
      messages: [],
      consultations: [],
      visitors: [],
      analytics: {
        totalVisitors: 0,
        todayVisitors: 0,
        pageViews: 0,
        avgSessionTime: 0,
        bounceRate: 0,
        dailyVisitors: []
      },
      users: [{
        username: 'admin',
        password: 'cma2024'
      }]
    };

    // تهيئة النظام
    function initializeSystem() {
      // تحميل البيانات من localStorage أو استخدام البيانات الافتراضية
      if (!localStorage.getItem('cmaData')) {
        localStorage.setItem('cmaData', JSON.stringify(defaultData));
      }
      
      loadServices();
      updateStats();
      trackVisitor();
      
      // عرض إشعار الاستشارة بعد 45 ثانية
      setTimeout(() => {
        if (!consultationPopupShown && !isLoggedIn && !isDashboardVisible()) {
          showConsultationPopup();
        }
      }, 45000);

      // التحقق من الرابط للداش بورد
      if (window.location.hash === '#XCMA') {
        showLogin();
      }
    }

    // تتبع الزائر
    function trackVisitor() {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const now = new Date();
      const today = now.toDateString();
      
      // إضافة زائر جديد
      const visitor = {
        id: Date.now(),
        timestamp: now.toISOString(),
        date: today,
        userAgent: navigator.userAgent,
        language: navigator.language,
        referrer: document.referrer || 'direct'
      };
      
      data.visitors.push(visitor);
      
      // تحديث الإحصائيات
      data.analytics.totalVisitors = data.visitors.length;
      data.analytics.todayVisitors = data.visitors.filter(v => v.date === today).length;
      data.analytics.pageViews += 1;
      
      // تحديث زوار الأيام
      const last7Days = [];
      for (let i = 6; i >= 0; i--) {
        const date = new Date();
        date.setDate(date.getDate() - i);
        const dateStr = date.toDateString();
        const count = data.visitors.filter(v => v.date === dateStr).length;
        last7Days.push({ date: dateStr, count });
      }
      data.analytics.dailyVisitors = last7Days;
      
      localStorage.setItem('cmaData', JSON.stringify(data));
    }

    // التحقق من ظهور الداش بورد
    function isDashboardVisible() {
      return document.getElementById('dashboardContainer').classList.contains('active') ||
             document.getElementById('loginContainer').style.display !== 'none';
    }

    // عرض إشعار الاستشارة
    function showConsultationPopup() {
      if (!consultationPopupShown && !isDashboardVisible()) {
        document.getElementById('consultationPopup').style.display = 'flex';
        consultationPopupShown = true;
      }
    }

    // إغلاق إشعار الاستشارة
    function closeConsultationPopup() {
      document.getElementById('consultationPopup').style.display = 'none';
    }

    // تبديل اللغة
    document.getElementById('langToggle').addEventListener('click', function () {
      const isArabic = this.innerText === 'AR';
      const elements = document.querySelectorAll('[data-en]');
  
      elements.forEach(el => {
        const text = isArabic ? el.getAttribute('data-ar') : el.getAttribute('data-en');
        if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
          el.placeholder = text;
        } else {
          el.textContent = text;
        }
      });
  
      this.innerText = isArabic ? 'EN' : 'AR';
      document.documentElement.setAttribute("lang", isArabic ? "ar" : "en");
      document.body.style.direction = isArabic ? "rtl" : "ltr";
      currentLanguage = isArabic ? 'ar' : 'en';
      
      // تحديث المحتوى المعروض
      if (currentService) {
        loadServiceWorks(currentService);
      }
      if (currentProject) {
        showProjectDetails(currentProject);
      }
    });

    // معالجة إرسال نموذج التواصل
    document.getElementById('contactForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const form = this;
      const formData = new FormData(form);
      const submitButton = form.querySelector('button[type="submit"]');
      const originalButtonText = submitButton.textContent;
      
      // حفظ الرسالة محلياً
      const message = {
        id: Date.now(),
        name: formData.get('name'),
        phone: formData.get('phone'),
        email: formData.get('email'),
        message: formData.get('message'),
        date: new Date().toISOString(),
        read: false
      };
      
      const data = JSON.parse(localStorage.getItem('cmaData'));
      data.messages.push(message);
      localStorage.setItem('cmaData', JSON.stringify(data));
      
      // تغيير نص الزر أثناء الإرسال
      const loadingText = currentLanguage === 'ar' ? 'جارِ الإرسال...' : 'Sending...';
      submitButton.textContent = loadingText;
      submitButton.disabled = true;
      
      // إرسال بيانات النموذج
      fetch(form.action, {
        method: 'POST',
        body: formData,
        headers: {
          'Accept': 'application/json'
        }
      })
      .then(response => {
        document.getElementById('thankYouPopup').style.display = 'flex';
        form.reset();
        updateStats();
      })
      .catch(error => {
        document.getElementById('thankYouPopup').style.display = 'flex';
        form.reset();
        updateStats();
      })
      .finally(() => {
        submitButton.textContent = originalButtonText;
        submitButton.disabled = false;
      });
    });

    // معالجة إرسال نموذج الاستشارة
    document.getElementById('consultationForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const formData = new FormData(this);
      
      // حفظ طلب الاستشارة محلياً
      const consultation = {
        id: Date.now(),
        name: formData.get('name'),
        phone: formData.get('phone'),
        email: formData.get('email'),
        business: formData.get('business'),
        date: new Date().toISOString(),
        status: 'جديد'
      };
      
      const data = JSON.parse(localStorage.getItem('cmaData'));
      data.consultations.push(consultation);
      localStorage.setItem('cmaData', JSON.stringify(data));
      
      // إرسال إيميل للإدارة
      const emailData = new FormData();
      emailData.append('_subject', 'طلب استشارة تسويقية جديد - موقع CMA');
      emailData.append('name', consultation.name);
      emailData.append('phone', consultation.phone);
      emailData.append('email', consultation.email);
      emailData.append('business', consultation.business);
      emailData.append('_captcha', 'false');
      
      fetch('https://formsubmit.co/cmamarketing36@gmail.com', {
        method: 'POST',
        body: emailData
      }).catch(error => console.log('Email send error:', error));
      
      // عرض رسالة شكر
      alert(currentLanguage === 'ar' ? 
        'تم إرسال طلب الاستشارة بنجاح! سنتواصل معك قريباً.' : 
        'Consultation request sent successfully! We will contact you soon.');
      
      closeConsultationPopup();
      this.reset();
      updateStats();
    });

    // إغلاق النوافذ المنبثقة
    document.getElementById('closeThankYou').addEventListener('click', function() {
      document.getElementById('thankYouPopup').style.display = 'none';
    });

    document.getElementById('thankYouPopup').addEventListener('click', function(e) {
      if (e.target === this) {
        this.style.display = 'none';
      }
    });

    document.getElementById('consultationPopup').addEventListener('click', function(e) {
      if (e.target === this) {
        closeConsultationPopup();
      }
    });

    // عرض صفحة الخدمة
    function showService(serviceId) {
      const pages = document.querySelectorAll('.service-page');
      pages.forEach(page => page.classList.remove('active'));
      
      const projectDetails = document.getElementById('projectDetails');
      projectDetails.classList.remove('active');
      
      document.getElementById('mainSite').style.display = 'none';
      
      const pageMap = {
        'photography': 'photographyPage',
        'video-editing': 'videoEditingPage',
        'graphic-design': 'graphicDesignPage'
      };
      
      const pageId = pageMap[serviceId];
      if (pageId) {
        document.getElementById(pageId).classList.add('active');
        currentService = serviceId;
        loadServiceWorks(serviceId);
      }
    }

    // تحميل أعمال الخدمة
    function loadServiceWorks(serviceId) {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const works = data.works.filter(work => work.service === serviceId);
      
      const galleryMap = {
        'photography': 'photographyGallery',
        'video-editing': 'videoEditingGallery',
        'graphic-design': 'graphicDesignGallery'
      };
      
      const galleryId = galleryMap[serviceId];
      const gallery = document.getElementById(galleryId);
      
      if (!gallery) return;
      
      gallery.innerHTML = '';
      
      works.forEach(work => {
        const workElement = document.createElement('div');
        workElement.className = 'service-item';
        workElement.onclick = () => showProjectDetails(work);
        
        let mediaElement = '';
        if (work.type === 'images' && work.media && work.media.length > 0) {
          mediaElement = `<img src="${work.media[0]}" alt="${work.title}">`;
        } else if (work.type === 'video-link' && work.media && work.media.length > 0) {
          const videoId = extractVideoId(work.media[0]);
          if (videoId) {
            mediaElement = `<iframe src="${work.media[0]}" frameborder="0" allowfullscreen style="width:100%;height:100%;"></iframe>`;
          } else {
            mediaElement = `<div style="display:flex;align-items:center;justify-content:center;height:100%;color:#666;">
              <i class="fas fa-play-circle" style="font-size:60px;"></i>
            </div>`;
          }
        } else {
          mediaElement = `<div style="display:flex;align-items:center;justify-content:center;height:100%;color:#666;">
            <i class="fas fa-image" style="font-size:60px;"></i>
          </div>`;
        }
        
        workElement.innerHTML = `
          <div class="service-item-media">
            ${mediaElement}
          </div>
          <div class="service-item-content">
            <h3 class="service-item-title">${currentLanguage === 'ar' ? work.title : work.titleEn}</h3>
            <p class="service-item-description">${currentLanguage === 'ar' ? work.description : work.descriptionEn}</p>
            ${work.client ? `<p style="color: #ffd700; font-size: 0.8rem; margin-top: 0.5rem;">العميل: ${work.client}</p>` : ''}
          </div>
        `;
        
        gallery.appendChild(workElement);
      });
      
      if (works.length === 0) {
        gallery.innerHTML = `
          <div style="text-align: center; color: #666; padding: 2rem; grid-column: 1/-1;">
            <p>${currentLanguage === 'ar' ? 'لا توجد أعمال متاحة في هذه الخدمة حالياً' : 'No works available in this service currently'}</p>
          </div>
        `;
      }
    }

    // استخراج معرف الفيديو من الرابط
    function extractVideoId(url) {
      if (url.includes('youtube.com') || url.includes('youtu.be')) {
        const match = url.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);
        return match ? match[1] : null;
      }
      return null;
    }

    // عرض تفاصيل المشروع
    function showProjectDetails(work) {
      currentProject = work;
      currentGalleryIndex = 0;
      
      // إخفاء صفحات الخدمات
      const pages = document.querySelectorAll('.service-page');
      pages.forEach(page => page.classList.remove('active'));
      
      // إظهار صفحة تفاصيل المشروع
      const projectDetails = document.getElementById('projectDetails');
      projectDetails.classList.add('active');
      
      // تحديث معرض الصور
      updateGallery(work);
      
      // تحديث معلومات المشروع
      const projectInfo = document.getElementById('projectInfo');
      projectInfo.innerHTML = `
        <h2>${currentLanguage === 'ar' ? work.title : work.titleEn}</h2>
        <p><strong>${currentLanguage === 'ar' ? 'الوصف:' : 'Description:'}</strong> ${currentLanguage === 'ar' ? work.description : work.descriptionEn}</p>
        ${work.client ? `<p><strong>${currentLanguage === 'ar' ? 'العميل:' : 'Client:'}</strong> ${work.client}</p>` : ''}
        <p><strong>${currentLanguage === 'ar' ? 'نوع العمل:' : 'Work Type:'}</strong> ${getWorkTypeText(work.type)}</p>
        <p><strong>${currentLanguage === 'ar' ? 'الخدمة:' : 'Service:'}</strong> ${getServiceName(work.service)}</p>
      `;
    }

    // تحديث معرض الصور
    function updateGallery(work) {
      const galleryContainer = document.getElementById('galleryContainer');
      const galleryIndicators = document.getElementById('galleryIndicators');
      
      galleryContainer.innerHTML = '';
      galleryIndicators.innerHTML = '';
      
      if (!work.media || work.media.length === 0) {
        galleryContainer.innerHTML = `
          <div class="gallery-item active" style="display: flex;">
            <div style="display:flex;align-items:center;justify-content:center;width:100%;height:100%;color:#666;">
              <i class="fas fa-image" style="font-size:80px;"></i>
            </div>
          </div>
        `;
        return;
      }
      
      work.media.forEach((media, index) => {
        const galleryItem = document.createElement('div');
        galleryItem.className = `gallery-item ${index === 0 ? 'active' : ''}`;
        
        if (work.type === 'video-link') {
          galleryItem.innerHTML = `<iframe src="${media}" frameborder="0" allowfullscreen style="width:100%;height:100%;"></iframe>`;
        } else if (work.type === 'video') {
          galleryItem.innerHTML = `<video controls style="max-width:100%;max-height:100%;"><source src="${media}" type="video/mp4"></video>`;
        } else {
          galleryItem.innerHTML = `<img src="${media}" alt="${work.title}">`;
        }
        
        galleryContainer.appendChild(galleryItem);
        
        // إضافة مؤشر
        const dot = document.createElement('div');
        dot.className = `gallery-dot ${index === 0 ? 'active' : ''}`;
        dot.onclick = () => goToImage(index);
        galleryIndicators.appendChild(dot);
      });
      
      // إخفاء أزرار التنقل إذا كان هناك عنصر واحد فقط
      const navButtons = document.querySelectorAll('.gallery-nav');
      navButtons.forEach(btn => {
        btn.style.display = work.media.length > 1 ? 'flex' : 'none';
      });
    }

    // الانتقال للصورة التالية
    function nextImage() {
      if (!currentProject || !currentProject.media || currentProject.media.length <= 1) return;
      
      currentGalleryIndex = (currentGalleryIndex + 1) % currentProject.media.length;
      updateGalleryDisplay();
    }

    // الانتقال للصورة السابقة
    function previousImage() {
      if (!currentProject || !currentProject.media || currentProject.media.length <= 1) return;
      
      currentGalleryIndex = currentGalleryIndex === 0 
        ? currentProject.media.length - 1 
        : currentGalleryIndex - 1;
      updateGalleryDisplay();
    }

    // الانتقال لصورة محددة
    function goToImage(index) {
      currentGalleryIndex = index;
      updateGalleryDisplay();
    }

    // تحديث عرض المعرض
    function updateGalleryDisplay() {
      const galleryItems = document.querySelectorAll('.gallery-item');
      const galleryDots = document.querySelectorAll('.gallery-dot');
      
      galleryItems.forEach((item, index) => {
        item.classList.toggle('active', index === currentGalleryIndex);
      });
      
      galleryDots.forEach((dot, index) => {
        dot.classList.toggle('active', index === currentGalleryIndex);
      });
    }

    // الحصول على نص نوع العمل
    function getWorkTypeText(type) {
      const types = {
        'images': currentLanguage === 'ar' ? 'صور متعددة' : 'Multiple Images',
        'video': currentLanguage === 'ar' ? 'فيديو' : 'Video',
        'video-link': currentLanguage === 'ar' ? 'رابط فيديو' : 'Video Link'
      };
      return types[type] || type;
    }

    // الحصول على اسم الخدمة
    function getServiceName(serviceId) {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const service = data.services.find(s => s.id === serviceId);
      if (!service) return serviceId;
      return currentLanguage === 'ar' ? service.name : service.nameEn;
    }

    // العودة للخدمة
    function backToService() {
      document.getElementById('projectDetails').classList.remove('active');
      if (currentService) {
        showService(currentService);
      } else {
        backToHome();
      }
    }

    // العودة للصفحة الرئيسية
    function backToHome() {
      document.getElementById('mainSite').style.display = 'block';
      document.getElementById('loginContainer').style.display = 'none';
      document.getElementById('dashboardContainer').classList.remove('active');
      
      const pages = document.querySelectorAll('.service-page');
      pages.forEach(page => page.classList.remove('active'));
      
      const projectDetails = document.getElementById('projectDetails');
      projectDetails.classList.remove('active');
      
      currentService = null;
      currentProject = null;
      
      // إزالة الهاش من الرابط
      if (window.location.hash) {
        history.replaceState(null, null, ' ');
      }
    }

    // عرض تسجيل الدخول
    function showLogin() {
      document.getElementById('mainSite').style.display = 'none';
      document.getElementById('loginContainer').style.display = 'flex';
    }

    // تسجيل الدخول
    function login() {
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const user = data.users.find(u => u.username === username && u.password === password);
      
      if (user) {
        isLoggedIn = true;
        currentUser = user;
        document.getElementById('loginContainer').style.display = 'none';
        document.getElementById('dashboardContainer').classList.add('active');
        loadDashboard();
      } else {
        alert('اسم المستخدم أو كلمة المرور غير صحيحة');
      }
    }

    // تسجيل الخروج
    function logout() {
      isLoggedIn = false;
      currentUser = null;
      backToHome();
    }

    // تحميل الداش بورد
    function loadDashboard() {
      updateStats();
      loadServices();
      loadWorks();
      loadMessages();
      loadConsultations();
      loadAnalytics();
      createCharts();
    }

    // عرض قسم الداش بورد
    function showDashboardSection(section) {
      // إخفاء جميع الأقسام
      const sections = document.querySelectorAll('.dashboard-section');
      sections.forEach(s => s.classList.remove('active'));
      
      // إزالة الفئة النشطة من جميع الأزرار
      const buttons = document.querySelectorAll('.dashboard-nav button');
      buttons.forEach(btn => btn.classList.remove('active'));
      
      // عرض القسم المحدد
      document.getElementById(section + 'Section').classList.add('active');
      
      // تفعيل الزر المحدد
      event.target.classList.add('active');
    }

    // تحديث الإحصائيات
    function updateStats() {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      
      document.getElementById('totalServices').textContent = data.services.length;
      document.getElementById('totalWorks').textContent = data.works.length;
      document.getElementById('totalMessages').textContent = data.messages.filter(m => !m.read).length;
      document.getElementById('totalConsultations').textContent = data.consultations.length;
      document.getElementById('totalVisitors').textContent = data.analytics.totalVisitors;
      document.getElementById('todayVisitors').textContent = data.analytics.todayVisitors;
    }

    // تحميل الخدمات
    function loadServices() {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const servicesList = document.getElementById('servicesList');
      const servicesGrid = document.getElementById('servicesGrid');
      const workService = document.getElementById('workService');
      
      // تحديث قائمة الخدمات في الداش بورد
      if (servicesList) {
        servicesList.innerHTML = '';
        data.services.forEach(service => {
          const serviceElement = document.createElement('div');
          serviceElement.className = 'list-item';
          serviceElement.innerHTML = `
            <div>
              <strong>${service.name}</strong>
              <p style="color: #666; font-size: 0.9rem;">${service.description}</p>
            </div>
            <div class="list-item-actions">
              <button class="delete-btn" onclick="deleteService('${service.id}')">حذف</button>
            </div>
          `;
          servicesList.appendChild(serviceElement);
        });
      }
      
      // تحديث شبكة الخدمات في الصفحة الرئيسية
      if (servicesGrid) {
        servicesGrid.innerHTML = '';
        data.services.forEach(service => {
          const serviceElement = document.createElement('li');
          serviceElement.innerHTML = `
            <a href="#" class="project-card" onclick="showService('${service.id}')">
              <div class="image-wrapper">
                <img src="${service.image}" alt="${service.name}" />
              </div>
              <p data-en="${service.nameEn}" data-ar="${service.name}">${currentLanguage === 'ar' ? service.name : service.nameEn}</p>
            </a>
          `;
          servicesGrid.appendChild(serviceElement);
        });
      }
      
      // تحديث قائمة اختيار الخدمة في إضافة الأعمال
      if (workService) {
        workService.innerHTML = '<option value="">اختر الخدمة</option>';
        data.services.forEach(service => {
          const option = document.createElement('option');
          option.value = service.id;
          option.textContent = service.name;
          workService.appendChild(option);
        });
      }
    }

    // تحميل الأعمال
    function loadWorks() {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const worksList = document.getElementById('worksList');
      
      if (worksList) {
        worksList.innerHTML = '';
        data.works.forEach(work => {
          const service = data.services.find(s => s.id === work.service);
          const workElement = document.createElement('div');
          workElement.className = 'list-item';
          workElement.innerHTML = `
            <div>
              <strong>${work.title}</strong>
              <p style="color: #666; font-size: 0.9rem;">الخدمة: ${service ? service.name : 'غير محدد'}</p>
              <p style="color: #666; font-size: 0.9rem;">${work.description.substring(0, 100)}...</p>
              ${work.client ? `<p style="color: #ffd700; font-size: 0.8rem;">العميل: ${work.client}</p>` : ''}
            </div>
            <div class="list-item-actions">
              <button class="view-btn" onclick="viewWork(${work.id})">عرض</button>
              <button class="delete-btn" onclick="deleteWork(${work.id})">حذف</button>
            </div>
          `;
          worksList.appendChild(workElement);
        });
      }
    }

    // تحميل الرسائل
    function loadMessages() {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const messagesList = document.getElementById('messagesList');
      
      if (messagesList) {
        messagesList.innerHTML = '';
        data.messages.forEach(message => {
          const messageElement = document.createElement('div');
          messageElement.className = 'list-item';
          messageElement.style.backgroundColor = message.read ? '#2a2a2a' : '#3a3a3a';
          messageElement.innerHTML = `
            <div>
              <strong>${message.name}</strong>
              <p style="color: #666; font-size: 0.9rem;">الهاتف: ${message.phone} | البريد: ${message.email}</p>
              <p style="color: #ddd; margin-top: 0.5rem;">${message.message}</p>
              <p style="color: #666; font-size: 0.8rem; margin-top: 0.5rem;">${new Date(message.date).toLocaleString('ar-EG')}</p>
            </div>
            <div class="list-item-actions">
              <button class="${message.read ? 'edit-btn' : 'delete-btn'}" onclick="toggleMessageRead(${message.id})">
                ${message.read ? 'مقروءة' : 'وضع كمقروءة'}
              </button>
              <button class="delete-btn" onclick="deleteMessage(${message.id})">حذف</button>
            </div>
          `;
          messagesList.appendChild(messageElement);
        });
      }
    }

    // تحميل طلبات الاستشارة
    function loadConsultations() {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const consultationsList = document.getElementById('consultationsList');
      
      if (consultationsList) {
        consultationsList.innerHTML = '';
        data.consultations.forEach(consultation => {
          const consultationElement = document.createElement('div');
          consultationElement.className = 'list-item';
          consultationElement.innerHTML = `
            <div>
              <strong>${consultation.name}</strong>
              <p style="color: #666; font-size: 0.9rem;">الهاتف: ${consultation.phone} | البريد: ${consultation.email}</p>
              <p style="color: #ddd; margin-top: 0.5rem;">نوع العمل: ${consultation.business}</p>
              <p style="color: #666; font-size: 0.8rem; margin-top: 0.5rem;">${new Date(consultation.date).toLocaleString('ar-EG')}</p>
              <span style="background: #ffd700; color: #000; padding: 2px 8px; border-radius: 3px; font-size: 0.7rem;">${consultation.status}</span>
            </div>
            <div class="list-item-actions">
              <button class="edit-btn" onclick="updateConsultationStatus(${consultation.id})">تحديث الحالة</button>
              <button class="delete-btn" onclick="deleteConsultation(${consultation.id})">حذف</button>
            </div>
          `;
          consultationsList.appendChild(consultationElement);
        });
      }
    }

    // تحميل التحليلات
    function loadAnalytics() {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      
      document.getElementById('analyticsVisitors').textContent = data.analytics.totalVisitors;
      document.getElementById('analyticsPageViews').textContent = data.analytics.pageViews;
      document.getElementById('analyticsAvgTime').textContent = Math.floor(Math.random() * 180) + 30 + 's';
      document.getElementById('analyticsBounceRate').textContent = Math.floor(Math.random() * 30) + 20 + '%';
      
      // تحديث تفاصيل الزوار
      const visitorsDetails = document.getElementById('visitorsDetails');
      if (visitorsDetails) {
        visitorsDetails.innerHTML = '';
        data.visitors.slice(-10).reverse().forEach(visitor => {
          const visitorElement = document.createElement('div');
          visitorElement.className = 'list-item';
          visitorElement.innerHTML = `
            <div>
              <strong>زائر ${visitor.id}</strong>
              <p style="color: #666; font-size: 0.9rem;">التاريخ: ${new Date(visitor.timestamp).toLocaleString('ar-EG')}</p>
              <p style="color: #666; font-size: 0.8rem;">اللغة: ${visitor.language} | المصدر: ${visitor.referrer}</p>
            </div>
          `;
          visitorsDetails.appendChild(visitorElement);
        });
      }
    }

    // إنشاء الرسوم البيانية
    function createCharts() {
      createWorksChart();
      createVisitorsChart();
    }

    // إنشاء رسم بياني للأعمال
    function createWorksChart() {
      const ctx = document.getElementById('worksChart');
      if (ctx && worksChart) {
        worksChart.destroy();
      }
      
      if (ctx) {
        const data = JSON.parse(localStorage.getItem('cmaData'));
        const servicesData = data.services.map(service => ({
          service: service.name,
          count: data.works.filter(work => work.service === service.id).length
        }));
        
        worksChart = new Chart(ctx, {
          type: 'doughnut',
          data: {
            labels: servicesData.map(s => s.service),
            datasets: [{
              data: servicesData.map(s => s.count),
              backgroundColor: [
                '#ffd700',
                '#d4af37',
                '#fff8dc',
                '#ffcc00',
                '#ffb300'
              ],
              borderWidth: 2,
              borderColor: '#1c1c1e'
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                labels: {
                  color: '#ffffff',
                  font: {
                    family: 'Poppins',
                    size: 14
                  }
                }
              }
            }
          }
        });
      }
    }

    // إنشاء رسم بياني للزوار
    function createVisitorsChart() {
      const ctx = document.getElementById('visitorsChart');
      if (ctx && visitorsChart) {
        visitorsChart.destroy();
      }
      
      if (ctx) {
        const data = JSON.parse(localStorage.getItem('cmaData'));
        
        visitorsChart = new Chart(ctx, {
          type: 'line',
          data: {
            labels: data.analytics.dailyVisitors.map(d => {
              const date = new Date(d.date);
              return date.toLocaleDateString('ar-EG', { month: 'short', day: 'numeric' });
            }),
            datasets: [{
              label: 'الزوار',
              data: data.analytics.dailyVisitors.map(d => d.count),
              borderColor: '#ffd700',
              backgroundColor: 'rgba(255, 215, 0, 0.1)',
              borderWidth: 3,
              fill: true,
              tension: 0.4
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                labels: {
                  color: '#ffffff',
                  font: {
                    family: 'Poppins',
                    size: 14
                  }
                }
              }
            },
            scales: {
              x: {
                ticks: {
                  color: '#ffffff'
                },
                grid: {
                  color: 'rgba(255, 255, 255, 0.1)'
                }
              },
              y: {
                ticks: {
                  color: '#ffffff'
                },
                grid: {
                  color: 'rgba(255, 255, 255, 0.1)'
                }
              }
            }
          }
        });
      }
    }

    // معالجة نماذج الداش بورد
    document.getElementById('addServiceForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const formData = new FormData(this);
      const serviceImage = document.getElementById('serviceImage').files[0];
      
      if (serviceImage) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const service = {
            id: 'service-' + Date.now(),
            name: formData.get('serviceName'),
            nameEn: formData.get('serviceNameEn'),
            description: formData.get('serviceDescription'),
            descriptionEn: formData.get('serviceDescriptionEn'),
            image: e.target.result
          };
          
          const data = JSON.parse(localStorage.getItem('cmaData'));
          data.services.push(service);
          localStorage.setItem('cmaData', JSON.stringify(data));
          
          loadServices();
          updateStats();
          createWorksChart();
          document.getElementById('addServiceForm').reset();
          alert('تم إضافة الخدمة بنجاح');
        };
        reader.readAsDataURL(serviceImage);
      }
    });

    // تغيير نوع العمل في النموذج
    document.getElementById('workType').addEventListener('change', function() {
      const imagesInput = document.getElementById('imagesInput');
      const videoInput = document.getElementById('videoInput');
      const videoLinkInput = document.getElementById('videoLinkInput');
      
      // إخفاء جميع الخيارات
      imagesInput.style.display = 'none';
      videoInput.style.display = 'none';
      videoLinkInput.style.display = 'none';
      
      // إظهار الخيار المناسب
      switch(this.value) {
        case 'images':
          imagesInput.style.display = 'block';
          break;
        case 'video':
          videoInput.style.display = 'block';
          break;
        case 'video-link':
          videoLinkInput.style.display = 'block';
          break;
      }
    });

    document.getElementById('addWorkForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const formData = new FormData(this);
      const workType = formData.get('workType');
      
      const work = {
        id: Date.now(),
        service: formData.get('workService'),
        title: formData.get('workTitle'),
        titleEn: formData.get('workTitleEn'),
        description: formData.get('workDescription'),
        descriptionEn: formData.get('workDescriptionEn'),
        client: formData.get('workClient') || null,
        type: workType,
        media: []
      };
      
      if (workType === 'images') {
        const images = document.getElementById('workImages').files;
        if (images.length === 0) {
          alert('يرجى اختيار صور للعمل');
          return;
        }
        
        let loadedImages = 0;
        const totalImages = images.length;
        
        for (let i = 0; i < images.length; i++) {
          const reader = new FileReader();
          reader.onload = function(e) {
            work.media.push(e.target.result);
            loadedImages++;
            
            if (loadedImages === totalImages) {
              saveWork(work);
            }
          };
          reader.readAsDataURL(images[i]);
        }
      } else if (workType === 'video') {
        const video = document.getElementById('workVideo').files[0];
        if (!video) {
          alert('يرجى اختيار فيديو للعمل');
          return;
        }
        
        const reader = new FileReader();
        reader.onload = function(e) {
          work.media.push(e.target.result);
          saveWork(work);
        };
        reader.readAsDataURL(video);
      } else if (workType === 'video-link') {
        const videoLink = document.getElementById('workVideoLink').value;
        if (!videoLink) {
          alert('يرجى إدخال رابط الفيديو');
          return;
        }
        
        // تحويل رابط يوتيوب إلى رابط embed
        let embedLink = videoLink;
        if (videoLink.includes('youtube.com/watch?v=')) {
          const videoId = videoLink.split('v=')[1].split('&')[0];
          embedLink = `https://www.youtube.com/embed/${videoId}`;
        } else if (videoLink.includes('youtu.be/')) {
          const videoId = videoLink.split('youtu.be/')[1].split('?')[0];
          embedLink = `https://www.youtube.com/embed/${videoId}`;
        }
        
        work.media.push(embedLink);
        saveWork(work);
      }
    });

    function saveWork(work) {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      data.works.push(work);
      localStorage.setItem('cmaData', JSON.stringify(data));
      
      loadWorks();
      updateStats();
      createWorksChart();
      document.getElementById('addWorkForm').reset();
      
      // إخفاء جميع حقول الإدخال
      document.getElementById('imagesInput').style.display = 'none';
      document.getElementById('videoInput').style.display = 'none';
      document.getElementById('videoLinkInput').style.display = 'none';
      
      alert('تم إضافة العمل بنجاح');
    }

    document.getElementById('changePasswordForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const currentPassword = document.getElementById('currentPassword').value;
      const newPassword = document.getElementById('newPassword').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      
      if (currentPassword !== currentUser.password) {
        alert('كلمة المرور الحالية غير صحيحة');
        return;
      }
      
      if (newPassword !== confirmPassword) {
        alert('كلمة المرور الجديدة غير متطابقة');
        return;
      }
      
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const userIndex = data.users.findIndex(u => u.username === currentUser.username);
      data.users[userIndex].password = newPassword;
      localStorage.setItem('cmaData', JSON.stringify(data));
      
      currentUser.password = newPassword;
      document.getElementById('changePasswordForm').reset();
      alert('تم تغيير كلمة المرور بنجاح');
    });

    // وظائف الحذف والتعديل
    function deleteService(serviceId) {
      if (confirm('هل أنت متأكد من حذف هذه الخدمة؟ سيتم حذف جميع الأعمال المرتبطة بها أيضاً.')) {
        const data = JSON.parse(localStorage.getItem('cmaData'));
        data.services = data.services.filter(s => s.id !== serviceId);
        data.works = data.works.filter(w => w.service !== serviceId);
        localStorage.setItem('cmaData', JSON.stringify(data));
        
        loadServices();
        loadWorks();
        updateStats();
        createWorksChart();
      }
    }

    function deleteWork(workId) {
      if (confirm('هل أنت متأكد من حذف هذا العمل؟')) {
        const data = JSON.parse(localStorage.getItem('cmaData'));
        data.works = data.works.filter(w => w.id !== workId);
        localStorage.setItem('cmaData', JSON.stringify(data));
        
        loadWorks();
        updateStats();
        createWorksChart();
      }
    }

    function viewWork(workId) {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const work = data.works.find(w => w.id === workId);
      if (work) {
        // التبديل للعرض العادي وإظهار العمل
        logout();
        setTimeout(() => {
          showService(work.service);
          setTimeout(() => {
            showProjectDetails(work);
          }, 500);
        }, 500);
      }
    }

    function deleteMessage(messageId) {
      if (confirm('هل أنت متأكد من حذف هذه الرسالة؟')) {
        const data = JSON.parse(localStorage.getItem('cmaData'));
        data.messages = data.messages.filter(m => m.id !== messageId);
        localStorage.setItem('cmaData', JSON.stringify(data));
        
        loadMessages();
        updateStats();
      }
    }

    function toggleMessageRead(messageId) {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const message = data.messages.find(m => m.id === messageId);
      if (message) {
        message.read = !message.read;
        localStorage.setItem('cmaData', JSON.stringify(data));
        loadMessages();
        updateStats();
      }
    }

    function deleteConsultation(consultationId) {
      if (confirm('هل أنت متأكد من حذف طلب الاستشارة هذا؟')) {
        const data = JSON.parse(localStorage.getItem('cmaData'));
        data.consultations = data.consultations.filter(c => c.id !== consultationId);
        localStorage.setItem('cmaData', JSON.stringify(data));
        
        loadConsultations();
        updateStats();
      }
    }

    function updateConsultationStatus(consultationId) {
      const newStatus = prompt('أدخل الحالة الجديدة:', 'تم التواصل');
      if (newStatus) {
        const data = JSON.parse(localStorage.getItem('cmaData'));
        const consultation = data.consultations.find(c => c.id === consultationId);
        if (consultation) {
          consultation.status = newStatus;
          localStorage.setItem('cmaData', JSON.stringify(data));
          loadConsultations();
        }
      }
    }

    // تهيئة النظام عند تحميل الصفحة
    document.addEventListener('DOMContentLoaded', function() {
      initializeSystem();
      
      // التحقق من معاملات URL
      if (window.location.search.includes('submitted=true')) {
        document.getElementById('thankYouPopup').style.display = 'flex';
        const url = new URL(window.location);
        url.searchParams.delete('submitted');
        window.history.replaceState({}, document.title, url.toString());
      }
    });

    // التحقق من تغيير الهاش في الرابط
    window.addEventListener('hashchange', function() {
      if (window.location.hash === '#XCMA') {
        showLogin();
      }
    });
  </script>
</body>
</html>
