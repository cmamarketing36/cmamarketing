<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CMA Marketing Agency - Digital Services in Egypt</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap');

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        scroll-behavior: smooth;
        font-family: "Poppins", serif;
    }

    body {
        background: linear-gradient(270deg, #000000, #1c1c1c, #2a2a2a, #1c1c1c, #000000);
        background-size: 1000% 1000%;
        animation: gradientShift 15s ease infinite;
        color: white;
        overflow-x: hidden;
    }

    @keyframes gradientShift {
        0% {background-position: 0% 50%;}
        50% {background-position: 100% 50%;}
        100% {background-position: 0% 50%;}
    }

    .container {
        width: 100%;
        max-width: 1200px;
        margin-right: auto;
        margin-left: auto;
        padding-right: 15px;
        padding-left: 15px;
    }

    header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 2rem auto;
        max-width: 1200px;
        height: auto;
        padding: 0 1rem;
        flex-wrap: wrap;
    }

    .cmalogoh { 
        width: 100px;
        height: 100px;
    }

    .navigation ul {
        display: flex;
        list-style-type: none;
        gap: 2rem;
        flex-wrap: wrap;
    }

    .navigation a {
        text-decoration: none;
        color: #ffffff;
        font-size: 1rem;
        transition: all 0.3s ease;
        cursor: pointer;
    }

    .navigation a:hover {
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc, #ffd700, #d4af37);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    hr {
        opacity: 10%;
        margin: 0.5rem 0;
    }

    .plan {
        width: 100%;
        max-width: 700px;
        height: auto;
        opacity: 0;
        transform: translateY(30px) scale(0.95);
        animation: planFadeIn 1s ease-out forwards;
        animation-delay: 1s;
    }

    @keyframes planFadeIn {
        to {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }

    .hero {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 5rem auto;
        max-width: 1200px;
        padding: 1rem;
        gap: 2rem;
    }

    .herosup {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
    }

    .plan1 {
        font-size: 2.5rem;
        color: #ffffff;
        opacity: 0;
        transform: translateX(-30px);
        animation: textSlideIn 1s ease-out forwards;
        animation-delay: 0.5s;
    }

    .Don {
        font-size: 1.5rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc, #ffd700, #d4af37);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        opacity: 0;
        transform: translateX(-30px);
        animation: textSlideIn 1s ease-out forwards;
        animation-delay: 0.8s;
    }

    @keyframes textSlideIn {
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    .Contactus {
        display: inline-block;
        padding: 13px 24px;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc, #ffd700, #d4af37);
        color: rgb(0, 0, 0);
        border-radius: 25px;
        text-decoration: none;
        text-shadow: 0px 4px 4px rgba(0, 0, 0, 0);
        transition: all 0.4s ease-in-out;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        position: relative;
        overflow: hidden;
        font-weight: bold;
        text-align: center;
    }

    .Contactus:hover {
        color: #fff;
        transform: scale(1.1);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        background: linear-gradient(90deg, #ffcc00, #ffd700, #ffb300, #ffd700, #ffcc00);
    }

    .Contactus:hover::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.5);
        border-radius: 25px;
        transform: scale(1.5);
        opacity: 0;
        animation: glowEffect 0.4s forwards;
    }

    @keyframes glowEffect {
        0% {
            opacity: 0;
            transform: scale(1.5);
        }
        100% {
            opacity: 1;
            transform: scale(1);
        }
    }

    .about {
        padding: 4rem 2rem;
        max-width: 1200px;
        margin: 0 auto 6rem auto;
    }

    .about-container {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 4rem;
        flex-wrap: wrap;
    }

    .about-text {
        flex: 1;
        min-width: 300px;
        animation: slideInLeft 1s ease forwards;
        font-family: "Poppins", sans-serif;
    }

    .about-text h2 {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc, #ffd700, #d4af37);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .about-text p {
        font-size: 1rem;
        line-height: 1.7;
        color: #dddddd;
        margin-bottom: 1rem;
    }

    .about-text p:hover {
        color: #ffffff;
    }

    .about-image {
        flex: 1;
        min-width: 300px;
        display: flex;
        justify-content: center;
        animation: slideInRight 1s ease forwards;
    }

    .about-image img {
        width: 100%;
        max-width: 400px;
        height: auto;
    }

    @keyframes slideInLeft {
        0% { transform: translateX(-50px); opacity: 0; }
        100% { transform: translateX(0); opacity: 1; }
    }

    @keyframes slideInRight {
        0% { transform: translateX(50px); opacity: 0; }
        100% { transform: translateX(0); opacity: 1; }
    }

    .whatsapp-fixed {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #25d366;
        border-radius: 50%;
        padding: 14px;
        z-index: 9999;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .whatsapp-fixed:hover {
        transform: scale(1.15);
        box-shadow: 0 0 30px #25d366;
    }

    .whatsapp-fixed img {
        width: 30px;
        height: 30px;
        display: block;
    }

    .Ourwork {
        padding: 4rem 2rem;
        max-width: 1200px;
        margin: 0 auto 6rem auto;
    }

    .Our--work {
        display: flex;
        flex-direction: column;
        justify-content: space-around;
        align-items: left;
        margin: 5rem auto;
        max-width: 1200px;
    }

    .our-work-title {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc, #ffd700, #d4af37);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .projecttitl {
        text-align: center;
        margin-bottom: 3rem;
    }

    .projecttitl h1 {
        font-size: 3rem;
        color: #ffffff;
        text-transform: uppercase;
        position: relative;
        display: inline-block;
    }

    .projecttitl h1::after {
        content: "";
        position: absolute;
        width: 60%;
        height: 4px;
        background-color: #ffffff;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        border-radius: 5px;
    }

    .projects {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 2rem;
        max-width: 1200px;
        margin: 0 auto 4rem;
        padding: 0;
        list-style: none;
    }

    .project-card {
        background: #1c1c1e;
        border-radius: 15px;
        overflow: hidden;
        text-align: center;
        padding: 1.5rem 1rem;
        color: #fff;
        text-decoration: none;
        box-shadow: 0 4px 20px rgba(255, 255, 255, 0.15);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        height: 100%;
        cursor: pointer;
    }

    .project-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 10px 25px rgba(255, 255, 255, 0.3);
    }

    .image-wrapper {
        width: 100%;
        height: 200px;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        border-radius: 10px;
        margin-bottom: 1rem;
        background-color: #29292b;
    }

    .image-wrapper img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        transition: transform 0.4s ease;
    }

    .image-wrapper:hover img {
        transform: scale(1.08);
    }

    .project-card p {
        font-size: 1.2rem;
        font-weight: 600;
        margin-top: 0.5rem;
        color: #ffffff;
    }

    .contact-form {
        padding: 4rem 2rem;
        max-width: 600px;
        margin: 0 auto;
        color: #fff;
    }

    .form-container h2 {
        text-align: center;
        font-size: 2.5rem;
        margin-bottom: 2rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    form {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
    }

    input, textarea {
        padding: 1rem;
        border-radius: 8px;
        border: none;
        font-size: 1rem;
        background-color: #2a2a2a;
        color: #fff;
        width: 100%;
    }

    textarea {
        resize: vertical;
        min-height: 120px;
    }

    button {
        padding: 1rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        border: none;
        border-radius: 8px;
        color: #000;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.3s ease;
    }

    button:hover {
        background: linear-gradient(90deg, #ffcc00, #ffd700, #ffb300);
    }

    .footer-contact {
        background: #121212;
        padding: 3rem 2rem;
        text-align: center;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .footer-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1000px;
        margin: 0 auto;
        flex-wrap: wrap;
        gap: 2rem;
    }

    .footer-left p {
        margin: 0.5rem 0;
        font-size: 1.1rem;
        color: #dddddd;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .footer-left i {
        color: #ffd700;
    }

    .footer-right a {
        color: #ffffff;
        font-size: 1.8rem;
        margin: 0 10px;
        transition: transform 0.3s ease, color 0.3s ease;
    }

    .footer-right a:hover {
        color: #ffd700;
        transform: scale(1.2);
    }

    .lang-btn {
        background-color: transparent;
        border: 2px solid #ffd700;
        color: white;
        padding: 0.4rem 1rem;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        transition: background 0.3s ease;
    }

    .lang-btn:hover {
        background-color: #ffd700;
        color: black;
    }

    /* أنماط صفحات الخدمات */
    .page {
        display: none;
        min-height: 100vh;
    }

    .page.active {
        display: block;
    }

    .service-page {
        padding: 2rem;
        max-width: 1200px;
        margin: 0 auto;
    }

    .back-btn {
        display: inline-block;
        margin-bottom: 2rem;
        padding: 0.8rem 2rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        color: #000;
        text-decoration: none;
        border-radius: 25px;
        font-weight: bold;
        transition: all 0.3s ease;
        cursor: pointer;
        border: none;
    }

    .back-btn:hover {
        background: linear-gradient(90deg, #ffcc00, #ffd700, #ffb300);
        transform: translateY(-2px);
    }

    .service-header {
        text-align: center;
        margin-bottom: 3rem;
    }

    .service-header h1 {
        font-size: 3rem;
        color: #ffffff;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc, #ffd700, #d4af37);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 1rem;
    }

    .service-header p {
        font-size: 1.2rem;
        color: #dddddd;
        max-width: 600px;
        margin: 0 auto;
    }

    .service-gallery {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 2rem;
        margin-top: 2rem;
    }

    .work-item {
        background: #1c1c1e;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 4px 20px rgba(255, 255, 255, 0.15);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        cursor: pointer;
    }

    .work-item:hover {
        transform: translateY(-8px);
        box-shadow: 0 10px 25px rgba(255, 255, 255, 0.3);
    }

    .work-item-media {
        width: 100%;
        height: 250px;
        overflow: hidden;
        background-color: #29292b;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
    }

    .work-item-media img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.4s ease;
    }

    .work-item:hover .work-item-media img {
        transform: scale(1.05);
    }

    .work-item-content {
        padding: 1.5rem;
    }

    .work-item-title {
        font-size: 1.3rem;
        font-weight: 600;
        color: #ffffff;
        margin-bottom: 0.5rem;
    }

    .work-item-description {
        font-size: 0.9rem;
        color: #dddddd;
        line-height: 1.5;
        margin-bottom: 1rem;
    }

    .work-item-client {
        font-size: 0.8rem;
        color: #ffd700;
        margin-bottom: 1rem;
    }

    .work-item-actions {
        display: flex;
        gap: 0.5rem;
    }

    .work-btn {
        flex: 1;
        padding: 0.5rem;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.3s ease;
    }

    .view-btn {
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        color: #000;
    }

    .contact-btn {
        background: #25d366;
        color: #fff;
    }

    .work-btn:hover {
        transform: translateY(-2px);
    }

    /* أنماط صفحة تفاصيل المشروع */
    .project-detail {
        padding: 2rem;
        max-width: 1200px;
        margin: 0 auto;
    }

    .project-detail-header {
        margin-bottom: 3rem;
    }

    .project-detail-title {
        font-size: 2.5rem;
        color: #ffffff;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 1rem;
    }

    .project-detail-content {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 3rem;
        margin-bottom: 3rem;
    }

    .project-gallery {
        position: relative;
    }

    .gallery-main {
        width: 100%;
        height: 400px;
        background: #29292b;
        border-radius: 15px;
        overflow: hidden;
        position: relative;
        margin-bottom: 1rem;
    }

    .gallery-main img,
    .gallery-main video {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .gallery-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 100%;
        padding: 0 1rem;
        pointer-events: none;
    }

    .gallery-nav button {
        background: rgba(0, 0, 0, 0.7);
        border: none;
        color: #fff;
        padding: 0.5rem;
        border-radius: 50%;
        cursor: pointer;
        pointer-events: all;
        transition: all 0.3s ease;
    }

    .gallery-nav button:hover {
        background: rgba(0, 0, 0, 0.9);
        transform: scale(1.1);
    }

    .gallery-thumbnails {
        display: flex;
        gap: 0.5rem;
        overflow-x: auto;
        padding: 0.5rem 0;
    }

    .gallery-thumbnail {
        width: 80px;
        height: 60px;
        background: #29292b;
        border-radius: 5px;
        overflow: hidden;
        cursor: pointer;
        opacity: 0.6;
        transition: opacity 0.3s ease;
        flex-shrink: 0;
    }

    .gallery-thumbnail.active {
        opacity: 1;
        border: 2px solid #ffd700;
    }

    .gallery-thumbnail img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .project-info {
        background: #1c1c1e;
        padding: 2rem;
        border-radius: 15px;
        height: fit-content;
    }

    .project-info h3 {
        color: #ffd700;
        margin-bottom: 1rem;
        font-size: 1.5rem;
    }

    .project-info-item {
        margin-bottom: 1rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid #333;
    }

    .project-info-item:last-child {
        border-bottom: none;
    }

    .project-info-label {
        font-size: 0.9rem;
        color: #888;
        margin-bottom: 0.5rem;
    }

    .project-info-value {
        color: #fff;
        font-weight: 500;
    }

    .project-contact-actions {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-top: 2rem;
    }

    .contact-action-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        padding: 1rem;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        text-decoration: none;
        font-weight: bold;
        transition: all 0.3s ease;
    }

    .whatsapp-btn {
        background: #25d366;
        color: #fff;
    }

    .call-btn {
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        color: #000;
    }

    .email-btn {
        background: #0077b6;
        color: #fff;
    }

    .contact-action-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    /* أنماط الداش بورد */
    .dashboard-container {
        min-height: 100vh;
        background: linear-gradient(270deg, #000000, #1c1c1c, #2a2a2a, #1c1c1c, #000000);
        background-size: 1000% 1000%;
        animation: gradientShift 15s ease infinite;
    }

    .dashboard-header {
        background: #1c1c1e;
        padding: 1rem 2rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .dashboard-header h1 {
        color: #ffffff;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .dashboard-nav {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
    }

    .dashboard-nav button {
        background: transparent;
        border: 2px solid #ffd700;
        color: #ffd700;
        padding: 0.5rem 1rem;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.9rem;
    }

    .dashboard-nav button:hover,
    .dashboard-nav button.active {
        background: #ffd700;
        color: #000;
    }

    .dashboard-content {
        padding: 2rem;
    }

    .dashboard-section {
        display: none;
    }

    .dashboard-section.active {
        display: block;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .stat-card {
        background: #1c1c1e;
        padding: 1.5rem;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 15px rgba(255, 255, 255, 0.1);
    }

    .stat-card h3 {
        font-size: 2rem;
        color: #ffd700;
        margin-bottom: 0.5rem;
    }

    .stat-card p {
        color: #dddddd;
    }

    .form-section {
        background: #1c1c1e;
        padding: 2rem;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(255, 255, 255, 0.1);
        margin-bottom: 2rem;
    }

    .form-section h3 {
        color: #ffd700;
        margin-bottom: 1rem;
    }

    .admin-form {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .admin-form input,
    .admin-form textarea,
    .admin-form select {
        padding: 0.8rem;
        border-radius: 5px;
        border: 1px solid #444;
        background-color: #2a2a2a;
        color: #fff;
    }

    .admin-form button {
        padding: 0.8rem;
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        border: none;
        border-radius: 5px;
        color: #000;
        font-weight: bold;
        cursor: pointer;
    }

    .list-container {
        background: #1c1c1e;
        padding: 2rem;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(255, 255, 255, 0.1);
        margin-top: 2rem;
    }

    .list-item {
        background: #2a2a2a;
        padding: 1rem;
        border-radius: 5px;
        margin-bottom: 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .list-item-actions {
        display: flex;
        gap: 0.5rem;
    }

    .list-item-actions button {
        padding: 0.3rem 0.8rem;
        border: none;
        border-radius: 3px;
        cursor: pointer;
        font-size: 0.8rem;
    }

    .edit-btn {
        background: #ffd700;
        color: #000;
    }

    .delete-btn {
        background: #ff4444;
        color: #fff;
    }

    .file-input-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .file-input-group label {
        color: #ffd700;
        font-weight: bold;
    }

    .file-input-group input[type="file"] {
        border: 2px dashed #ffd700;
        padding: 1rem;
        text-align: center;
        cursor: pointer;
    }

    .multiple-files-container {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        margin-top: 1rem;
    }

    .file-preview {
        width: 100px;
        height: 100px;
        background: #2a2a2a;
        border-radius: 5px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
    }

    .file-preview img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .file-preview-remove {
        position: absolute;
        top: -5px;
        right: -5px;
        background: #ff4444;
        color: #fff;
        border: none;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        cursor: pointer;
        font-size: 12px;
    }

    .chart-container {
        background: #1c1c1e;
        padding: 2rem;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(255, 255, 255, 0.1);
        margin-bottom: 2rem;
    }

    .chart-container h3 {
        color: #ffd700;
        margin-bottom: 1rem;
        text-align: center;
    }

    .chart-wrapper {
        height: 400px;
        position: relative;
    }

    /* أنماط الإشعارات */
    .notification {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #1c1c1e;
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        z-index: 10000;
        max-width: 500px;
        width: 90%;
        text-align: center;
        display: none;
    }

    .notification.show {
        display: block;
        animation: popup-appear 0.5s ease-out;
    }

    .notification-icon {
        font-size: 3rem;
        color: #ffd700;
        margin-bottom: 1rem;
    }

    .notification-title {
        font-size: 1.5rem;
        color: #fff;
        margin-bottom: 1rem;
    }

    .notification-message {
        color: #dddddd;
        margin-bottom: 2rem;
        line-height: 1.5;
    }

    .notification-actions {
        display: flex;
        gap: 1rem;
        justify-content: center;
    }

    .notification-btn {
        padding: 0.8rem 1.5rem;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s ease;
    }

    .notification-btn.primary {
        background: linear-gradient(90deg, #d4af37, #ffd700, #fff8dc);
        color: #000;
    }

    .notification-btn.secondary {
        background: transparent;
        border: 2px solid #ffd700;
        color: #ffd700;
    }

    .notification-btn:hover {
        transform: translateY(-2px);
    }

    .notification-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        z-index: 9999;
        display: none;
    }

    .notification-overlay.show {
        display: block;
    }

    /* أنماط إشعار الشكر */
    .thank-you-popup {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 1000;
        justify-content: center;
        align-items: center;
    }
    
    .thank-you-content {
        background-color: white;
        padding: 40px;
        border-radius: 15px;
        text-align: center;
        max-width: 500px;
        width: 90%;
        box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
        animation: popup-appear 0.5s ease-out;
        position: relative;
    }
    
    @keyframes popup-appear {
        0% { opacity: 0; transform: scale(0.8); }
        100% { opacity: 1; transform: scale(1); }
    }
    
    .thank-you-icon {
        font-size: 80px;
        color: #4CAF50;
        margin-bottom: 20px;
        animation: bounce 2s infinite;
    }
    
    @keyframes bounce {
        0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
        40% { transform: translateY(-20px); }
        60% { transform: translateY(-10px); }
    }
    
    .thank-you-title {
        font-size: 28px;
        font-weight: bold;
        margin-bottom: 15px;
        color: #333;
    }
    
    .thank-you-message {
        font-size: 18px;
        color: #666;
        margin-bottom: 25px;
        line-height: 1.5;
    }
    
    .thank-you-close {
        display: inline-block;
        background: #0077B6;
        color: white;
        padding: 12px 30px;
        border-radius: 30px;
        text-decoration: none;
        font-weight: bold;
        transition: all 0.3s ease;
        border: none;
        cursor: pointer;
        font-size: 16px;
    }
    
    .thank-you-close:hover {
        background: #005a8c;
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    /* وسائط استعلام للشاشات المختلفة */
    @media (max-width: 768px) {
        .container {
            max-width: 100%;
            padding: 0 15px;
        }
        
        header {
            flex-direction: column;
            gap: 1rem;
            margin: 1rem auto;
            padding: 0 0.5rem;
        }
        
        .navigation ul {
            gap: 1rem;
            justify-content: center;
        }
        
        .hero {
            flex-direction: column;
            text-align: center;
            margin: 2rem auto;
            padding: 1rem;
        }
        
        .herosup {
            align-items: center;
        }
        
        .plan1 {
            font-size: 2rem;
        }
        
        .Don {
            font-size: 1.2rem;
        }
        
        .plan {
            max-width: 100%;
            margin-top: 2rem;
        }
        
        .about {
            padding: 2rem 1rem;
        }
        
        .about-container {
            flex-direction: column;
            gap: 2rem;
        }
        
        .about-text, .about-image {
            min-width: 100%;
        }
        
        .our-work-title {
            font-size: 2rem;
            text-align: center;
        }
        
        .Our--work {
            align-items: center;
            padding: 1rem;
            margin: 2rem auto;
        }
        
        .projecttitl h1 {
            font-size: 2.2rem;
        }
        
        .projects {
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
        
        .project-card {
            max-width: 100%;
        }
        
        .contact-form {
            padding: 2rem 1rem;
        }
        
        input, textarea {
            padding: 0.8rem;
        }
        
        .footer-content {
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .footer-left p {
            justify-content: center;
        }

        .dashboard-header {
            flex-direction: column;
            gap: 1rem;
        }

        .dashboard-nav {
            flex-wrap: wrap;
            justify-content: center;
        }

        .stats-grid {
            grid-template-columns: 1fr;
        }

        .project-detail-content {
            grid-template-columns: 1fr;
            gap: 2rem;
        }

        .service-gallery {
            grid-template-columns: 1fr;
        }

        .notification {
            width: 95%;
            padding: 1.5rem;
        }
    }

    .hidden {
        display: none !important;
    }

    .show {
        display: block !important;
    }

    .video-container {
        position: relative;
        width: 100%;
        height: 250px;
        background: #000;
        border-radius: 10px;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .video-container iframe {
        width: 100%;
        height: 100%;
        border: none;
    }

    .video-placeholder {
        color: #666;
        text-align: center;
        padding: 2rem;
    }

    .url-input-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        margin-bottom: 1rem;
    }

    .url-input-group label {
        color: #ffd700;
        font-weight: bold;
        font-size: 0.9rem;
    }

    .url-input-group input {
        padding: 0.8rem;
        border: 1px solid #444;
        border-radius: 5px;
        background: #2a2a2a;
        color: #fff;
    }

    .url-input-group small {
        color: #888;
        font-size: 0.8rem;
    }
  </style>
</head>
<body>
  <!-- الصفحة الرئيسية -->
  <div id="homePage" class="page active">
    <header>
      <img class="cmalogoh" src="SVG/asdgfArtboard 1.svg" alt="cma logo" />
      <nav class="navigation">
        <ul>
          <li><a onclick="navigateTo('home', 'about')" data-en="About" data-ar="من نحن">About</a></li>
          <li><a onclick="navigateTo('home', 'Our-work')" data-en="Our work" data-ar="أعمالنا">Our work</a></li>
          <li><a onclick="navigateTo('home', 'contactMe')" data-en="Contact" data-ar="تواصل معنا">Contact</a></li>
        </ul>
      </nav>
      <button id="langToggle" class="lang-btn">AR</button>
    </header>

    <hr />

    <section class="hero">
      <div class="herosup">
        <h1 class="plan1" data-en="The plane will take off" data-ar="الرحلة ستبدأ الآن">The plane will take off</h1>
        <h1 class="Don" data-en="Don't miss the opportunity and make your business take off" data-ar="لا تفوت الفرصة وخلّي عملك يقلع">Don't miss the opportunity and make your business take off</h1>
        <div class="heroptns">
          <a class="Contactus" href="https://wa.me/201004435408" target="_blank" data-en="Contact us" data-ar="تواصل معنا">Contact us</a>
        </div>
      </div>
      <img class="plan" src="sss/cmaaa.svg" alt="logocma2" />
    </section>

    <section class="about" id="about">
      <div class="about-container">
        <div class="about-image">
          <img src="sss/people-taking-part-business-event (1).svg" alt="About CMA" width="600" height="400">
        </div>
        <div class="about-text">
          <h2 data-en="About CMA" data-ar="من نحن">About CMA</h2>
          <p data-en="At CMA, we think differently. We believe in bold ideas that turn into real results for brands and content creators."
             data-ar="في CMA نفكر بشكل مختلف. نؤمن بالأفكار الجريئة التي تتحول إلى نتائج حقيقية للعلامات التجارية وصناع المحتوى.">
             At CMA, we think differently. We believe in bold ideas that turn into real results for brands and content creators.
          </p>
          <p data-en="We're a full-service marketing agency focused on building strong digital presence and delivering the professional image every brand deserves."
             data-ar="نحن وكالة تسويق متكاملة تركز على بناء حضور رقمي قوي وتقديم الصورة الاحترافية التي تستحقها كل علامة تجارية.">
             We're a full-service marketing agency focused on building strong digital presence and delivering the professional image every brand deserves.
          </p>
          <p data-en="Each project gets a dedicated team to ensure creativity, strategy, and impact—all in one."
             data-ar="كل مشروع يحصل على فريق مخصص لضمان الإبداع والاستراتيجية والتأثير في آن واحد.">
             Each project gets a dedicated team to ensure creativity, strategy, and impact—all in one.
          </p>
          <p data-en="We manage every account with full focus and professionalism as if it's our only one."
             data-ar="ندير كل حساب بتركيز واحترافية وكأنه الوحيد لدينا.">
             We manage every account with full focus and professionalism as if it's our only one.
          </p>
        </div>
      </div>
    </section>

    <section class="Ourwork" id="Our-work">
      <div class="Our--work">
        <div class="projecttitl">
          <h1 class="our-work-title" data-en="Our work" data-ar="أعمالنا">Our work</h1>
        </div>

        <ul class="projects" id="servicesGrid">
          <!-- سيتم إضافة الخدمات هنا من خلال JavaScript -->
        </ul>
      </div>
    </section>

    <section class="contact-form" id="contactMe">
      <div class="form-container">
        <h2 data-en="Contact Us" data-ar="تواصل معنا">Contact Us</h2>
        <form id="contactForm" action="https://formsubmit.co/cmamarketing36@gmail.com" method="POST">
          <input type="text" name="_honey" style="display:none">
          <input type="hidden" name="_captcha" value="false">
          <input type="hidden" name="_subject" value="New form submission from CMA Website">
          
          <input type="text" name="name" placeholder="Your Name" required data-en="Your Name" data-ar="اسمك" />
          <input type="tel" name="phone" placeholder="Phone Number" required data-en="Phone Number" data-ar="رقم الهاتف" />
          <input type="email" name="email" placeholder="Email Address" required data-en="Email Address" data-ar="البريد الإلكتروني" />
          <textarea name="message" placeholder="Your Message" required data-en="Your Message" data-ar="رسالتك"></textarea>
          <button type="submit" data-en="Send Message" data-ar="إرسال">Send Message</button>
        </form>
      </div>
    </section>

    <section class="footer-contact">
      <div class="footer-content">
        <div class="footer-left">
          <p><i class="fas fa-envelope"></i> cmamarketing36@gmail.com</p>
          <p><i class="fas fa-phone-alt"></i> +20 109 479 5739</p>
          <p><i class="fas fa-phone-alt"></i> +20 100 443 5408</p>
        </div>

        <div class="footer-right">
          <a href="https://www.facebook.com/cmamarketing36" target="_blank" aria-label="Facebook">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="https://www.instagram.com/cma_egypt/" target="_blank" aria-label="Instagram">
            <i class="fab fa-instagram"></i>
          </a>
        </div>
      </div>
    </section>

    <a href="https://wa.me/201004435408"
       class="whatsapp-fixed"
       target="_blank"
       title="Chat with us on WhatsApp">
       <img src="https://img.icons8.com/ios-filled/50/ffffff/whatsapp--v1.png" alt="WhatsApp" />
    </a>
  </div>

  <!-- صفحة الخدمة -->
  <div id="servicePage" class="page">
    <div class="service-page">
      <button class="back-btn" onclick="navigateTo('home')">
        <i class="fas fa-arrow-left"></i> <span data-en="Back to Home" data-ar="العودة للرئيسية">العودة للرئيسية</span>
      </button>
      <div class="service-header">
        <h1 id="serviceTitle">خدماتنا</h1>
        <p id="serviceDescription">نقدم خدمات متميزة لعملائنا</p>
      </div>
      <div class="service-gallery" id="serviceGallery">
        <!-- سيتم إضافة الأعمال هنا -->
      </div>
    </div>
  </div>

  <!-- صفحة تفاصيل المشروع -->
  <div id="projectPage" class="page">
    <div class="project-detail">
      <button class="back-btn" onclick="goBackToService()">
        <i class="fas fa-arrow-left"></i> <span data-en="Back" data-ar="رجوع">رجوع</span>
      </button>
      <div class="project-detail-header">
        <h1 class="project-detail-title" id="projectTitle">تفاصيل المشروع</h1>
      </div>
      <div class="project-detail-content">
        <div class="project-gallery">
          <div class="gallery-main" id="galleryMain">
            <!-- سيتم إضافة الوسائط هنا -->
          </div>
          <div class="gallery-nav">
            <button onclick="previousMedia()" id="prevBtn"><i class="fas fa-chevron-left"></i></button>
            <button onclick="nextMedia()" id="nextBtn"><i class="fas fa-chevron-right"></i></button>
          </div>
          <div class="gallery-thumbnails" id="galleryThumbnails">
            <!-- سيتم إضافة المصغرات هنا -->
          </div>
        </div>
        <div class="project-info">
          <h3 data-en="Project Information" data-ar="معلومات المشروع">معلومات المشروع</h3>
          <div class="project-info-item">
            <div class="project-info-label" data-en="Client" data-ar="العميل">العميل</div>
            <div class="project-info-value" id="projectClient">-</div>
          </div>
          <div class="project-info-item">
            <div class="project-info-label" data-en="Service" data-ar="الخدمة">الخدمة</div>
            <div class="project-info-value" id="projectService">-</div>
          </div>
          <div class="project-info-item">
            <div class="project-info-label" data-en="Description" data-ar="الوصف">الوصف</div>
            <div class="project-info-value" id="projectDescription">-</div>
          </div>
          <div class="project-info-item">
            <div class="project-info-label" data-en="Date" data-ar="التاريخ">التاريخ</div>
            <div class="project-info-value" id="projectDate">-</div>
          </div>
          <div class="project-contact-actions">
            <a href="https://wa.me/201004435408" target="_blank" class="contact-action-btn whatsapp-btn">
              <i class="fab fa-whatsapp"></i>
              <span data-en="WhatsApp" data-ar="واتساب">واتساب</span>
            </a>
            <a href="tel:+201004435408" class="contact-action-btn call-btn">
              <i class="fas fa-phone"></i>
              <span data-en="Call Now" data-ar="اتصل الآن">اتصل الآن</span>
            </a>
            <a href="mailto:cmamarketing36@gmail.com" class="contact-action-btn email-btn">
              <i class="fas fa-envelope"></i>
              <span data-en="Email" data-ar="بريد إلكتروني">بريد إلكتروني</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- صفحة الداش بورد -->
  <div id="dashboardPage" class="page">
    <div class="dashboard-container">
      <div class="dashboard-header">
        <h1>لوحة التحكم - CMA</h1>
        <div class="dashboard-nav">
          <button onclick="showDashboardSection('overview')" class="active">نظرة عامة</button>
          <button onclick="showDashboardSection('services')">إدارة الخدمات</button>
          <button onclick="showDashboardSection('works')">إدارة الأعمال</button>
          <button onclick="showDashboardSection('messages')">الرسائل</button>
          <button onclick="showDashboardSection('consultations')">طلبات الاستشارة</button>
          <button onclick="showDashboardSection('settings')">الإعدادات</button>
          <button onclick="logout()">تسجيل الخروج</button>
        </div>
      </div>

      <div class="dashboard-content">
        <!-- نظرة عامة -->
        <div id="overviewSection" class="dashboard-section active">
          <div class="stats-grid">
            <div class="stat-card">
              <h3 id="totalServices">0</h3>
              <p>إجمالي الخدمات</p>
            </div>
            <div class="stat-card">
              <h3 id="totalWorks">0</h3>
              <p>إجمالي الأعمال</p>
            </div>
            <div class="stat-card">
              <h3 id="totalMessages">0</h3>
              <p>الرسائل الجديدة</p>
            </div>
            <div class="stat-card">
              <h3 id="totalConsultations">0</h3>
              <p>طلبات الاستشارة</p>
            </div>
          </div>

          <div class="chart-container">
            <h3>إحصائيات الأعمال</h3>
            <div class="chart-wrapper">
              <canvas id="worksChart" style="height: 400px;"></canvas>
            </div>
          </div>
        </div>

        <!-- إدارة الخدمات -->
        <div id="servicesSection" class="dashboard-section">
          <div class="form-section">
            <h3>إضافة خدمة جديدة</h3>
            <form class="admin-form" id="addServiceForm">
              <input type="text" id="serviceName" placeholder="اسم الخدمة" required>
              <input type="text" id="serviceNameEn" placeholder="اسم الخدمة بالإنجليزية" required>
              <textarea id="serviceDescription" placeholder="وصف الخدمة" required></textarea>
              <textarea id="serviceDescriptionEn" placeholder="وصف الخدمة بالإنجليزية" required></textarea>
              <div class="file-input-group">
                <label>صورة الخدمة:</label>
                <input type="file" id="serviceImage" accept="image/*" required>
              </div>
              <button type="submit">إضافة الخدمة</button>
            </form>
          </div>

          <div class="list-container">
            <h3>الخدمات الحالية</h3>
            <div id="servicesList">
              <!-- سيتم إضافة الخدمات هنا -->
            </div>
          </div>
        </div>

        <!-- إدارة الأعمال -->
        <div id="worksSection" class="dashboard-section">
          <div class="form-section">
            <h3>إضافة عمل جديد</h3>
            <form class="admin-form" id="addWorkForm">
              <select id="workService" required>
                <option value="">اختر الخدمة</option>
              </select>
              <input type="text" id="workTitle" placeholder="عنوان العمل" required>
              <input type="text" id="workTitleEn" placeholder="عنوان العمل بالإنجليزية" required>
              <textarea id="workDescription" placeholder="وصف العمل" required></textarea>
              <textarea id="workDescriptionEn" placeholder="وصف العمل بالإنجليزية" required></textarea>
              <input type="text" id="workClient" placeholder="اسم العميل" required>
              <input type="date" id="workDate" required>
              
              <div class="file-input-group">
                <label>صور العمل (يمكن اختيار أكثر من صورة):</label>
                <input type="file" id="workImages" accept="image/*" multiple>
                <div class="multiple-files-container" id="imagesPreview"></div>
              </div>

              <div class="url-input-group">
                <label>رابط الفيديو (اختياري):</label>
                <input type="url" id="workVideoUrl" placeholder="https://www.youtube.com/watch?v=...">
                <small>يدعم روابط YouTube, Instagram Reels, TikTok</small>
              </div>

              <button type="submit">إضافة العمل</button>
            </form>
          </div>

          <div class="list-container">
            <h3>الأعمال الحالية</h3>
            <div id="worksList">
              <!-- سيتم إضافة الأعمال هنا -->
            </div>
          </div>
        </div>

        <!-- الرسائل -->
        <div id="messagesSection" class="dashboard-section">
          <div class="list-container">
            <h3>رسائل العملاء</h3>
            <div id="messagesList">
              <!-- سيتم إضافة الرسائل هنا -->
            </div>
          </div>
        </div>

        <!-- طلبات الاستشارة -->
        <div id="consultationsSection" class="dashboard-section">
          <div class="list-container">
            <h3>طلبات الاستشارة التسويقية</h3>
            <div id="consultationsList">
              <!-- سيتم إضافة طلبات الاستشارة هنا -->
            </div>
          </div>
        </div>

        <!-- الإعدادات -->
        <div id="settingsSection" class="dashboard-section">
          <div class="form-section">
            <h3>تغيير كلمة المرور</h3>
            <form class="admin-form" id="changePasswordForm">
              <input type="password" id="currentPassword" placeholder="كلمة المرور الحالية" required>
              <input type="password" id="newPassword" placeholder="كلمة المرور الجديدة" required>
              <input type="password" id="confirmPassword" placeholder="تأكيد كلمة المرور الجديدة" required>
              <button type="submit">تغيير كلمة المرور</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- إشعار الاستشارة التسويقية -->
  <div class="notification-overlay" id="consultationOverlay"></div>
  <div class="notification" id="consultationNotification">
    <div class="notification-icon">
      <i class="fas fa-bullhorn"></i>
    </div>
    <h3 class="notification-title" data-en="Get Marketing Consultation Now!" data-ar="احصل على استشارة تسويقية الآن!">احصل على استشارة تسويقية الآن!</h3>
    <p class="notification-message" data-en="Take advantage of our free marketing consultation to improve your business performance and increase your sales." data-ar="استفد من استشارتنا التسويقية المجانية لتحسين أداء عملك وزيادة مبيعاتك.">استفد من استشارتنا التسويقية المجانية لتحسين أداء عملك وزيادة مبيعاتك.</p>
    <div class="notification-actions">
      <button class="notification-btn primary" onclick="requestConsultation()">
        <span data-en="Request Consultation" data-ar="طلب استشارة">طلب استشارة</span>
      </button>
      <button class="notification-btn secondary" onclick="closeConsultationNotification()">
        <span data-en="Maybe Later" data-ar="لاحقاً">لاحقاً</span>
      </button>
    </div>
  </div>

  <!-- نموذج طلب الاستشارة -->
  <div class="notification" id="consultationForm" style="display: none;">
    <div class="notification-icon">
      <i class="fas fa-user-tie"></i>
    </div>
    <h3 class="notification-title" data-en="Request Marketing Consultation" data-ar="طلب استشارة تسويقية">طلب استشارة تسويقية</h3>
    <form id="consultationRequestForm" style="text-align: left;">
      <input type="text" id="consultationName" placeholder="الاسم" required style="margin-bottom: 1rem;">
      <input type="email" id="consultationEmail" placeholder="البريد الإلكتروني" required style="margin-bottom: 1rem;">
      <input type="tel" id="consultationPhone" placeholder="رقم الهاتف" required style="margin-bottom: 1rem;">
      <textarea id="consultationMessage" placeholder="اخبرنا عن عملك وما تحتاجه" required style="margin-bottom: 1rem; min-height: 80px;"></textarea>
    </form>
    <div class="notification-actions">
      <button class="notification-btn primary" onclick="submitConsultation()">
        <span data-en="Submit Request" data-ar="إرسال الطلب">إرسال الطلب</span>
      </button>
      <button class="notification-btn secondary" onclick="closeConsultationForm()">
        <span data-en="Cancel" data-ar="إلغاء">إلغاء</span>
      </button>
    </div>
  </div>

  <!-- إشعار الشكر -->
  <div class="thank-you-popup" id="thankYouPopup">
    <div class="thank-you-content">
      <i class="fas fa-check-circle thank-you-icon"></i>
      <h2 class="thank-you-title" data-en="Thank You!" data-ar="شكراً لك!">Thank You!</h2>
      <p class="thank-you-message" data-en="Your message has been sent successfully. We'll contact you soon." data-ar="تم إرسال رسالتك بنجاح. سنتواصل معك قريباً.">Your message has been sent successfully. We'll contact you soon.</p>
      <button class="thank-you-close" id="closeThankYou" data-en="Close" data-ar="إغلاق">Close</button>
    </div>
  </div>

  <script>
    // متغيرات عامة
    let currentLanguage = 'en';
    let currentPage = 'home';
    let currentService = null;
    let currentProject = null;
    let currentMediaIndex = 0;
    let currentProjectMedia = [];
    let worksChart = null;
    let consultationTimer = null;

    // بيانات افتراضية للنظام
    const defaultData = {
      services: [
        {
          id: 'photography',
          name: 'التصوير',
          nameEn: 'Photography',
          description: 'خدمات تصوير احترافية لجميع احتياجاتك',
          descriptionEn: 'Professional photography services for all your needs',
          image: 'sss/Content Management IM.svg'
        },
        {
          id: 'video-editing',
          name: 'مونتاج الفيديو',
          nameEn: 'Video Editing',
          description: 'مونتاج فيديو احترافي وجرافيك متحرك',
          descriptionEn: 'Professional video editing and motion graphics',
          image: 'sss/social-media-concept-with-smartphone.svg'
        },
        {
          id: 'graphic-design',
          name: 'تصميم الجرافيك',
          nameEn: 'Graphic Design',
          description: 'حلول تصميم جرافيك إبداعية لعملك',
          descriptionEn: 'Creative graphic design solutions for your business',
          image: 'sss/تعديل فيديو.svg'
        }
      ],
      works: [
        {
          id: 1,
          service: 'photography',
          title: 'تصوير منتجات تجارية',
          titleEn: 'Commercial Product Photography',
          description: 'تصوير احترافي للمنتجات التجارية مع إضاءة مثالية',
          descriptionEn: 'Professional commercial product photography with perfect lighting',
          client: 'شركة النور للتجارة',
          date: '2024-01-15',
          images: ['sss/تصوير.svg'],
          videoUrl: ''
        },
        {
          id: 2,
          service: 'video-editing',
          title: 'مونتاج إعلان تجاري',
          titleEn: 'Commercial Video Edit',
          description: 'مونتاج إعلان تجاري احترافي مع مؤثرات بصرية',
          descriptionEn: 'Professional commercial video editing with visual effects',
          client: 'مطعم الذوق الرفيع',
          date: '2024-01-20',
          images: ['sss/social-media-concept-with-smartphone.svg'],
          videoUrl: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ'
        }
      ],
      messages: [],
      consultations: [],
      users: [{
        username: 'admin',
        password: 'cma2024'
      }]
    };

    // تهيئة النظام
    function initializeSystem() {
      // تحميل البيانات من localStorage أو استخدام البيانات الافتراضية
      if (!localStorage.getItem('cmaData')) {
        localStorage.setItem('cmaData', JSON.stringify(defaultData));
      }
      
      loadServices();
      updateStats();
      
      // بدء مؤقت إشعار الاستشارة
      startConsultationTimer();
    }

    // التنقل بين الصفحات
    function navigateTo(page, section = null) {
      // إخفاء جميع الصفحات
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      
      currentPage = page;
      
      if (page === 'home') {
        document.getElementById('homePage').classList.add('active');
        if (section) {
          setTimeout(() => {
            document.getElementById(section).scrollIntoView({ behavior: 'smooth' });
          }, 100);
        }
      } else if (page === 'service') {
        document.getElementById('servicePage').classList.add('active');
      } else if (page === 'project') {
        document.getElementById('projectPage').classList.add('active');
      } else if (page === 'dashboard') {
        document.getElementById('dashboardPage').classList.add('active');
      }
      
      // تحديث الرابط
      window.history.pushState({page: page}, '', '#' + page);
    }

    // عرض الخدمة
    function showService(serviceId) {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const service = data.services.find(s => s.id === serviceId);
      
      if (service) {
        currentService = serviceId;
        document.getElementById('serviceTitle').textContent = currentLanguage === 'ar' ? service.name : service.nameEn;
        document.getElementById('serviceDescription').textContent = currentLanguage === 'ar' ? service.description : service.descriptionEn;
        
        loadServiceWorks(serviceId);
        navigateTo('service');
      }
    }

    // تحميل أعمال الخدمة
    function loadServiceWorks(serviceId) {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const works = data.works.filter(work => work.service === serviceId);
      
      const gallery = document.getElementById('serviceGallery');
      gallery.innerHTML = '';
      
      works.forEach(work => {
        const workElement = document.createElement('div');
        workElement.className = 'work-item';
        workElement.onclick = () => showProject(work.id);
        
        const mainImage = work.images && work.images.length > 0 ? work.images[0] : 'sss/تصوير.svg';
        
        workElement.innerHTML = `
          <div class="work-item-media">
            <img src="${mainImage}" alt="${work.title}">
            ${work.images && work.images.length > 1 ? '<div style="position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.7); color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem;">+' + (work.images.length - 1) + '</div>' : ''}
            ${work.videoUrl ? '<div style="position: absolute; top: 10px; left: 10px; background: rgba(255,0,0,0.8); color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem;"><i class="fas fa-play"></i></div>' : ''}
          </div>
          <div class="work-item-content">
            <h3 class="work-item-title">${currentLanguage === 'ar' ? work.title : work.titleEn}</h3>
            <p class="work-item-description">${currentLanguage === 'ar' ? work.description : work.descriptionEn}</p>
            <p class="work-item-client">العميل: ${work.client}</p>
            <div class="work-item-actions">
              <button class="work-btn view-btn" onclick="event.stopPropagation(); showProject(${work.id})">
                <i class="fas fa-eye"></i> عرض التفاصيل
              </button>
              <button class="work-btn contact-btn" onclick="event.stopPropagation(); window.open('https://wa.me/201004435408', '_blank')">
                <i class="fab fa-whatsapp"></i> تواصل معنا
              </button>
            </div>
          </div>
        `;
        
        gallery.appendChild(workElement);
      });
      
      if (works.length === 0) {
        gallery.innerHTML = `
          <div style="text-align: center; color: #666; padding: 2rem; grid-column: 1/-1;">
            <i class="fas fa-folder-open" style="font-size: 3rem; margin-bottom: 1rem;"></i>
            <p>لا توجد أعمال متاحة في هذه الخدمة حالياً</p>
          </div>
        `;
      }
    }

    // عرض تفاصيل المشروع
    function showProject(projectId) {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const project = data.works.find(w => w.id === projectId);
      const service = data.services.find(s => s.id === project.service);
      
      if (project) {
        currentProject = project;
        
        // تحديث المعلومات
        document.getElementById('projectTitle').textContent = currentLanguage === 'ar' ? project.title : project.titleEn;
        document.getElementById('projectClient').textContent = project.client;
        document.getElementById('projectService').textContent = currentLanguage === 'ar' ? service.name : service.nameEn;
        document.getElementById('projectDescription').textContent = currentLanguage === 'ar' ? project.description : project.descriptionEn;
        document.getElementById('projectDate').textContent = new Date(project.date).toLocaleDateString('ar-EG');
        
        // إعداد الوسائط
        currentProjectMedia = [];
        if (project.images && project.images.length > 0) {
          project.images.forEach(img => {
            currentProjectMedia.push({ type: 'image', url: img });
          });
        }
        if (project.videoUrl) {
          currentProjectMedia.push({ type: 'video', url: project.videoUrl });
        }
        
        currentMediaIndex = 0;
        updateProjectGallery();
        
        navigateTo('project');
      }
    }

    // تحديث معرض المشروع
    function updateProjectGallery() {
      const galleryMain = document.getElementById('galleryMain');
      const galleryThumbnails = document.getElementById('galleryThumbnails');
      
      if (currentProjectMedia.length === 0) {
        galleryMain.innerHTML = '<div class="video-placeholder">لا توجد وسائط متاحة</div>';
        galleryThumbnails.innerHTML = '';
        return;
      }
      
      const currentMedia = currentProjectMedia[currentMediaIndex];
      
      // عرض الوسائط الرئيسية
      if (currentMedia.type === 'image') {
        galleryMain.innerHTML = `<img src="${currentMedia.url}" alt="صورة المشروع">`;
      } else if (currentMedia.type === 'video') {
        const embedUrl = getEmbedUrl(currentMedia.url);
        if (embedUrl) {
          galleryMain.innerHTML = `
            <div class="video-container">
              <iframe src="${embedUrl}" allowfullscreen></iframe>
            </div>
          `;
        } else {
          galleryMain.innerHTML = `
            <div class="video-container">
              <video controls playsinline webkit-playsinline>
                <source src="${currentMedia.url}" type="video/mp4">
              </video>
            </div>
          `;
        }
      }
      
      // عرض المصغرات
      galleryThumbnails.innerHTML = '';
      currentProjectMedia.forEach((media, index) => {
        const thumbnail = document.createElement('div');
        thumbnail.className = `gallery-thumbnail ${index === currentMediaIndex ? 'active' : ''}`;
        thumbnail.onclick = () => {
          currentMediaIndex = index;
          updateProjectGallery();
        };
        
        if (media.type === 'image') {
          thumbnail.innerHTML = `<img src="${media.url}" alt="مصغرة">`;
        } else {
          thumbnail.innerHTML = `<div style="display: flex; align-items: center; justify-content: center; height: 100%; background: #000; color: #fff;"><i class="fas fa-play"></i></div>`;
        }
        
        galleryThumbnails.appendChild(thumbnail);
      });
      
      // إظهار/إخفاء أزرار التنقل
      document.getElementById('prevBtn').style.display = currentProjectMedia.length > 1 ? 'block' : 'none';
      document.getElementById('nextBtn').style.display = currentProjectMedia.length > 1 ? 'block' : 'none';
    }

    // الوسائط السابقة
    function previousMedia() {
      if (currentProjectMedia.length > 1) {
        currentMediaIndex = (currentMediaIndex - 1 + currentProjectMedia.length) % currentProjectMedia.length;
        updateProjectGallery();
      }
    }

    // الوسائط التالية
    function nextMedia() {
      if (currentProjectMedia.length > 1) {
        currentMediaIndex = (currentMediaIndex + 1) % currentProjectMedia.length;
        updateProjectGallery();
      }
    }

    // تحويل رابط الفيديو إلى رابط مضمن
    function getEmbedUrl(url) {
      if (url.includes('youtube.com/watch?v=')) {
        const videoId = url.split('v=')[1].split('&')[0];
        return `https://www.youtube.com/embed/${videoId}`;
      } else if (url.includes('youtu.be/')) {
        const videoId = url.split('youtu.be/')[1].split('?')[0];
        return `https://www.youtube.com/embed/${videoId}`;
      } else if (url.includes('instagram.com/reel/')) {
        const reelId = url.split('reel/')[1].split('/')[0];
        return `https://www.instagram.com/p/${reelId}/embed/`;
      } else if (url.includes('tiktok.com/')) {
        // TikTok embed يتطلب معالجة خاصة
        return null;
      }
      return null;
    }

    // العودة إلى صفحة الخدمة
    function goBackToService() {
      if (currentService) {
        navigateTo('service');
      } else {
        navigateTo('home');
      }
    }

    // تبديل اللغة
    document.getElementById('langToggle').addEventListener('click', function () {
      const isArabic = this.innerText === 'AR';
      const elements = document.querySelectorAll('[data-en]');
  
      elements.forEach(el => {
        const text = isArabic ? el.getAttribute('data-ar') : el.getAttribute('data-en');
        if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
          el.placeholder = text;
        } else {
          el.textContent = text;
        }
      });
  
      this.innerText = isArabic ? 'EN' : 'AR';
      document.documentElement.setAttribute("lang", isArabic ? "ar" : "en");
      document.body.style.direction = isArabic ? "rtl" : "ltr";
      currentLanguage = isArabic ? 'ar' : 'en';
      
      // إعادة تحميل المحتوى باللغة الجديدة
      loadServices();
      if (currentService) {
        loadServiceWorks(currentService);
      }
    });

    // معالجة إرسال النموذج
    document.getElementById('contactForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const form = this;
      const formData = new FormData(form);
      const submitButton = form.querySelector('button[type="submit"]');
      const originalButtonText = submitButton.textContent;
      
      // حفظ الرسالة محلياً
      const message = {
        id: Date.now(),
        name: formData.get('name'),
        phone: formData.get('phone'),
        email: formData.get('email'),
        message: formData.get('message'),
        date: new Date().toISOString(),
        read: false
      };
      
      const data = JSON.parse(localStorage.getItem('cmaData'));
      data.messages.push(message);
      localStorage.setItem('cmaData', JSON.stringify(data));
      
      // تغيير نص الزر أثناء الإرسال
      const loadingText = currentLanguage === 'ar' ? 'جارِ الإرسال...' : 'Sending...';
      submitButton.textContent = loadingText;
      submitButton.disabled = true;
      
      // إرسال بيانات النموذج
      fetch(form.action, {
        method: 'POST',
        body: formData,
        headers: {
          'Accept': 'application/json'
        }
      })
      .then(response => {
        document.getElementById('thankYouPopup').style.display = 'flex';
        form.reset();
        updateStats();
      })
      .catch(error => {
        document.getElementById('thankYouPopup').style.display = 'flex';
        form.reset();
        updateStats();
      })
      .finally(() => {
        submitButton.textContent = originalButtonText;
        submitButton.disabled = false;
      });
    });

    // إغلاق إشعار الشكر
    document.getElementById('closeThankYou').addEventListener('click', function() {
      document.getElementById('thankYouPopup').style.display = 'none';
    });

    // تحميل الخدمات
    function loadServices() {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const servicesGrid = document.getElementById('servicesGrid');
      const workService = document.getElementById('workService');
      
      // تحديث شبكة الخدمات في الصفحة الرئيسية
      if (servicesGrid) {
        servicesGrid.innerHTML = '';
        data.services.forEach(service => {
          const serviceElement = document.createElement('li');
          serviceElement.innerHTML = `
            <div class="project-card" onclick="showService('${service.id}')">
              <div class="image-wrapper">
                <img src="${service.image}" alt="${service.name}" />
              </div>
              <p data-en="${service.nameEn}" data-ar="${service.name}">${currentLanguage === 'ar' ? service.name : service.nameEn}</p>
            </div>
          `;
          servicesGrid.appendChild(serviceElement);
        });
      }
      
      // تحديث قائمة اختيار الخدمة في الداش بورد
      if (workService) {
        workService.innerHTML = '<option value="">اختر الخدمة</option>';
        data.services.forEach(service => {
          const option = document.createElement('option');
          option.value = service.id;
          option.textContent = service.name;
          workService.appendChild(option);
        });
      }
    }

    // إعدادات الداش بورد
function checkAdminAccess() {
  const path = window.location.pathname;
  const hash = window.location.hash;

  if (hash === '#XCMA' || path.includes('XCMA')) {
    window.location.href = 'https://cmamarketing36.github.io/cmamarketing/xcma';
    return true;
  }
  return false;
}

    // إدارة الداش بورد
    function showDashboardSection(section) {
      // إخفاء جميع الأقسام
      document.querySelectorAll('.dashboard-section').forEach(s => s.classList.remove('active'));
      
      // إزالة الفئة النشطة من جميع الأزرار
      document.querySelectorAll('.dashboard-nav button').forEach(btn => btn.classList.remove('active'));
      
      // عرض القسم المحدد
      document.getElementById(section + 'Section').classList.add('active');
      
      // تفعيل الزر المحدد
      event.target.classList.add('active');
      
      if (section === 'overview') {
        updateStats();
        createChart();
      } else if (section === 'services') {
        loadDashboardServices();
      } else if (section === 'works') {
        loadDashboardWorks();
      } else if (section === 'messages') {
        loadDashboardMessages();
      } else if (section === 'consultations') {
        loadDashboardConsultations();
      }
    }

    // تحديث الإحصائيات
    function updateStats() {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      
      document.getElementById('totalServices').textContent = data.services.length;
      document.getElementById('totalWorks').textContent = data.works.length;
      document.getElementById('totalMessages').textContent = data.messages.filter(m => !m.read).length;
      document.getElementById('totalConsultations').textContent = data.consultations ? data.consultations.filter(c => !c.read).length : 0;
    }

    // إنشاء الرسم البياني
    function createChart() {
      const ctx = document.getElementById('worksChart');
      if (ctx) {
        if (worksChart) {
          worksChart.destroy();
        }
        
        const data = JSON.parse(localStorage.getItem('cmaData'));
        const servicesData = data.services.map(service => ({
          service: service.name,
          count: data.works.filter(work => work.service === service.id).length
        }));
        
        worksChart = new Chart(ctx, {
          type: 'doughnut',
          data: {
            labels: servicesData.map(s => s.service),
            datasets: [{
              data: servicesData.map(s => s.count),
              backgroundColor: [
                '#ffd700',
                '#d4af37',
                '#fff8dc',
                '#ffcc00',
                '#ffb300'
              ],
              borderWidth: 2,
              borderColor: '#1c1c1e'
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                labels: {
                  color: '#ffffff',
                  font: {
                    family: 'Poppins',
                    size: 14
                  }
                }
              }
            }
          }
        });
      }
    }

    // تحميل خدمات الداش بورد
    function loadDashboardServices() {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const servicesList = document.getElementById('servicesList');
      
      if (servicesList) {
        servicesList.innerHTML = '';
        data.services.forEach(service => {
          const serviceElement = document.createElement('div');
          serviceElement.className = 'list-item';
          serviceElement.innerHTML = `
            <div>
              <strong>${service.name}</strong>
              <p style="color: #666; font-size: 0.9rem;">${service.description}</p>
            </div>
            <div class="list-item-actions">
              <button class="edit-btn" onclick="editService('${service.id}')">تعديل</button>
              <button class="delete-btn" onclick="deleteService('${service.id}')">حذف</button>
            </div>
          `;
          servicesList.appendChild(serviceElement);
        });
      }
    }

    // تحميل أعمال الداش بورد
    function loadDashboardWorks() {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const worksList = document.getElementById('worksList');
      
      if (worksList) {
        worksList.innerHTML = '';
        data.works.forEach(work => {
          const service = data.services.find(s => s.id === work.service);
          const workElement = document.createElement('div');
          workElement.className = 'list-item';
          workElement.innerHTML = `
            <div>
              <strong>${work.title}</strong>
              <p style="color: #666; font-size: 0.9rem;">العميل: ${work.client}</p>
              <p style="color: #666; font-size: 0.9rem;">الخدمة: ${service ? service.name : 'غير محدد'}</p>
              <p style="color: #666; font-size: 0.9rem;">الصور: ${work.images ? work.images.length : 0}</p>
            </div>
            <div class="list-item-actions">
              <button class="edit-btn" onclick="editWork(${work.id})">تعديل</button>
              <button class="delete-btn" onclick="deleteWork(${work.id})">حذف</button>
            </div>
          `;
          worksList.appendChild(workElement);
        });
      }
    }

    // تحميل رسائل الداش بورد
    function loadDashboardMessages() {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const messagesList = document.getElementById('messagesList');
      
      if (messagesList) {
        messagesList.innerHTML = '';
        data.messages.forEach(message => {
          const messageElement = document.createElement('div');
          messageElement.className = 'list-item';
          messageElement.style.backgroundColor = message.read ? '#2a2a2a' : '#3a3a3a';
          messageElement.innerHTML = `
            <div>
              <strong>${message.name}</strong>
              <p style="color: #666; font-size: 0.9rem;">الهاتف: ${message.phone} | البريد: ${message.email}</p>
              <p style="color: #ddd; margin-top: 0.5rem;">${message.message}</p>
              <p style="color: #666; font-size: 0.8rem; margin-top: 0.5rem;">${new Date(message.date).toLocaleString('ar-EG')}</p>
            </div>
            <div class="list-item-actions">
              <button class="${message.read ? 'edit-btn' : 'delete-btn'}" onclick="toggleMessageRead(${message.id})">
                ${message.read ? 'مقروءة' : 'وضع كمقروءة'}
              </button>
              <button class="delete-btn" onclick="deleteMessage(${message.id})">حذف</button>
            </div>
          `;
          messagesList.appendChild(messageElement);
        });
      }
    }

    // تحميل طلبات الاستشارة
    function loadDashboardConsultations() {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const consultationsList = document.getElementById('consultationsList');
      
      if (consultationsList) {
        consultationsList.innerHTML = '';
        const consultations = data.consultations || [];
        consultations.forEach(consultation => {
          const consultationElement = document.createElement('div');
          consultationElement.className = 'list-item';
          consultationElement.style.backgroundColor = consultation.read ? '#2a2a2a' : '#3a3a3a';
          consultationElement.innerHTML = `
            <div>
              <strong>${consultation.name}</strong>
              <p style="color: #666; font-size: 0.9rem;">الهاتف: ${consultation.phone} | البريد: ${consultation.email}</p>
              <p style="color: #ddd; margin-top: 0.5rem;">${consultation.message}</p>
              <p style="color: #666; font-size: 0.8rem; margin-top: 0.5rem;">${new Date(consultation.date).toLocaleString('ar-EG')}</p>
            </div>
            <div class="list-item-actions">
              <button class="${consultation.read ? 'edit-btn' : 'delete-btn'}" onclick="toggleConsultationRead(${consultation.id})">
                ${consultation.read ? 'مقروءة' : 'وضع كمقروءة'}
              </button>
              <button class="delete-btn" onclick="deleteConsultation(${consultation.id})">حذف</button>
            </div>
          `;
          consultationsList.appendChild(consultationElement);
        });
        
        if (consultations.length === 0) {
          consultationsList.innerHTML = '<p style="text-align: center; color: #666;">لا توجد طلبات استشارة حالياً</p>';
        }
      }
    }

    // معالجة نماذج الداش بورد
    document.getElementById('addServiceForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const formData = new FormData(this);
      const serviceImage = document.getElementById('serviceImage').files[0];
      
      if (serviceImage) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const service = {
            id: Date.now().toString(),
            name: formData.get('serviceName'),
            nameEn: formData.get('serviceNameEn'),
            description: formData.get('serviceDescription'),
            descriptionEn: formData.get('serviceDescriptionEn'),
            image: e.target.result
          };
          
          const data = JSON.parse(localStorage.getItem('cmaData'));
          data.services.push(service);
          localStorage.setItem('cmaData', JSON.stringify(data));
          
          loadServices();
          loadDashboardServices();
          updateStats();
          document.getElementById('addServiceForm').reset();
          alert('تم إضافة الخدمة بنجاح');
        };
        reader.readAsDataURL(serviceImage);
      }
    });

    document.getElementById('addWorkForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const formData = new FormData(this);
      const workImages = document.getElementById('workImages').files;
      
      if (workImages.length > 0) {
        const images = [];
        let filesProcessed = 0;
        
        for (let i = 0; i < workImages.length; i++) {
          const reader = new FileReader();
          reader.onload = function(e) {
            images.push(e.target.result);
            filesProcessed++;
            
            if (filesProcessed === workImages.length) {
              const work = {
                id: Date.now(),
                service: formData.get('workService'),
                title: formData.get('workTitle'),
                titleEn: formData.get('workTitleEn'),
                description: formData.get('workDescription'),
                descriptionEn: formData.get('workDescriptionEn'),
                client: formData.get('workClient'),
                date: formData.get('workDate'),
                images: images,
                videoUrl: formData.get('workVideoUrl') || ''
              };
              
              const data = JSON.parse(localStorage.getItem('cmaData'));
              data.works.push(work);
              localStorage.setItem('cmaData', JSON.stringify(data));
              
              loadDashboardWorks();
              updateStats();
              createChart();
              document.getElementById('addWorkForm').reset();
              document.getElementById('imagesPreview').innerHTML = '';
              alert('تم إضافة العمل بنجاح');
            }
          };
          reader.readAsDataURL(workImages[i]);
        }
      } else {
        alert('يرجى اختيار صورة واحدة على الأقل');
      }
    });

    // معاينة الصور المختارة
    document.getElementById('workImages').addEventListener('change', function(e) {
      const preview = document.getElementById('imagesPreview');
      preview.innerHTML = '';
      
      for (let i = 0; i < e.target.files.length; i++) {
        const file = e.target.files[i];
        const reader = new FileReader();
        
        reader.onload = function(e) {
          const previewDiv = document.createElement('div');
          previewDiv.className = 'file-preview';
          previewDiv.innerHTML = `
            <img src="${e.target.result}" alt="معاينة">
            <button class="file-preview-remove" onclick="removeFilePreview(this)" type="button">×</button>
          `;
          preview.appendChild(previewDiv);
        };
        
        reader.readAsDataURL(file);
      }
    });

    // إزالة معاينة الصورة
    function removeFilePreview(button) {
      button.parentElement.remove();
    }

    // تغيير كلمة المرور
    document.getElementById('changePasswordForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const currentPassword = document.getElementById('currentPassword').value;
      const newPassword = document.getElementById('newPassword').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const currentUser = data.users[0];
      
      if (currentPassword !== currentUser.password) {
        alert('كلمة المرور الحالية غير صحيحة');
        return;
      }
      
      if (newPassword !== confirmPassword) {
        alert('كلمة المرور الجديدة غير متطابقة');
        return;
      }
      
      currentUser.password = newPassword;
      localStorage.setItem('cmaData', JSON.stringify(data));
      
      document.getElementById('changePasswordForm').reset();
      alert('تم تغيير كلمة المرور بنجاح');
    });

    // وظائف الحذف والتعديل
    function deleteService(serviceId) {
      if (confirm('هل أنت متأكد من حذف هذه الخدمة؟')) {
        const data = JSON.parse(localStorage.getItem('cmaData'));
        data.services = data.services.filter(s => s.id !== serviceId);
        data.works = data.works.filter(w => w.service !== serviceId);
        localStorage.setItem('cmaData', JSON.stringify(data));
        
        loadServices();
        loadDashboardServices();
        loadDashboardWorks();
        updateStats();
      }
    }

    function deleteWork(workId) {
      if (confirm('هل أنت متأكد من حذف هذا العمل؟')) {
        const data = JSON.parse(localStorage.getItem('cmaData'));
        data.works = data.works.filter(w => w.id !== workId);
        localStorage.setItem('cmaData', JSON.stringify(data));
        
        loadDashboardWorks();
        updateStats();
        createChart();
      }
    }

    function deleteMessage(messageId) {
      if (confirm('هل أنت متأكد من حذف هذه الرسالة؟')) {
        const data = JSON.parse(localStorage.getItem('cmaData'));
        data.messages = data.messages.filter(m => m.id !== messageId);
        localStorage.setItem('cmaData', JSON.stringify(data));
        
        loadDashboardMessages();
        updateStats();
      }
    }

    function deleteConsultation(consultationId) {
      if (confirm('هل أنت متأكد من حذف طلب الاستشارة؟')) {
        const data = JSON.parse(localStorage.getItem('cmaData'));
        data.consultations = data.consultations.filter(c => c.id !== consultationId);
        localStorage.setItem('cmaData', JSON.stringify(data));
        
        loadDashboardConsultations();
        updateStats();
      }
    }

    function toggleMessageRead(messageId) {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const message = data.messages.find(m => m.id === messageId);
      if (message) {
        message.read = !message.read;
        localStorage.setItem('cmaData', JSON.stringify(data));
        loadDashboardMessages();
        updateStats();
      }
    }

    function toggleConsultationRead(consultationId) {
      const data = JSON.parse(localStorage.getItem('cmaData'));
      const consultation = data.consultations.find(c => c.id === consultationId);
      if (consultation) {
        consultation.read = !consultation.read;
        localStorage.setItem('cmaData', JSON.stringify(data));
        loadDashboardConsultations();
        updateStats();
      }
    }

    function logout() {
      navigateTo('home');
    }

    // نظام إشعار الاستشارة التسويقية
    function startConsultationTimer() {
      consultationTimer = setTimeout(() => {
        showConsultationNotification();
      }, 30000); // 30 ثانية
    }

    function showConsultationNotification() {
      document.getElementById('consultationOverlay').classList.add('show');
      document.getElementById('consultationNotification').classList.add('show');
    }

    function closeConsultationNotification() {
      document.getElementById('consultationOverlay').classList.remove('show');
      document.getElementById('consultationNotification').classList.remove('show');
      
      // إعادة تشغيل المؤقت بعد 5 دقائق
      setTimeout(() => {
        startConsultationTimer();
      }, 30000);
    }

    function requestConsultation() {
      document.getElementById('consultationNotification').classList.remove('show');
      document.getElementById('consultationForm').style.display = 'block';
      document.getElementById('consultationForm').classList.add('show');
    }

    function closeConsultationForm() {
      document.getElementById('consultationOverlay').classList.remove('show');
      document.getElementById('consultationForm').classList.remove('show');
      document.getElementById('consultationForm').style.display = 'none';
    }

    function submitConsultation() {
      const name = document.getElementById('consultationName').value;
      const email = document.getElementById('consultationEmail').value;
      const phone = document.getElementById('consultationPhone').value;
      const message = document.getElementById('consultationMessage').value;
      
      if (!name || !email || !phone || !message) {
        alert('يرجى ملء جميع الحقول');
        return;
      }
      
      const consultation = {
        id: Date.now(),
        name: name,
        email: email,
        phone: phone,
        message: message,
        date: new Date().toISOString(),
        read: false
      };
      
      const data = JSON.parse(localStorage.getItem('cmaData'));
      if (!data.consultations) {
        data.consultations = [];
      }
      data.consultations.push(consultation);
      localStorage.setItem('cmaData', JSON.stringify(data));
      
      closeConsultationForm();
      alert('تم إرسال طلب الاستشارة بنجاح! سنتواصل معك قريباً.');
      
      // مسح النموذج
      document.getElementById('consultationRequestForm').reset();
      
      updateStats();
    }

    // إغلاق الإشعار عند النقر على الخلفية
    document.getElementById('consultationOverlay').addEventListener('click', function() {
      closeConsultationNotification();
      closeConsultationForm();
    });

    // التحقق من رابط الأدمين
    function checkForAdminLink() {
      const hash = window.location.hash;
      if (hash === '#XCMA') {
        // طلب تسجيل الدخول
        const username = prompt('اسم المستخدم:');
        const password = prompt('كلمة المرور:');
        
        const data = JSON.parse(localStorage.getItem('cmaData'));
        const user = data.users.find(u => u.username === username && u.password === password);
        
        if (user) {
          navigateTo('dashboard');
        } else {
          alert('اسم المستخدم أو كلمة المرور غير صحيحة');
          window.location.hash = '';
        }
      }
    }

    // معالجة تغيير الـ hash
    window.addEventListener('hashchange', function() {
      checkForAdminLink();
    });

    // معالجة الرجوع في المتصفح
    window.addEventListener('popstate', function(e) {
      if (e.state && e.state.page) {
        const pages = document.querySelectorAll('.page');
        pages.forEach(p => p.classList.remove('active'));
        document.getElementById(e.state.page + 'Page').classList.add('active');
      } else {
        navigateTo('home');
      }
    });

    // تهيئة النظام عند تحميل الصفحة
    document.addEventListener('DOMContentLoaded', function() {
      initializeSystem();
      checkForAdminLink();
      
      // التحقق من معاملات URL
      if (window.location.search.includes('submitted=true')) {
        document.getElementById('thankYouPopup').style.display = 'flex';
        const url = new URL(window.location);
        url.searchParams.delete('submitted');
        window.history.replaceState({}, document.title, url.toString());
      }
    });
  </script>
</body>
</html>